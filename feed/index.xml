<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[ALEX BEVILACQUA]]></title>
  <link href="http://www.alexbevi.com/feed" rel="self"/>
  <link href="http://www.alexbevi.com/"/>
  <updated>2014-11-17T09:01:38-05:00</updated>
  <id>http://www.alexbevi.com/</id>
  <author>
    <name><![CDATA[Alex Bevilacqua]]></name>
    <email><![CDATA[alex@alexbevi.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Vote ScummVM for SourceForge POTM]]></title>
    <link href="http://www.alexbevi.com/blog/2014/11/17/vote-scummvm-for-sourceforge-potm/"/>
    <updated>2014-11-17T08:50:15-05:00</updated>
    <id>http://www.alexbevi.com/blog/2014/11/17/vote-scummvm-for-sourceforge-potm</id>
    <content type="html"><![CDATA[<p>Although I haven&rsquo;t used my <a href="https://sourceforge.net">SourceForge</a> account in a number of years, when I started working with <a href="http://www.scummvm.org">ScummVM</a>, that&rsquo;s where the code and issue tracker were, so that&rsquo;s where the development community was as well.</p>

<p>They&rsquo;ve since moved to <a href="https://github.com/scummvm">GitHub</a>, but SourceForge has included them in the running for Project of the Month, January 2015.</p>

<p>If you&rsquo;ve still got an account, or just feel like creating one to show them some love, head on over to the <a href="https://sourceforge.net/p/potm/discussion/vote/thread/7a6c5c42/">voting page for POTM</a> and reply with <code>VOTE: scummvm</code>.</p>

<p><img src="http://www.alexbevi.com/images/scummvm-potm-0115-ss.png"></p>

<p>They&rsquo;ve got my vote ;)</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Just Finished - Robotrek]]></title>
    <link href="http://www.alexbevi.com/blog/2014/10/17/just-finished-robotrek/"/>
    <updated>2014-10-17T09:00:00-04:00</updated>
    <id>http://www.alexbevi.com/blog/2014/10/17/just-finished-robotrek</id>
    <content type="html"><![CDATA[<p>I was planning on writing this review a while ago, but it turns out I nuked my phone and lost my progress so I had to start all over again. I originally started this on 2014-09-26, but I kind of lost my motivation &hellip; and I started playing <a href="http://en.wikipedia.org/wiki/Terranigma">Terranigma</a>, which is pretty awesome so far.</p>

<p><img class="left" src="http://www.alexbevi.com/images/robotrek/220px-Robotrekboxart.jpg"></p>

<p>In my ongoing series of articles about old games that I never got around to playing, today I&rsquo;m going to tackle <a href="http://en.wikipedia.org/wiki/Robotrek">Robotrek</a>.</p>

<p>Robotrek is a silly RPG that revolves around &ldquo;getting to the bottom&rdquo; of a situation involving a group calling themselves the &ldquo;hackers&rdquo; who are disrupting the peace of your home town of Rococo.</p>

<p>The story follows your character, who wants to be an inventor, and right off the bat learns how to make robots. As you progress through the game, you&rsquo;ll eventually be able to build three robots, which can be swapped in an out during battle.</p>

<!-- more -->


<p><img class="right" src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).012.png"></p>

<p>These robots can be upgraded with better weapons and armour by reading books you find throughout the game.</p>

<p>You&rsquo;ll also learn how to make items and some useful tools that will help you solve various puzzles.</p>

<p><img class="left" src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).017.png"></p>

<p>Since you&rsquo;re an inventor in this game, one of your main tasks is to <em>combine</em> items you find in order to potentially make new items. Although this is useful a couple times, I found I didn&rsquo;t really need to use it beyond the first part of the game where you make the drill.</p>

<p>You can sometimes combine scraps with each other to produce weapons, or combine scraps with weapons to produce upgraded weapons, but only trial and error yield results. I couldn&rsquo;t find any information in the game that helped lead you towards proper combinations (and I wanted to avoid walkthroughs).</p>

<p><img class="right" src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).027.png"></p>

<p>Battles in this game are pretty straightforward. You equip weapons to your robots, then use them in battle either directly, or you can program sequences that allow you to run multiple attacks in succession. This approach can kill enemies faster, but will require you to charge up for longer, and therefore be vulnerable for longer as well.</p>

<p>The fights are extremely repetetive, and it doesn&rsquo;t help that there only appears to be a single battle theme that loops constantly. I played most of the game with the volume off due to this :P</p>

<p><img class="left" src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).010.png"></p>

<p>Once you get to the volcano and find the <em>Sword 4</em> in a chest, the random battles become exceedingly easy (for at least the next &frac34; of the game). This weapon is just ridiculously overpowered at this point and you&rsquo;ll find yourself just spamming it in order to quickly proceed through the story.</p>

<p>Boss battles tend to be very dependant on what level you&rsquo;re at when you enter the fight. Most battles I had to redo at least once as I found I was far too low of a level to have a chance.</p>

<p><img class="right" src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).022.png"></p>

<p>I found this to be the most true when I got to <strong>De Rose</strong>. This was the boss I reached during my last playthrough, and after grinding for a good 2 hours, I found I just couldn&rsquo;t beat her, gave up and moved on to another game.</p>

<p>This time around, I actually checked a walkthrough, which recommended I be at about level 50 before entering the fight. I was at level 37. I was going to have to grind &hellip; and grinding in this game is TEDIOUS. I ended up grinding to about level 44 before beating her, but this took a good 4-5 hours.</p>

<p>The story progresses: the Hackers leader (a crab) is defeated, Dr. Einst&rsquo;s plot is foiled, a new Hackers leader emerges (Blackmore), the story jumps back and forwards in time, a spaceship emerges so you can visit another planet and you end up having to save the world.</p>

<p><img class="left" src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).035.png"></p>

<p>The final battle is against Gateau (the &ldquo;food&rdquo;-naming convention for characters and places is used throughout the game), who had something to do with using the Tetron to build a weapon or something (I can&rsquo;t remember the exact story; play the game for a better description :P).</p>

<p>He takes two forms, but isn&rsquo;t overly difficult to defeat at this point.</p>

<p>Overall, this game was pretty easy. The story progressed in a very linear fashion, and most puzzles were pretty straightforward to solve.</p>

<p>It was fun though, and though I probably won&rsquo;t replay this game again in the future, I&rsquo;m glad that I went through it at least once.</p>

<p>My screenshots are below, though it seems that the emulator I was using (<a href="http://www.explusalpha.com/home/snes9x-ex">Snes9x EX</a> on my Moto G) overwrote some of my earlier images. Oh well. Enjoy :P</p>

<div id="galleria"><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).000.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).001.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).002.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).003.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).004.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).005.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).006.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).007.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).008.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).009.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).010.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).011.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).012.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).013.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).014.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).015.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).016.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).017.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).018.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).019.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).020.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).021.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).022.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).023.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).024.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).025.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).026.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).027.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).028.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).029.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).030.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).031.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).032.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).033.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).034.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).035.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).036.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).037.png" data-title="" /></div>


<script>  Galleria.configure('transition', 'fade');  Galleria.run('#galleria');</script>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Gallery Tag for Octopress]]></title>
    <link href="http://www.alexbevi.com/blog/2014/10/07/gallery-tag-for-octopress/"/>
    <updated>2014-10-07T08:31:08-04:00</updated>
    <id>http://www.alexbevi.com/blog/2014/10/07/gallery-tag-for-octopress</id>
    <content type="html"><![CDATA[<p>While working on my post about finishing <a href="http://en.wikipedia.org/wiki/Robotrek">Robotrek</a>, I found that I had taken a lot more screenshots than would fit nicely with the amount of copy I intended to write.</p>

<p><small>I hope to be done the <em>just finished &hellip;</em> article soon-ish &hellip;</small></p>

<p>Since I didn&rsquo;t really want to discard any, I figured I&rsquo;d just throw the execss screenshots into a carousel or gallery.</p>

<p>I found <a href="https://gist.github.com/kyv/5667902">an exellent example</a>, but it didn&rsquo;t quite produce the results I was looking for.</p>

<!-- more -->


<p>I ended up forking the gist in order to implement a Gallery tag for Jekyll/Octopress that could work with the <a href="http://galleria.io/">Galleria</a> jQuery plugin.</p>

<p>Now I can build a gallery from my extra screenshots by simply adding</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{% galleria %}
</span><span class='line'>/images/robotrek/Robotrek_(USA).000.png
</span><span class='line'>/images/robotrek/Robotrek_(USA).001.png
</span><span class='line'>/images/robotrek/Robotrek_(USA).002.png
</span><span class='line'>/images/robotrek/Robotrek_(USA).003.png
</span><span class='line'>/images/robotrek/Robotrek_(USA).004.png
</span><span class='line'>/images/robotrek/Robotrek_(USA).005.png
</span><span class='line'>/images/robotrek/Robotrek_(USA).006.png
</span><span class='line'>/images/robotrek/Robotrek_(USA).007.png
</span><span class='line'>/images/robotrek/Robotrek_(USA).008.png
</span><span class='line'>/images/robotrek/Robotrek_(USA).009.png
</span><span class='line'>/images/robotrek/Robotrek_(USA).010.png
</span><span class='line'>{% endgalleria %}</span></code></pre></td></tr></table></div></figure>


<p>to my post, which will produce the following gallery:</p>

<div id="galleria"><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).000.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).001.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).002.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).003.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).004.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).005.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).006.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).007.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).008.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).009.png" data-title="" /><img src="http://www.alexbevi.com/images/robotrek/Robotrek_(USA).010.png" data-title="" /></div>


<script>  Galleria.configure('transition', 'fade');  Galleria.run('#galleria');</script>


<p>I&rsquo;ve included the gist below. If you want to download and install this yourself, just download the gist to <code>/path/to/octopress/plugins</code>.</p>

<div><script src='https://gist.github.com/1c185c6a037d63f6aec7.js'></script>
<noscript><pre><code># Title: Galleria Tag for Jekyll
# Authors: Alex Bevilacqua
# Description: incorporate the Galleria gallery jquery plugin 
#
# Adaption of &quot;Photos tag for Jekyll&quot; by Devin Weaver, and the derived 
# &quot;Gallery Tag for Jekyll&quot; by Kevin Brown.
#
# Installation:
#
# {% galleria_includes %}
#
# This macro should be added to your `source/_includes/custom/head.html`
# in order to load the libraries needed by Galleria
#
# Example:
#
# {% galleria %}
# photo1.jpg
# /path/to/photos/photo2.jpg:title
# {% endgalleria %}
#
module Jekyll

  PLUGIN_GALLERIA_VERSION = &quot;1.4.2&quot;
  PLUGIN_JQUERY_VERSION   = &quot;2.1.1&quot;

  class PhotosUtil
    def initialize(context)
      @context = context
    end

    def path_for(filename)
      filename = filename.strip
      prefix = (@context.environments.first[&#39;site&#39;][&#39;photos_prefix&#39;] unless filename =~ /^(?:\/|http)/i) || &quot;&quot;
      &quot;#{prefix}#{filename}&quot;
    end
  end

  class GalleriaScriptIncludePatch &lt; Liquid::Tag
    def render(context)
      return &lt;&lt;-eof
&lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/jquery/#{PLUGIN_JQUERY_VERSION}/jquery.min.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/galleria/#{PLUGIN_GALLERIA_VERSION}/galleria.min.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/galleria/#{PLUGIN_GALLERIA_VERSION}/themes/classic/galleria.classic.min.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;
&lt;link href=&quot;//cdnjs.cloudflare.com/ajax/libs/galleria/#{PLUGIN_GALLERIA_VERSION}/themes/classic/galleria.classic.min.css&quot; media=&quot;screen, projection&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;
&lt;style&gt;
  /* This rule is read by Galleria to define the gallery height: */
  #galleria{height:320px}
&lt;/style&gt;
      eof
    end
  end

  class GalleriaTag &lt; Liquid::Block
    def initialize(tag_name, markup, tokens)
      # No initializing needed
      super
    end

    def render(context)
      # Convert the entire content array into one large string
      lines = super
      # split the text by newlines
      lines = lines.split(&quot;\n&quot;)
      
      p = PhotosUtil.new(context)
      gallery = &quot;&lt;div id=\&quot;galleria\&quot;&gt;&quot;

      lines.each_with_index do |line, i|
        next if line.empty?
        filename, title = line.split(&quot;:&quot;)
        title = (title.nil?) ? &quot;&quot; : title.strip
        gallery &lt;&lt; &quot;&lt;img src=\&quot;#{p.path_for(filename)}\&quot; data-title=\&quot;#{title}\&quot; /&gt;&quot;
      end
      gallery &lt;&lt; &quot;&lt;/div&gt;&quot;
      gallery &lt;&lt; &quot;&lt;script&gt;&quot;
      gallery &lt;&lt; &quot;  Galleria.configure(&#39;transition&#39;, &#39;fade&#39;);&quot;
      gallery &lt;&lt; &quot;  Galleria.run(&#39;#galleria&#39;);&quot;
      gallery &lt;&lt; &quot;&lt;/script&gt;&quot;
      gallery
    end
  end

end

Liquid::Template.register_tag(&#39;galleria&#39;, Jekyll::GalleriaTag)
Liquid::Template.register_tag(&#39;galleria_includes&#39;, Jekyll::GalleriaScriptIncludePatch)
</code></pre></noscript></div>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Second Royalty Statement]]></title>
    <link href="http://www.alexbevi.com/blog/2014/09/22/second-royalty-statement/"/>
    <updated>2014-09-22T11:45:14-04:00</updated>
    <id>http://www.alexbevi.com/blog/2014/09/22/second-royalty-statement</id>
    <content type="html"><![CDATA[<p>Although I haven&rsquo;t really had much to write about lately, I just got another royalty update from Packt Publishing about <a href="http://www.packtpub.com/redmine-plugin-extension-and-development/book">Redmine Plugin Extension and Development</a> so I wanted to share the latest sales figures &hellip; sort of :P</p>

<p>In the table below, I&rsquo;ve added the latest numbers to those from <a href="http://www.alexbevi.com/blog/2014/07/15/8748os-first-royalty-statement/">my previous post</a> in order to show the running total of units sold this year.</p>

<table>
<thead>
<tr>
<th> </th>
<th>Ebook Mini</th>
<th>Subscription Packtlib Mini</th>
<th>Print Book Mini</th>
<th>Subscription (3rd Party Mini)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Q1/2014</td>
<td>18</td>
<td>3</td>
<td>18</td>
<td>0</td>
</tr>
<tr>
<td>Q2/2014</td>
<td>73</td>
<td>1</td>
<td>33</td>
<td>2</td>
</tr>
</tbody>
</table>


<!-- more -->


<p><img class="left" src="http://www.alexbevi.com/images/royalties20140630.png"></p>

<p>Once again, I&rsquo;ve decided to remove the actual sales numbers from the statement, but I left in <em>TOTAL ROYALTIES TO BE PAID IN PERIOD</em> section. I did this to show the progress from time of publication to now in terms of how much of the advance has been consumed by <strong>ACTUAL</strong> sales.</p>

<p>At this rate, it&rsquo;s possible I&rsquo;ll see some additional money out of this title by the time 2014 is through .. which would be very exciting.</p>

<p>I&rsquo;m sure there are others out there who have been approached by technical publications and asked to write about some topic or other. I&rsquo;m sure the numbers I&rsquo;m posting here will convince you it&rsquo;s not worth quitting your job and writing full time, but it looks like it <em>could</em> become profitable over time.</p>

<p>If you&rsquo;ve had anything published and are seeing a decent return on your &ldquo;investment&rdquo;, please share in the comments ;)</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Just Finished - Fire Emblem: The Sacred Stones]]></title>
    <link href="http://www.alexbevi.com/blog/2014/08/06/just-finished-fire-emblem-the-sacred-stones/"/>
    <updated>2014-08-06T17:58:55-04:00</updated>
    <id>http://www.alexbevi.com/blog/2014/08/06/just-finished-fire-emblem-the-sacred-stones</id>
    <content type="html"><![CDATA[<p><img class="left" src="http://www.alexbevi.com/images/fire-emblem-the-sacred-stones.003.png"></p>

<p>I&rsquo;ve played a lot of RPGs over the years (JRPGs mostly) but have somehow managed to hear little to nothing about the <a href="http://en.wikipedia.org/wiki/Fire_Emblem">Fire Emblem</a> series.</p>

<p>My focus was mostly on the Final Fantasy series, as well as other Square-Enix properties so it&rsquo;s possible this is why :P</p>

<p>This post isn&rsquo;t really meant to be a review; it&rsquo;s more just my thoughts on the game right after I finished it as (a) I didn&rsquo;t take any notes, and (b) I started this playthrough over a year ago.</p>

<!--more-->


<p>I&rsquo;m using this as an opportunity to get back into writing a bit more frequently, so I apologize in advance if the subject matter isn&rsquo;t covered very well, or if the writing is all over the place.</p>

<p><img class="right" src="http://www.alexbevi.com/images/fire-emblem-the-sacred-stones.004.png"></p>

<p>I managed to complete the game in about 19 hours, so at least I managed to finish over an hour a month (which by gaming standards is terrible, but I&rsquo;m married with kids and have a job so <em>back off!</em> :P).</p>

<p>I played through on my Nexus 7 using <a href="https://play.google.com/store/apps/details?id=com.explusalpha.GbaEmu&amp;hl=en">GBA.emu</a> (which I would highly recommend buying to support the author), as I don&rsquo;t have an actual GBA (and prefer emulated games for convenience).</p>

<p><img class="left" src="http://www.alexbevi.com/images/fire-emblem-the-sacred-stones.002.png"></p>

<p>The game is turn-based tactical combat. You can buy equipment for your team members at various shops, and there is a &ldquo;world map&rdquo; that ties the various locations together. This makes is seem as though you&rsquo;re playing a board game.</p>

<p>The story is pretty straightforward: a dark force was sealed with a bunch of magic stones which were then distributed for safe keeping. Now someone wants to get these stones and re-awaken the dark force.</p>

<p>The goals of each map are either to defeat an enemy or capture a location. Along the way there are various NPC characters that you can either fight or try to persuade to join you.</p>

<p>Fight outcome is determined purely mathematically (stats, resources, weapon selection, character skill level, enemy skill level, terrain) and is presented as 2 avatars on the map with health guages underneath that deplete based on the result of the last &ldquo;turn&rdquo; of combat.</p>

<p>For some special battles, the characters are shown as their avatar representations and the fights are animated. These fights are generally plot advancement battles.</p>

<p><img class="right" src="http://www.alexbevi.com/images/fire-emblem-the-sacred-stones.005.png"></p>

<p>Once of the main differentiating factors between Fire Emblem and other RPG series is &ldquo;permanent death&rdquo;. Once a character dies on the battle field, there is no way to revive them. This can make the game extremely difficult as you can potentially advance to a point where you cannot continue as you don&rsquo;t have enough players to clear a map without dying.</p>

<p>I found myself abusing save states as I didn&rsquo;t want my characters to die, and I didn&rsquo;t want to restart campaigns once I&rsquo;d progressed beyond a certain point (usually about 10 minutes &hellip;).</p>

<p>Overall I quite enjoyed the game. The story isn&rsquo;t terrible and there are enough characters to keep the campaigns interesting if you want or, if you&rsquo;re like me you stick with a core group of characters that end up being ridiculously over-leveled by the end.</p>

<p><img class="left" src="http://www.alexbevi.com/images/fire-emblem-the-sacred-stones.000.png"></p>

<p>Once you finish the game, the final credits roll an epilogue unfolds that gives some final info about the characters that survived throughout the game. The characters that died in battle are also listed, and it summarizes where they died as well, which I thought was a nice touch.</p>

<p>I will likely take a stab at another entry in this series and take a bit more time (in game, not another year :P) to explore as I missed A LOT.</p>

<p>Once I finished the game I realized there was an entire Extras section where you can manage teams and practice battles (for points I think). Also I had a rogue with a members card and didn&rsquo;t notice any of the &ldquo;?&rdquo; shops until <em>after</em> beating the last area.</p>

<p>I also didn&rsquo;t spend much time in the optional dungeons, though I did use upgrade my characters to new classes whenever possible :) The next time I tackle a Fire Emblem title though I think I&rsquo;ll try to (a) explore more, (b) do more optional/side quests, &copy; NOT restart campaigns once they&rsquo;re underway.</p>

<p>I&rsquo;m currently also midway through a playthrough of <a href="http://en.wikipedia.org/wiki/Robotrek">Robotrek</a> which I&rsquo;ve been working on-again-off-again for about a year as well, so i may try to finish that off for the next <em>Just Finished&trade;</em> post.</p>

<p>If anyone has suggestions for an RPG, leave a comment (currently I&rsquo;m sticking with NES to PSP as the platform range).</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Pipe Command Output to Logentries]]></title>
    <link href="http://www.alexbevi.com/blog/2014/07/16/pipe-command-output-to-logentries/"/>
    <updated>2014-07-16T12:06:55-04:00</updated>
    <id>http://www.alexbevi.com/blog/2014/07/16/pipe-command-output-to-logentries</id>
    <content type="html"><![CDATA[<p>I&rsquo;ve been using <a href="https://logentries.com/">Logentries</a> for a couple of months now to manage variou project logs and have found it to be extremely convenient.</p>

<p>If you want to retrofit a crontab or any other process to use the Logentries Token-TCP type log, just do the following:</p>

<pre><code>COMMAND | while read -r line; do echo "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee $line" &gt; /dev/tcp/data.logentries.com/80; done
</code></pre>

<p>Where <code>aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee</code> is your log token, and <code>COMMAND</code> is whatever your like.</p>

<p>For example:</p>

<pre><code>lsblk | while read -r line; do echo "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee $line" &gt; /dev/tcp/data.logentries.com/80; done
</code></pre>

<p><img class="left" src="http://www.alexbevi.com/images/20140716-logentries.png"></p>

<p>Hopefully this helps someone other than myself :)</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Adding LinkedIn Share Support to Octopress]]></title>
    <link href="http://www.alexbevi.com/blog/2014/07/15/adding-linkedin-share-support-to-octopress/"/>
    <updated>2014-07-15T15:55:14-04:00</updated>
    <id>http://www.alexbevi.com/blog/2014/07/15/adding-linkedin-share-support-to-octopress</id>
    <content type="html"><![CDATA[<p>I was looking for a plugin or an include to easily add <a href="http://www.linkedin.com/">LinkedIn</a> support to the share options for my posts.</p>

<p>A quick Google search came up dry, so I figured I&rsquo;d just roll my own.</p>

<!--more-->


<p>In order to accomplish this, all that is required is to edit <code>source/_includes/post/sharing.html</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gh">diff --git a/source/_includes/post/sharing.html b/source/_includes/post/sharing.html</span>
</span><span class='line'><span class="gh">index e32500d..0bdd01e 100644</span>
</span><span class='line'><span class="gd">--- a/source/_includes/post/sharing.html</span>
</span><span class='line'><span class="gi">+++ b/source/_includes/post/sharing.html</span>
</span><span class='line'><span class="gu">@@ -5,6 +5,12 @@</span>
</span><span class='line'>   {% if site.google_plus_one %}
</span><span class='line'>   &lt;div class=&quot;g-plusone&quot; data-size=&quot;{{ site.google_plus_one_size }}&quot;&gt;&lt;/div&gt;
</span><span class='line'>   {% endif %}
</span><span class='line'><span class="gi">+  {% if site.linkedin_share %}</span>
</span><span class='line'><span class="gi">+    &lt;script src=&quot;//platform.linkedin.com/in.js&quot; type=&quot;text/javascript&quot;&gt;</span>
</span><span class='line'><span class="gi">+    lang: en_US</span>
</span><span class='line'><span class="gi">+  &lt;/script&gt;</span>
</span><span class='line'><span class="gi">+  &lt;script type=&quot;IN/Share&quot; data-url=&quot;{{ site.url }}{{ page.url }}&quot; data-counter=&quot;right&quot;&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="gi">+  {% endif %}</span>
</span><span class='line'>   {% if site.facebook_like %}
</span><span class='line'>     &lt;div class=&quot;fb-like&quot; data-send=&quot;true&quot; data-width=&quot;450&quot; data-show-faces=&quot;false&quot;&gt;&lt;/div&gt;
</span><span class='line'>   {% endif %}
</span></code></pre></td></tr></table></div></figure>


<p>The change above adds a snippit of Javascript that passes the current <code>site.url</code> and <code>page.url</code> in a similar fashion as is done for Twitter.</p>

<p>The Javascript source was generated using LinkedIn&rsquo;s <a href="https://developer.linkedin.com/plugins/share-plugin-generator">Share Plugin Generator</a>, so if the format of the one I&rsquo;ve chosen isn&rsquo;t to your liking, you can generate another.</p>

<p>Just in case you want to easily toggle this functionality, I&rsquo;ve also set it up to check for a configuration value in your site&rsquo;s <code>_config.yml</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gh">diff --git a/_config.yml b/_config.yml</span>
</span><span class='line'><span class="gh">index f8f825c..2dce55b 100644</span>
</span><span class='line'><span class="gd">--- a/_config.yml</span>
</span><span class='line'><span class="gi">+++ b/_config.yml</span>
</span><span class='line'><span class="gu">@@ -104,4 +104,7 @@ google_analytics_tracking_id: xxx</span>
</span><span class='line'> # Facebook Like
</span><span class='line'> facebook_like: true
</span><span class='line'>
</span><span class='line'><span class="gi">+# LinkedIn Share</span>
</span><span class='line'><span class="gi">+linkedin_share: true</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now, the next time your site is regenerated, a LinkedIn share button will be available.</p>

<p>This same method could be used to add pretty much any other social sharing sites you may want, as most should provide some form of widget generator.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[First Royalty Statement]]></title>
    <link href="http://www.alexbevi.com/blog/2014/07/15/8748os-first-royalty-statement/"/>
    <updated>2014-07-15T14:38:35-04:00</updated>
    <id>http://www.alexbevi.com/blog/2014/07/15/8748os-first-royalty-statement</id>
    <content type="html"><![CDATA[<p>Just a quick update on <a href="http://www.packtpub.com/redmine-plugin-extension-and-development/book">Redmine Plugin Extension and Development</a>. I received my first royalty statement today, which basically just inidicates that not enough books have sold to exceed the advance I received initially.</p>

<p><img class="left" src="http://www.alexbevi.com/images/royalties20140331.png"></p>

<p>(I probably didn&rsquo;t need to redact anything from the image, but it seemed appropriate.)</p>

<p>The deal I had with Packt was that they&rsquo;d front me $600 against future sales, of which my cut is (I believe) ~ 16% of the list price.</p>

<p>Still a ways to go (sales-wise) before I would consider this a &ldquo;profitable&rdquo; venture, but it&rsquo;s nice to see that there is at least some initial interest.</p>

<p>I was approached by Packt a little while back to author another book, but based on the amount of time I invested in this one as well as the sales figures I&rsquo;m sharing here, I don&rsquo;t think it would be a good choice :P</p>

<p>Should I consider writing another book? Any thoughts out there from my fellow denizens of the interwebs?</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Subversion + Ruby on Heroku via Buildpacks]]></title>
    <link href="http://www.alexbevi.com/blog/2014/07/07/subversion-plus-ruby-on-heroku-via-buildpacks/"/>
    <updated>2014-07-07T09:28:38-04:00</updated>
    <id>http://www.alexbevi.com/blog/2014/07/07/subversion-plus-ruby-on-heroku-via-buildpacks</id>
    <content type="html"><![CDATA[<p>Back in 2012, I wrote a post about <a href="http://www.alexbevi.com/blog/2012/11/21/fetching-changesets-in-redmine-from-heroku-using-svn/">Redmine and Subversion on Heroku</a> that involved some funky hacks in order to build a working <code>svn</code> binary that could be uploaded as part of your Git payload.</p>

<p>This can be done a lot more cleanly by taking advantage of <a href="https://devcenter.heroku.com/articles/buildpacks">Heroku Buildpacks</a>.</p>

<!-- more -->


<p>All of the instructions I provided in my previous post can now be distilled into a single buildpack install command.</p>

<p>If we want to leverage an existing solution, we just add the <a href="https://devcenter.heroku.com/articles/buildpacks">Subversion Buildpack</a> to our app.</p>

<p>The main &ldquo;gotcha&rdquo; here is that we can only have ONE buildpack defined at a time, which is problematic because our app&rsquo;s environment (Ruby, PHP, Node .. etc) is managed as a buildpack (see <a href="https://devcenter.heroku.com/articles/buildpacks">https://devcenter.heroku.com/articles/buildpacks</a> for more details).</p>

<p>In order to get around this limitation though, we can leverage another buildpack, known as the <a href="https://github.com/ddollar/heroku-buildpack-multi">heroku-buildpack-multi</a> buildpack which allows us to define multiple buildpacks.</p>

<p>For our purposes, we&rsquo;re going to add Subversion and Ruby to our app:</p>

<pre><code>$ cd /path/to/app

$ heroku config:add BUILDPACK_URL=https://github.com/ddollar/heroku-buildpack-multi.git

$ cat .buildpacks
https://github.com/cucumber-ltd/heroku-buildpack-subversion.git
https://github.com/heroku/heroku-buildpack-ruby.git

$ git commit .buildpacks -m "Add Buildpacks"
$ git push heroku master
</code></pre>

<p>This has helped me with my Redmine deployment on Heroku. Did it help you at all? Did I get something wrong. Let me know ;)</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Troubleshooting a Mongoid Connection Issue]]></title>
    <link href="http://www.alexbevi.com/blog/2014/06/23/troubleshooting-a-mongoid-connection-issue/"/>
    <updated>2014-06-23T10:27:58-04:00</updated>
    <id>http://www.alexbevi.com/blog/2014/06/23/troubleshooting-a-mongoid-connection-issue</id>
    <content type="html"><![CDATA[<p>I&rsquo;ve been struggling with an issue for a while now regarding Mongoid connections just freezing when the host is not on <em>localhost</em>. I&rsquo;ve tried posting this on <a href="https://stackoverflow.com/questions/24210058/mongoid-4-mongodb-2-4-freezing-issue">stack overflow</a> and <a href="https://github.com/mongoid/moped/issues/274">GitHub</a>, but haven&rsquo;t really gotten anywhere.</p>

<p>I&rsquo;m now trying to dive into the issue using GDB directly, which I&rsquo;m starting off following the <a href="http://blog.newrelic.com/2013/04/29/debugging-stuck-ruby-processes-what-to-do-before-you-kill-9/">NewRelic blog post</a> about debugging hung Ruby processes.</p>

<p>First, once the process is frozen, I connect using:</p>

<pre><code>sudo gdb -p &lt;pid&gt;
</code></pre>

<p>and then tried to get some info from the C-level backtraces via:</p>

<pre><code>(gdb) t a a bt
</code></pre>

<p>This resulted in a lot of information that didn&rsquo;t really help me (at least not immediately):</p>

<!--more-->




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
<span class='line-number'>176</span>
<span class='line-number'>177</span>
<span class='line-number'>178</span>
<span class='line-number'>179</span>
<span class='line-number'>180</span>
<span class='line-number'>181</span>
<span class='line-number'>182</span>
<span class='line-number'>183</span>
<span class='line-number'>184</span>
<span class='line-number'>185</span>
<span class='line-number'>186</span>
<span class='line-number'>187</span>
<span class='line-number'>188</span>
<span class='line-number'>189</span>
<span class='line-number'>190</span>
<span class='line-number'>191</span>
<span class='line-number'>192</span>
<span class='line-number'>193</span>
<span class='line-number'>194</span>
<span class='line-number'>195</span>
<span class='line-number'>196</span>
<span class='line-number'>197</span>
<span class='line-number'>198</span>
<span class='line-number'>199</span>
<span class='line-number'>200</span>
<span class='line-number'>201</span>
<span class='line-number'>202</span>
<span class='line-number'>203</span>
<span class='line-number'>204</span>
<span class='line-number'>205</span>
<span class='line-number'>206</span>
<span class='line-number'>207</span>
<span class='line-number'>208</span>
<span class='line-number'>209</span>
<span class='line-number'>210</span>
<span class='line-number'>211</span>
<span class='line-number'>212</span>
<span class='line-number'>213</span>
<span class='line-number'>214</span>
<span class='line-number'>215</span>
<span class='line-number'>216</span>
<span class='line-number'>217</span>
<span class='line-number'>218</span>
<span class='line-number'>219</span>
<span class='line-number'>220</span>
<span class='line-number'>221</span>
<span class='line-number'>222</span>
<span class='line-number'>223</span>
<span class='line-number'>224</span>
<span class='line-number'>225</span>
<span class='line-number'>226</span>
<span class='line-number'>227</span>
<span class='line-number'>228</span>
<span class='line-number'>229</span>
<span class='line-number'>230</span>
<span class='line-number'>231</span>
<span class='line-number'>232</span>
<span class='line-number'>233</span>
<span class='line-number'>234</span>
<span class='line-number'>235</span>
<span class='line-number'>236</span>
<span class='line-number'>237</span>
<span class='line-number'>238</span>
<span class='line-number'>239</span>
<span class='line-number'>240</span>
<span class='line-number'>241</span>
<span class='line-number'>242</span>
<span class='line-number'>243</span>
<span class='line-number'>244</span>
<span class='line-number'>245</span>
<span class='line-number'>246</span>
<span class='line-number'>247</span>
<span class='line-number'>248</span>
<span class='line-number'>249</span>
<span class='line-number'>250</span>
<span class='line-number'>251</span>
<span class='line-number'>252</span>
<span class='line-number'>253</span>
<span class='line-number'>254</span>
<span class='line-number'>255</span>
<span class='line-number'>256</span>
<span class='line-number'>257</span>
<span class='line-number'>258</span>
<span class='line-number'>259</span>
<span class='line-number'>260</span>
<span class='line-number'>261</span>
<span class='line-number'>262</span>
<span class='line-number'>263</span>
<span class='line-number'>264</span>
<span class='line-number'>265</span>
<span class='line-number'>266</span>
<span class='line-number'>267</span>
<span class='line-number'>268</span>
<span class='line-number'>269</span>
<span class='line-number'>270</span>
<span class='line-number'>271</span>
<span class='line-number'>272</span>
<span class='line-number'>273</span>
<span class='line-number'>274</span>
<span class='line-number'>275</span>
<span class='line-number'>276</span>
<span class='line-number'>277</span>
<span class='line-number'>278</span>
<span class='line-number'>279</span>
<span class='line-number'>280</span>
<span class='line-number'>281</span>
<span class='line-number'>282</span>
<span class='line-number'>283</span>
<span class='line-number'>284</span>
<span class='line-number'>285</span>
<span class='line-number'>286</span>
<span class='line-number'>287</span>
<span class='line-number'>288</span>
<span class='line-number'>289</span>
<span class='line-number'>290</span>
<span class='line-number'>291</span>
<span class='line-number'>292</span>
<span class='line-number'>293</span>
<span class='line-number'>294</span>
<span class='line-number'>295</span>
<span class='line-number'>296</span>
<span class='line-number'>297</span>
<span class='line-number'>298</span>
<span class='line-number'>299</span>
<span class='line-number'>300</span>
<span class='line-number'>301</span>
<span class='line-number'>302</span>
<span class='line-number'>303</span>
<span class='line-number'>304</span>
<span class='line-number'>305</span>
<span class='line-number'>306</span>
<span class='line-number'>307</span>
<span class='line-number'>308</span>
<span class='line-number'>309</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Thread 8 (Thread 0x7f032a5e1700 (LWP 9001)):
</span><span class='line'>#0  0x00007f0329c0ffbd in poll () at ../sysdeps/unix/syscall-template.S:81
</span><span class='line'>#1  0x00007f032a0d1d60 in timer_thread_sleep (gvl=0x1ed8f28) at thread_pthread.c:1381
</span><span class='line'>#2  thread_timer (p=0x1ed8f28) at thread_pthread.c:1456
</span><span class='line'>#3  0x00007f032990c182 in start_thread (arg=0x7f032a5e1700) at pthread_create.c:312
</span><span class='line'>#4  0x00007f0329c1d30d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111
</span><span class='line'>
</span><span class='line'>Thread 7 (Thread 0x7f032a4c0700 (LWP 9002)):
</span><span class='line'>#0  sem_wait () at ../nptl/sysdeps/unix/sysv/linux/x86_64/sem_wait.S:85
</span><span class='line'>#1  0x00007f032495b75d in v8::internal::LinuxSemaphore::Wait() ()
</span><span class='line'>   from gems/ruby-2.1.1/extensions/x86_64-linux/2.1.0/therubyracer-0.12.1/v8/init.so
</span><span class='line'>#2  0x00007f032486104c in v8::internal::RuntimeProfiler::WaitForSomeIsolateToEnterJS() ()
</span><span class='line'>   from gems/ruby-2.1.1/extensions/x86_64-linux/2.1.0/therubyracer-0.12.1/v8/init.so
</span><span class='line'>#3  0x00007f032495b968 in v8::internal::SignalSender::Run() ()
</span><span class='line'>   from gems/ruby-2.1.1/extensions/x86_64-linux/2.1.0/therubyracer-0.12.1/v8/init.so
</span><span class='line'>#4  0x00007f032495b86e in v8::internal::ThreadEntry(void*) ()
</span><span class='line'>   from gems/ruby-2.1.1/extensions/x86_64-linux/2.1.0/therubyracer-0.12.1/v8/init.so
</span><span class='line'>#5  0x00007f032990c182 in start_thread (arg=0x7f032a4c0700) at pthread_create.c:312
</span><span class='line'>#6  0x00007f0329c1d30d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111
</span><span class='line'>
</span><span class='line'>Thread 6 (Thread 0x7f0321988700 (LWP 9008)):
</span><span class='line'>#0  0x00007f0329c14c33 in select () at ../sysdeps/unix/syscall-template.S:81
</span><span class='line'>#1  0x00007f032a0d8cdb in rb_fd_select (n=&lt;optimized out&gt;, readfds=&lt;optimized out&gt;, writefds=&lt;optimized out&gt;, exceptfds=&lt;optimized out&gt;, 
</span><span class='line'>    timeout=&lt;optimized out&gt;) at thread.c:3321
</span><span class='line'>#2  0x00007f032a0d9139 in native_fd_select (th=&lt;optimized out&gt;, timeout=0x7f0321987550, exceptfds=0x0, writefds=0x0, readfds=0x7f0321987810, 
</span><span class='line'>    n=12) at thread_pthread.c:1007
</span><span class='line'>#3  do_select (timeout=0x7f0321987550, except=0x0, write=0x0, read=0x7f0321987810, n=12) at thread.c:3436
</span><span class='line'>#4  rb_thread_fd_select (max=max@entry=12, read=read@entry=0x7f0321987810, write=write@entry=0x0, except=except@entry=0x0, 
</span><span class='line'>    timeout=timeout@entry=0x7f03219877e0) at thread.c:3582
</span><span class='line'>#5  0x00007f0329f96150 in select_internal (fds=0x7f0321987810, tp=0x7f03219877e0, except=&lt;optimized out&gt;, write=&lt;optimized out&gt;, 
</span><span class='line'>    read=&lt;optimized out&gt;) at io.c:8232
</span><span class='line'>#6  select_call (arg=arg@entry=139651425269744) at io.c:8302
</span><span class='line'>#7  0x00007f0329f67d97 in rb_ensure (b_proc=b_proc@entry=0x7f0329f95e30 &lt;select_call&gt;, data1=data1@entry=139651425269744, 
</span><span class='line'>    e_proc=e_proc@entry=0x7f0329f926a0 &lt;select_end&gt;, data2=data2@entry=139651425269744) at eval.c:850
</span><span class='line'>#8  0x00007f0329f92810 in rb_f_select (argc=&lt;optimized out&gt;, argv=&lt;optimized out&gt;, obj=&lt;optimized out&gt;) at io.c:8651
</span><span class='line'>#9  0x00007f032a0b3024 in vm_call_cfunc_with_frame (ci=&lt;optimized out&gt;, reg_cfp=0x7f0321a88f20, th=0x96c91c0) at vm_insnhelper.c:1470
</span><span class='line'>#10 vm_call_cfunc (th=0x96c91c0, reg_cfp=0x7f0321a88f20, ci=&lt;optimized out&gt;) at vm_insnhelper.c:1560
</span><span class='line'>#11 0x00007f032a0b7a44 in vm_exec_core (th=th@entry=0x96c91c0, initial=initial@entry=0) at insns.def:1028
</span><span class='line'>#12 0x00007f032a0bb5ec in vm_exec (th=0x96c91c0) at vm.c:1304
</span><span class='line'>#13 0x00007f032a0be89f in vm_invoke_proc (th=th@entry=0x96c91c0, proc=0x96c9690, self=133280920, defined_class=117512440, argc=0, 
</span><span class='line'>    argv=0x7f1b228, blockptr=blockptr@entry=0x0) at vm.c:788
</span><span class='line'>#14 0x00007f032a0be8da in rb_vm_invoke_proc (th=th@entry=0x96c91c0, proc=&lt;optimized out&gt;, argc=&lt;optimized out&gt;, argv=&lt;optimized out&gt;, 
</span><span class='line'>    blockptr=blockptr@entry=0x0) at vm.c:807
</span><span class='line'>#15 0x00007f032a0d475d in thread_start_func_2 (th=th@entry=0x96c91c0, stack_start=&lt;optimized out&gt;) at thread.c:535
</span><span class='line'>#16 0x00007f032a0d4a9b in thread_start_func_1 (th_ptr=0x96c91c0) at thread_pthread.c:803
</span><span class='line'>#17 0x00007f032990c182 in start_thread (arg=0x7f0321988700) at pthread_create.c:312
</span><span class='line'>#18 0x00007f0329c1d30d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111
</span><span class='line'>
</span><span class='line'>Thread 5 (Thread 0x7f0321786700 (LWP 9009)):
</span><span class='line'>#0  pthread_cond_timedwait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_timedwait.S:238
</span><span class='line'>#1  0x00007f032a0d27ff in native_cond_timedwait (ts=&lt;optimized out&gt;, mutex=&lt;optimized out&gt;, cond=&lt;optimized out&gt;) at thread_pthread.c:352
</span><span class='line'>#2  native_sleep (th=0x96c9870, timeout_tv=0x7f03217857c0) at thread_pthread.c:1061
</span><span class='line'>#3  0x00007f032a0d55fa in sleep_timeval (th=0x96c9870, tv=..., spurious_check=spurious_check@entry=1) at thread.c:1046
</span><span class='line'>#4  0x00007f032a0d57ba in rb_thread_wait_for (time=...) at thread.c:1115
</span><span class='line'>#5  0x00007f0329ff27d0 in rb_f_sleep (argc=1, argv=0x7f0321787038) at process.c:4193
</span><span class='line'>#6  0x00007f032a0b3024 in vm_call_cfunc_with_frame (ci=&lt;optimized out&gt;, reg_cfp=0x7f0321886f70, th=0x96c9870) at vm_insnhelper.c:1470
</span><span class='line'>#7  vm_call_cfunc (th=0x96c9870, reg_cfp=0x7f0321886f70, ci=&lt;optimized out&gt;) at vm_insnhelper.c:1560
</span><span class='line'>#8  0x00007f032a0b7a44 in vm_exec_core (th=th@entry=0x96c9870, initial=initial@entry=0) at insns.def:1028
</span><span class='line'>#9  0x00007f032a0bb5ec in vm_exec (th=0x96c9870) at vm.c:1304
</span><span class='line'>#10 0x00007f032a0be89f in vm_invoke_proc (th=th@entry=0x96c9870, proc=0x96c9d90, self=133279880, defined_class=117256360, argc=0, 
</span><span class='line'>    argv=0x7f1afd0, blockptr=blockptr@entry=0x0) at vm.c:788
</span><span class='line'>#11 0x00007f032a0be8da in rb_vm_invoke_proc (th=th@entry=0x96c9870, proc=&lt;optimized out&gt;, argc=&lt;optimized out&gt;, argv=&lt;optimized out&gt;, 
</span><span class='line'>    blockptr=blockptr@entry=0x0) at vm.c:807
</span><span class='line'>#12 0x00007f032a0d475d in thread_start_func_2 (th=th@entry=0x96c9870, stack_start=&lt;optimized out&gt;) at thread.c:535
</span><span class='line'>#13 0x00007f032a0d4a9b in thread_start_func_1 (th_ptr=0x96c9870) at thread_pthread.c:803
</span><span class='line'>#14 0x00007f032990c182 in start_thread (arg=0x7f0321786700) at pthread_create.c:312
</span><span class='line'>#15 0x00007f0329c1d30d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111
</span><span class='line'>
</span><span class='line'>Thread 4 (Thread 0x7f0321584700 (LWP 9010)):
</span><span class='line'>#0  0x00007f0329c14c33 in select () at ../sysdeps/unix/syscall-template.S:81
</span><span class='line'>#1  0x00007f032a0d8cdb in rb_fd_select (n=&lt;optimized out&gt;, readfds=&lt;optimized out&gt;, writefds=&lt;optimized out&gt;, exceptfds=&lt;optimized out&gt;, 
</span><span class='line'>    timeout=&lt;optimized out&gt;) at thread.c:3321
</span><span class='line'>#2  0x00007f032a0d9139 in native_fd_select (th=&lt;optimized out&gt;, timeout=0x0, exceptfds=0x0, writefds=0x0, readfds=0x7f0321583810, n=11)
</span><span class='line'>    at thread_pthread.c:1007
</span><span class='line'>#3  do_select (timeout=0x0, except=0x0, write=0x0, read=0x7f0321583810, n=11) at thread.c:3436
</span><span class='line'>#4  rb_thread_fd_select (max=max@entry=11, read=read@entry=0x7f0321583810, write=write@entry=0x0, except=except@entry=0x0, 
</span><span class='line'>    timeout=timeout@entry=0x0) at thread.c:3582
</span><span class='line'>#5  0x00007f0329f96150 in select_internal (fds=0x7f0321583810, tp=0x0, except=&lt;optimized out&gt;, write=&lt;optimized out&gt;, read=&lt;optimized out&gt;)
</span><span class='line'>    at io.c:8232
</span><span class='line'>#6  select_call (arg=arg@entry=139651421059056) at io.c:8302
</span><span class='line'>#7  0x00007f0329f67d97 in rb_ensure (b_proc=b_proc@entry=0x7f0329f95e30 &lt;select_call&gt;, data1=data1@entry=139651421059056, 
</span><span class='line'>    e_proc=e_proc@entry=0x7f0329f926a0 &lt;select_end&gt;, data2=data2@entry=139651421059056) at eval.c:850
</span><span class='line'>#8  0x00007f0329f92810 in rb_f_select (argc=&lt;optimized out&gt;, argv=&lt;optimized out&gt;, obj=&lt;optimized out&gt;) at io.c:8651
</span><span class='line'>#9  0x00007f032a0b3024 in vm_call_cfunc_with_frame (ci=&lt;optimized out&gt;, reg_cfp=0x7f0321684f20, th=0x96c9f10) at vm_insnhelper.c:1470
</span><span class='line'>#10 vm_call_cfunc (th=0x96c9f10, reg_cfp=0x7f0321684f20, ci=&lt;optimized out&gt;) at vm_insnhelper.c:1560
</span><span class='line'>#11 0x00007f032a0b7a44 in vm_exec_core (th=th@entry=0x96c9f10, initial=initial@entry=0) at insns.def:1028
</span><span class='line'>#12 0x00007f032a0bb5ec in vm_exec (th=0x96c9f10) at vm.c:1304
</span><span class='line'>#13 0x00007f032a0be89f in vm_invoke_proc (th=th@entry=0x96c9f10, proc=0x96ec480, self=133126360, defined_class=118126960, argc=0, 
</span><span class='line'>    argv=0x7f1adf0, blockptr=blockptr@entry=0x0) at vm.c:788
</span><span class='line'>#14 0x00007f032a0be8da in rb_vm_invoke_proc (th=th@entry=0x96c9f10, proc=&lt;optimized out&gt;, argc=&lt;optimized out&gt;, argv=&lt;optimized out&gt;, 
</span><span class='line'>    blockptr=blockptr@entry=0x0) at vm.c:807
</span><span class='line'>#15 0x00007f032a0d475d in thread_start_func_2 (th=th@entry=0x96c9f10, stack_start=&lt;optimized out&gt;) at thread.c:535
</span><span class='line'>#16 0x00007f032a0d4a9b in thread_start_func_1 (th_ptr=0x96c9f10) at thread_pthread.c:803
</span><span class='line'>#17 0x00007f032990c182 in start_thread (arg=0x7f0321584700) at pthread_create.c:312
</span><span class='line'>#18 0x00007f0329c1d30d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111
</span><span class='line'>
</span><span class='line'>Thread 3 (Thread 0x7f0321180700 (LWP 9472)):
</span><span class='line'>#0  0x00007f0329c1007f in __GI_ppoll (fds=fds@entry=0x7f032117bb90, nfds=nfds@entry=1, timeout=&lt;optimized out&gt;, timeout@entry=0x0, 
</span><span class='line'>    sigmask=sigmask@entry=0x0) at ../sysdeps/unix/sysv/linux/ppoll.c:56
</span><span class='line'>#1  0x00007f032a0d9b28 in rb_wait_for_single_fd (fd=fd@entry=15, events=events@entry=1, tv=tv@entry=0x0) at thread.c:3656
</span><span class='line'>#2  0x00007f032a0da044 in rb_thread_wait_fd_rw (read=1, fd=fd@entry=15) at thread.c:3495
</span><span class='line'>#3  rb_thread_wait_fd (fd=fd@entry=15) at thread.c:3506
</span><span class='line'>#4  0x00007f0329f9693f in rb_io_wait_readable (f=15) at io.c:1092
</span><span class='line'>#5  0x00007f0329f97cee in io_bufread (ptr=0x7f03042c3440 "", len=36, fptr=0x7f0310054420) at io.c:2035
</span><span class='line'>#6  0x00007f0329f97e24 in bufread_call (arg=arg@entry=139651416833616) at io.c:2071
</span><span class='line'>#7  0x00007f0329f67d97 in rb_ensure (b_proc=b_proc@entry=0x7f0329f97e10 &lt;bufread_call&gt;, data1=data1@entry=139651416833616, 
</span><span class='line'>    e_proc=e_proc@entry=0x7f032a04f900 &lt;rb_str_unlocktmp&gt;, data2=&lt;optimized out&gt;) at eval.c:850
</span><span class='line'>#8  0x00007f032a05e8db in rb_str_locktmp_ensure (str=&lt;optimized out&gt;, func=func@entry=0x7f0329f97e10 &lt;bufread_call&gt;, 
</span><span class='line'>    arg=arg@entry=139651416833616) at string.c:2004
</span><span class='line'>#9  0x00007f0329f9ad06 in io_fread (fptr=0x7f0310054420, size=36, offset=0, str=139650673747040) at io.c:2085
</span><span class='line'>#10 io_read (argc=&lt;optimized out&gt;, argv=&lt;optimized out&gt;, io=35833440) at io.c:2816
</span><span class='line'>#11 0x00007f032a0bfae1 in vm_call_cfunc_with_frame (ci=&lt;optimized out&gt;, reg_cfp=0x7f032127e770, th=0x7f030c0455c0) at vm_insnhelper.c:1470
</span><span class='line'>#12 vm_call_cfunc (ci=&lt;optimized out&gt;, reg_cfp=0x7f032127e770, th=0x7f030c0455c0) at vm_insnhelper.c:1560
</span><span class='line'>---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---
</span><span class='line'>#13 vm_call_method (th=0x7f030c0455c0, cfp=0x7f032127e770, ci=&lt;optimized out&gt;) at vm_insnhelper.c:1754
</span><span class='line'>#14 0x00007f032a0b7b9c in vm_exec_core (th=th@entry=0x7f030c0455c0, initial=initial@entry=0) at insns.def:1050
</span><span class='line'>#15 0x00007f032a0bb5ec in vm_exec (th=th@entry=0x7f030c0455c0) at vm.c:1304
</span><span class='line'>#16 0x00007f032a0c2cff in invoke_block_from_c (defined_class=79426520, cref=0x0, blockptr=0x0, argv=0x7f032117c2e8, argc=1, self=72558880, 
</span><span class='line'>    block=&lt;optimized out&gt;, th=0x7f030c0455c0) at vm.c:732
</span><span class='line'>#17 vm_yield (argv=&lt;optimized out&gt;, argc=&lt;optimized out&gt;, th=&lt;optimized out&gt;) at vm.c:763
</span><span class='line'>#18 rb_yield_0 (argv=0x7f032117c2e8, argc=1) at vm_eval.c:938
</span><span class='line'>#19 rb_yield (val=&lt;optimized out&gt;) at vm_eval.c:948
</span><span class='line'>#20 0x00007f0329f1d4bd in rb_ary_collect (ary=139650673749800) at array.c:2684
</span><span class='line'>#21 0x00007f032a0b3024 in vm_call_cfunc_with_frame (ci=&lt;optimized out&gt;, reg_cfp=0x7f032127ea90, th=0x7f030c0455c0) at vm_insnhelper.c:1470
</span><span class='line'>#22 vm_call_cfunc (th=0x7f030c0455c0, reg_cfp=0x7f032127ea90, ci=&lt;optimized out&gt;) at vm_insnhelper.c:1560
</span><span class='line'>#23 0x00007f032a0b8385 in vm_exec_core (th=th@entry=0x7f030c0455c0, initial=initial@entry=0) at insns.def:999
</span><span class='line'>#24 0x00007f032a0bb5ec in vm_exec (th=th@entry=0x7f030c0455c0) at vm.c:1304
</span><span class='line'>#25 0x00007f032a0c2cff in invoke_block_from_c (defined_class=80043920, cref=0x0, blockptr=0x0, argv=0x7f032117c6c8, argc=1, 
</span><span class='line'>    self=139650673695240, block=&lt;optimized out&gt;, th=0x7f030c0455c0) at vm.c:732
</span><span class='line'>#26 vm_yield (argv=&lt;optimized out&gt;, argc=&lt;optimized out&gt;, th=&lt;optimized out&gt;) at vm.c:763
</span><span class='line'>#27 rb_yield_0 (argv=0x7f032117c6c8, argc=1) at vm_eval.c:938
</span><span class='line'>#28 rb_yield (val=&lt;optimized out&gt;) at vm_eval.c:948
</span><span class='line'>#29 0x00007f0329f15fa2 in rb_ary_each (array=139650673713080) at array.c:1792
</span><span class='line'>#30 0x00007f032a0b3024 in vm_call_cfunc_with_frame (ci=&lt;optimized out&gt;, reg_cfp=0x7f032127f170, th=0x7f030c0455c0) at vm_insnhelper.c:1470
</span><span class='line'>#31 vm_call_cfunc (th=0x7f030c0455c0, reg_cfp=0x7f032127f170, ci=&lt;optimized out&gt;) at vm_insnhelper.c:1560
</span><span class='line'>#32 0x00007f032a0b8385 in vm_exec_core (th=th@entry=0x7f030c0455c0, initial=initial@entry=0) at insns.def:999
</span><span class='line'>#33 0x00007f032a0bb5ec in vm_exec (th=0x7f030c0455c0) at vm.c:1304
</span><span class='line'>#34 0x00007f032a0be89f in vm_invoke_proc (th=0x7f030c0455c0, proc=proc@entry=0x7f0304886b90, self=139650673713320, defined_class=78042600, 
</span><span class='line'>    argc=argc@entry=0, argv=argv@entry=0x7f0321182020, blockptr=0x0) at vm.c:788
</span><span class='line'>#35 0x00007f032a0be8da in rb_vm_invoke_proc (th=&lt;optimized out&gt;, proc=proc@entry=0x7f0304886b90, argc=argc@entry=0, 
</span><span class='line'>    argv=argv@entry=0x7f0321182020, blockptr=&lt;optimized out&gt;) at vm.c:807
</span><span class='line'>#36 0x00007f0329f6e550 in proc_call (argc=0, argv=0x7f0321182020, procval=139650673713160) at proc.c:734
</span><span class='line'>#37 0x00007f032a0b3024 in vm_call_cfunc_with_frame (ci=&lt;optimized out&gt;, reg_cfp=0x7f032127f300, th=0x7f030c0455c0) at vm_insnhelper.c:1470
</span><span class='line'>#38 vm_call_cfunc (th=0x7f030c0455c0, reg_cfp=0x7f032127f300, ci=&lt;optimized out&gt;) at vm_insnhelper.c:1560
</span><span class='line'>#39 0x00007f032a0b7a44 in vm_exec_core (th=th@entry=0x7f030c0455c0, initial=initial@entry=0) at insns.def:1028
</span><span class='line'>#40 0x00007f032a0bb5ec in vm_exec (th=0x7f030c0455c0) at vm.c:1304
</span><span class='line'>#41 0x00007f032a0be89f in vm_invoke_proc (th=th@entry=0x7f030c0455c0, proc=0x9676cb0, self=139650673658200, defined_class=79743600, argc=1, 
</span><span class='line'>    argv=argv@entry=0x7f032117d0a0, blockptr=0x0) at vm.c:788
</span><span class='line'>#42 0x00007f032a0bea45 in vm_call_bmethod_body (argv=0x7f032117d0a0, ci=0x7f032117d280, th=0x7f030c0455c0) at vm_insnhelper.c:1592
</span><span class='line'>#43 vm_call_bmethod (th=th@entry=0x7f030c0455c0, cfp=cfp@entry=0x7f032127f7b0, ci=ci@entry=0x7f032117d280) at vm_insnhelper.c:1607
</span><span class='line'>#44 0x00007f032a0bfc1e in vm_call_method (th=th@entry=0x7f030c0455c0, cfp=cfp@entry=0x7f032127f7b0, ci=ci@entry=0x7f032117d280)
</span><span class='line'>    at vm_insnhelper.c:1774
</span><span class='line'>#45 0x00007f032a0bf691 in vm_call_opt_send (th=0x7f030c0455c0, reg_cfp=0x7f032127f7b0, ci=0x7f032117d280) at vm_insnhelper.c:1657
</span><span class='line'>#46 0x00007f032a0b7a44 in vm_exec_core (th=th@entry=0x7f030c0455c0, initial=initial@entry=0) at insns.def:1028
</span><span class='line'>#47 0x00007f032a0bb5ec in vm_exec (th=0x7f030c0455c0) at vm.c:1304
</span><span class='line'>#48 0x00007f032a0bec82 in vm_yield_with_cref (cref=&lt;optimized out&gt;, argv=&lt;optimized out&gt;, argc=&lt;optimized out&gt;, th=0x7f030c0455c0) at vm.c:755
</span><span class='line'>#49 yield_under (under=&lt;optimized out&gt;, self=&lt;optimized out&gt;, values=139650673660760) at vm_eval.c:1531
</span><span class='line'>#50 0x00007f032a0bfae1 in vm_call_cfunc_with_frame (ci=&lt;optimized out&gt;, reg_cfp=0x7f032127f9e0, th=0x7f030c0455c0) at vm_insnhelper.c:1470
</span><span class='line'>#51 vm_call_cfunc (ci=&lt;optimized out&gt;, reg_cfp=0x7f032127f9e0, th=0x7f030c0455c0) at vm_insnhelper.c:1560
</span><span class='line'>#52 vm_call_method (th=0x7f030c0455c0, cfp=0x7f032127f9e0, ci=&lt;optimized out&gt;) at vm_insnhelper.c:1754
</span><span class='line'>#53 0x00007f032a0b8385 in vm_exec_core (th=th@entry=0x7f030c0455c0, initial=initial@entry=0) at insns.def:999
</span><span class='line'>#54 0x00007f032a0bb5ec in vm_exec (th=0x7f030c0455c0) at vm.c:1304
</span><span class='line'>#55 0x00007f032a0be89f in vm_invoke_proc (th=0x7f030c0455c0, proc=proc@entry=0x7f030010a480, self=83224000, defined_class=87087200, 
</span><span class='line'>    argc=argc@entry=2, argv=argv@entry=0x7f0321181c90, blockptr=0x0) at vm.c:788
</span><span class='line'>#56 0x00007f032a0be8da in rb_vm_invoke_proc (th=&lt;optimized out&gt;, proc=proc@entry=0x7f030010a480, argc=argc@entry=2, 
</span><span class='line'>    argv=argv@entry=0x7f0321181c90, blockptr=&lt;optimized out&gt;) at vm.c:807
</span><span class='line'>#57 0x00007f0329f6e550 in proc_call (argc=2, argv=0x7f0321181c90, procval=139651130810120) at proc.c:734
</span><span class='line'>#58 0x00007f032a0b3024 in vm_call_cfunc_with_frame (ci=&lt;optimized out&gt;, reg_cfp=0x7f032127fa80, th=0x7f030c0455c0) at vm_insnhelper.c:1470
</span><span class='line'>#59 vm_call_cfunc (th=0x7f030c0455c0, reg_cfp=0x7f032127fa80, ci=&lt;optimized out&gt;) at vm_insnhelper.c:1560
</span><span class='line'>#60 0x00007f032a0b7a44 in vm_exec_core (th=th@entry=0x7f030c0455c0, initial=initial@entry=0) at insns.def:1028
</span><span class='line'>#61 0x00007f032a0bb5ec in vm_exec (th=0x7f030c0455c0) at vm.c:1304
</span><span class='line'>#62 0x00007f032a0be89f in vm_invoke_proc (th=0x7f030c0455c0, proc=proc@entry=0x7f030010a560, self=87087800, defined_class=87087760, 
</span><span class='line'>    argc=argc@entry=1, argv=argv@entry=0x7f0321181c38, blockptr=0x0) at vm.c:788
</span><span class='line'>#63 0x00007f032a0be8da in rb_vm_invoke_proc (th=&lt;optimized out&gt;, proc=proc@entry=0x7f030010a560, argc=argc@entry=1, 
</span><span class='line'>    argv=argv@entry=0x7f0321181c38, blockptr=&lt;optimized out&gt;) at vm.c:807
</span><span class='line'>#64 0x00007f0329f6e550 in proc_call (argc=1, argv=0x7f0321181c38, procval=139651130809960) at proc.c:734
</span><span class='line'>#65 0x00007f032a0bfae1 in vm_call_cfunc_with_frame (ci=&lt;optimized out&gt;, reg_cfp=0x7f032127fb20, th=0x7f030c0455c0) at vm_insnhelper.c:1470
</span><span class='line'>#66 vm_call_cfunc (ci=&lt;optimized out&gt;, reg_cfp=0x7f032127fb20, th=0x7f030c0455c0) at vm_insnhelper.c:1560
</span><span class='line'>#67 vm_call_method (th=0x7f030c0455c0, cfp=0x7f032127fb20, ci=&lt;optimized out&gt;) at vm_insnhelper.c:1754
</span><span class='line'>#68 0x00007f032a0b7a44 in vm_exec_core (th=th@entry=0x7f030c0455c0, initial=initial@entry=0) at insns.def:1028
</span><span class='line'>#69 0x00007f032a0bb5ec in vm_exec (th=0x7f030c0455c0) at vm.c:1304
</span><span class='line'>#70 0x00007f032a0be89f in vm_invoke_proc (th=0x7f030c0455c0, proc=proc@entry=0x7f030010a720, self=87087800, defined_class=87087760, 
</span><span class='line'>    argc=argc@entry=1, argv=argv@entry=0x7f0321181be0, blockptr=0x0) at vm.c:788
</span><span class='line'>#71 0x00007f032a0be8da in rb_vm_invoke_proc (th=&lt;optimized out&gt;, proc=proc@entry=0x7f030010a720, argc=argc@entry=1, 
</span><span class='line'>    argv=argv@entry=0x7f0321181be0, blockptr=&lt;optimized out&gt;) at vm.c:807
</span><span class='line'>#72 0x00007f0329f6e550 in proc_call (argc=1, argv=0x7f0321181be0, procval=139651130809560) at proc.c:734
</span><span class='line'>#73 0x00007f032a0b3024 in vm_call_cfunc_with_frame (ci=&lt;optimized out&gt;, reg_cfp=0x7f032127fbc0, th=0x7f030c0455c0) at vm_insnhelper.c:1470
</span><span class='line'>#74 vm_call_cfunc (th=0x7f030c0455c0, reg_cfp=0x7f032127fbc0, ci=&lt;optimized out&gt;) at vm_insnhelper.c:1560
</span><span class='line'>#75 0x00007f032a0b7a44 in vm_exec_core (th=th@entry=0x7f030c0455c0, initial=initial@entry=0) at insns.def:1028
</span><span class='line'>#76 0x00007f032a0bb5ec in vm_exec (th=0x7f030c0455c0) at vm.c:1304
</span><span class='line'>---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---
</span><span class='line'>#77 0x00007f032a0be89f in vm_invoke_proc (th=0x7f030c0455c0, proc=proc@entry=0x7f0304529c40, self=156831200, defined_class=50567600, 
</span><span class='line'>    argc=argc@entry=1, argv=argv@entry=0x7f0321181990, blockptr=0x0) at vm.c:788
</span><span class='line'>#78 0x00007f032a0be8da in rb_vm_invoke_proc (th=&lt;optimized out&gt;, proc=proc@entry=0x7f0304529c40, argc=argc@entry=1, 
</span><span class='line'>    argv=argv@entry=0x7f0321181990, blockptr=&lt;optimized out&gt;) at vm.c:807
</span><span class='line'>#79 0x00007f0329f6e550 in proc_call (argc=1, argv=0x7f0321181990, procval=139650673670240) at proc.c:734
</span><span class='line'>#80 0x00007f032a0b3024 in vm_call_cfunc_with_frame (ci=&lt;optimized out&gt;, reg_cfp=0x7f0321280070, th=0x7f030c0455c0) at vm_insnhelper.c:1470
</span><span class='line'>#81 vm_call_cfunc (th=0x7f030c0455c0, reg_cfp=0x7f0321280070, ci=&lt;optimized out&gt;) at vm_insnhelper.c:1560
</span><span class='line'>#82 0x00007f032a0b7a44 in vm_exec_core (th=th@entry=0x7f030c0455c0, initial=initial@entry=0) at insns.def:1028
</span><span class='line'>#83 0x00007f032a0bb5ec in vm_exec (th=th@entry=0x7f030c0455c0) at vm.c:1304
</span><span class='line'>#84 0x00007f032a0c2cff in invoke_block_from_c (defined_class=76547880, cref=0x0, blockptr=0x0, argv=0x7f032117ee08, argc=1, self=34415960, 
</span><span class='line'>    block=&lt;optimized out&gt;, th=0x7f030c0455c0) at vm.c:732
</span><span class='line'>#85 vm_yield (argv=&lt;optimized out&gt;, argc=&lt;optimized out&gt;, th=&lt;optimized out&gt;) at vm.c:763
</span><span class='line'>#86 rb_yield_0 (argv=0x7f032117ee08, argc=1) at vm_eval.c:938
</span><span class='line'>#87 rb_yield (val=&lt;optimized out&gt;) at vm_eval.c:948
</span><span class='line'>#88 0x00007f0329f15fa2 in rb_ary_each (array=139650673629520) at array.c:1792
</span><span class='line'>#89 0x00007f032a0b3024 in vm_call_cfunc_with_frame (ci=&lt;optimized out&gt;, reg_cfp=0x7f03212801b0, th=0x7f030c0455c0) at vm_insnhelper.c:1470
</span><span class='line'>#90 vm_call_cfunc (th=0x7f030c0455c0, reg_cfp=0x7f03212801b0, ci=&lt;optimized out&gt;) at vm_insnhelper.c:1560
</span><span class='line'>#91 0x00007f032a0b8385 in vm_exec_core (th=th@entry=0x7f030c0455c0, initial=initial@entry=0) at insns.def:999
</span><span class='line'>#92 0x00007f032a0bb5ec in vm_exec (th=th@entry=0x7f030c0455c0) at vm.c:1304
</span><span class='line'>#93 0x00007f032a0c2924 in invoke_block_from_c (defined_class=80036240, cref=0x0, blockptr=0x0, argv=0x7f032117f1c8, argc=1, self=120753520, 
</span><span class='line'>    block=&lt;optimized out&gt;, th=0x7f030c0455c0) at vm.c:732
</span><span class='line'>#94 vm_yield (argv=0x7f032117f1c8, argc=1, th=0x7f030c0455c0) at vm.c:763
</span><span class='line'>#95 rb_yield_0 (argv=0x7f032117f1c8, argc=1) at vm_eval.c:938
</span><span class='line'>#96 catch_i (tag=&lt;optimized out&gt;, data=data@entry=0) at vm_eval.c:1772
</span><span class='line'>#97 0x00007f032a0b4b4a in rb_catch_protect (t=&lt;optimized out&gt;, func=func@entry=0x7f032a0c26c0 &lt;catch_i&gt;, data=data@entry=0, 
</span><span class='line'>    stateptr=stateptr@entry=0x7f032117f340) at vm_eval.c:1858
</span><span class='line'>#98 0x00007f032a0b4bbc in rb_catch_obj (t=&lt;optimized out&gt;, func=func@entry=0x7f032a0c26c0 &lt;catch_i&gt;, data=data@entry=0) at vm_eval.c:1837
</span><span class='line'>#99 0x00007f032a0b4c6e in rb_f_catch (argc=&lt;optimized out&gt;, argv=&lt;optimized out&gt;) at vm_eval.c:1823
</span><span class='line'>#100 0x00007f032a0b3024 in vm_call_cfunc_with_frame (ci=&lt;optimized out&gt;, reg_cfp=0x7f03212802f0, th=0x7f030c0455c0) at vm_insnhelper.c:1470
</span><span class='line'>#101 vm_call_cfunc (th=0x7f030c0455c0, reg_cfp=0x7f03212802f0, ci=&lt;optimized out&gt;) at vm_insnhelper.c:1560
</span><span class='line'>#102 0x00007f032a0b8385 in vm_exec_core (th=th@entry=0x7f030c0455c0, initial=initial@entry=0) at insns.def:999
</span><span class='line'>#103 0x00007f032a0bb5ec in vm_exec (th=0x7f030c0455c0) at vm.c:1304
</span><span class='line'>#104 0x00007f032a0be89f in vm_invoke_proc (th=0x7f030c0455c0, proc=proc@entry=0x96c8680, self=133126360, defined_class=118126960, 
</span><span class='line'>    argc=argc@entry=2, argv=argv@entry=0x7f0321181070, blockptr=0x0) at vm.c:788
</span><span class='line'>#105 0x00007f032a0be8da in rb_vm_invoke_proc (th=&lt;optimized out&gt;, proc=proc@entry=0x96c8680, argc=argc@entry=2, 
</span><span class='line'>    argv=argv@entry=0x7f0321181070, blockptr=&lt;optimized out&gt;) at vm.c:807
</span><span class='line'>#106 0x00007f0329f6e550 in proc_call (argc=2, argv=0x7f0321181070, procval=133281320) at proc.c:734
</span><span class='line'>#107 0x00007f032a0b3024 in vm_call_cfunc_with_frame (ci=&lt;optimized out&gt;, reg_cfp=0x7f0321280f70, th=0x7f030c0455c0) at vm_insnhelper.c:1470
</span><span class='line'>---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---
</span><span class='line'>#108 vm_call_cfunc (th=0x7f030c0455c0, reg_cfp=0x7f0321280f70, ci=&lt;optimized out&gt;) at vm_insnhelper.c:1560
</span><span class='line'>#109 0x00007f032a0b8385 in vm_exec_core (th=th@entry=0x7f030c0455c0, initial=initial@entry=0) at insns.def:999
</span><span class='line'>#110 0x00007f032a0bb5ec in vm_exec (th=0x7f030c0455c0) at vm.c:1304
</span><span class='line'>#111 0x00007f032a0be89f in vm_invoke_proc (th=th@entry=0x7f030c0455c0, proc=0x7f030c044ca0, self=133281640, defined_class=117256680, argc=0, 
</span><span class='line'>    argv=0x7f02f4c943a0, blockptr=blockptr@entry=0x0) at vm.c:788
</span><span class='line'>#112 0x00007f032a0be8da in rb_vm_invoke_proc (th=th@entry=0x7f030c0455c0, proc=&lt;optimized out&gt;, argc=&lt;optimized out&gt;, argv=&lt;optimized out&gt;, 
</span><span class='line'>    blockptr=blockptr@entry=0x0) at vm.c:807
</span><span class='line'>#113 0x00007f032a0d475d in thread_start_func_2 (th=th@entry=0x7f030c0455c0, stack_start=&lt;optimized out&gt;) at thread.c:535
</span><span class='line'>#114 0x00007f032a0d4a9b in thread_start_func_1 (th_ptr=0x7f030c0455c0) at thread_pthread.c:803
</span><span class='line'>#115 0x00007f032990c182 in start_thread (arg=0x7f0321180700) at pthread_create.c:312
</span><span class='line'>#116 0x00007f0329c1d30d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111
</span><span class='line'>
</span><span class='line'>Thread 2 (Thread 0x7f0320f7e700 (LWP 9563)):
</span><span class='line'>#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185
</span><span class='line'>#1  0x00007f032a0d6ce3 in native_cond_wait (mutex=0x8ef42b0, cond=0x8ef42d8) at thread_pthread.c:334
</span><span class='line'>#2  lock_func (timeout_ms=0, mutex=0x8ef42b0, th=0x7f030c0485d0) at thread.c:4324
</span><span class='line'>#3  rb_mutex_lock (self=120765160) at thread.c:4398
</span><span class='line'>#4  0x00007f032a0b3024 in vm_call_cfunc_with_frame (ci=&lt;optimized out&gt;, reg_cfp=0x7f032107ebb0, th=0x7f030c0485d0) at vm_insnhelper.c:1470
</span><span class='line'>#5  vm_call_cfunc (th=0x7f030c0485d0, reg_cfp=0x7f032107ebb0, ci=&lt;optimized out&gt;) at vm_insnhelper.c:1560
</span><span class='line'>#6  0x00007f032a0b7a44 in vm_exec_core (th=th@entry=0x7f030c0485d0, initial=initial@entry=0) at insns.def:1028
</span><span class='line'>#7  0x00007f032a0bb5ec in vm_exec (th=0x7f030c0485d0) at vm.c:1304
</span><span class='line'>#8  0x00007f032a0be89f in vm_invoke_proc (th=0x7f030c0485d0, proc=proc@entry=0x96c8680, self=133126360, defined_class=118126960, 
</span><span class='line'>    argc=argc@entry=2, argv=argv@entry=0x7f0320f7f070, blockptr=0x0) at vm.c:788
</span><span class='line'>#9  0x00007f032a0be8da in rb_vm_invoke_proc (th=&lt;optimized out&gt;, proc=proc@entry=0x96c8680, argc=argc@entry=2, 
</span><span class='line'>    argv=argv@entry=0x7f0320f7f070, blockptr=&lt;optimized out&gt;) at vm.c:807
</span><span class='line'>#10 0x00007f0329f6e550 in proc_call (argc=2, argv=0x7f0320f7f070, procval=133281320) at proc.c:734
</span><span class='line'>#11 0x00007f032a0b3024 in vm_call_cfunc_with_frame (ci=&lt;optimized out&gt;, reg_cfp=0x7f032107ef70, th=0x7f030c0485d0) at vm_insnhelper.c:1470
</span><span class='line'>#12 vm_call_cfunc (th=0x7f030c0485d0, reg_cfp=0x7f032107ef70, ci=&lt;optimized out&gt;) at vm_insnhelper.c:1560
</span><span class='line'>#13 0x00007f032a0b8385 in vm_exec_core (th=th@entry=0x7f030c0485d0, initial=initial@entry=0) at insns.def:999
</span><span class='line'>#14 0x00007f032a0bb5ec in vm_exec (th=0x7f030c0485d0) at vm.c:1304
</span><span class='line'>#15 0x00007f032a0be89f in vm_invoke_proc (th=th@entry=0x7f030c0485d0, proc=0x7f030c047b40, self=133281640, defined_class=117256680, argc=0, 
</span><span class='line'>    argv=0x7f02f4cd2290, blockptr=blockptr@entry=0x0) at vm.c:788
</span><span class='line'>#16 0x00007f032a0be8da in rb_vm_invoke_proc (th=th@entry=0x7f030c0485d0, proc=&lt;optimized out&gt;, argc=&lt;optimized out&gt;, argv=&lt;optimized out&gt;, 
</span><span class='line'>    blockptr=blockptr@entry=0x0) at vm.c:807
</span><span class='line'>#17 0x00007f032a0d475d in thread_start_func_2 (th=th@entry=0x7f030c0485d0, stack_start=&lt;optimized out&gt;) at thread.c:535
</span><span class='line'>#18 0x00007f032a0d4a9b in thread_start_func_1 (th_ptr=0x7f030c0485d0) at thread_pthread.c:803
</span><span class='line'>#19 0x00007f032990c182 in start_thread (arg=0x7f0320f7e700) at pthread_create.c:312
</span><span class='line'>#20 0x00007f0329c1d30d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111
</span><span class='line'>
</span><span class='line'>Thread 1 (Thread 0x7f032a5c2740 (LWP 8999)):
</span><span class='line'>#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185
</span><span class='line'>#1  0x00007f032a0d2390 in native_cond_wait (mutex=0x1ed96d0, cond=&lt;optimized out&gt;) at thread_pthread.c:334
</span><span class='line'>#2  native_sleep (th=th@entry=0x1ed95b0, timeout_tv=0x0) at thread_pthread.c:1059
</span><span class='line'>#3  0x00007f032a0d618a in sleep_forever (deadlockable=1, spurious_check=0, th=0x1ed95b0) at thread.c:996
</span><span class='line'>#4  thread_join_sleep (arg=arg@entry=140734195440096) at thread.c:787
</span><span class='line'>#5  0x00007f0329f67d97 in rb_ensure (b_proc=b_proc@entry=0x7f032a0d6090 &lt;thread_join_sleep&gt;, data1=data1@entry=140734195440096, 
</span><span class='line'>    e_proc=e_proc@entry=0x7f032a0cfa10 &lt;remove_from_join_list&gt;, data2=data2@entry=140734195440096) at eval.c:850
</span><span class='line'>#6  0x00007f032a0d0cd0 in thread_join (delay=&lt;optimized out&gt;, target_th=0x96c9f10) at thread.c:829
</span><span class='line'>#7  thread_join_m (argc=&lt;optimized out&gt;, argv=0x7f032a4c1168, self=&lt;optimized out&gt;) at thread.c:909
</span><span class='line'>#8  0x00007f032a0bfae1 in vm_call_cfunc_with_frame (ci=&lt;optimized out&gt;, reg_cfp=0x7f032a5c0ca0, th=0x1ed95b0) at vm_insnhelper.c:1470
</span><span class='line'>#9  vm_call_cfunc (ci=&lt;optimized out&gt;, reg_cfp=0x7f032a5c0ca0, th=0x1ed95b0) at vm_insnhelper.c:1560
</span><span class='line'>#10 vm_call_method (th=0x1ed95b0, cfp=0x7f032a5c0ca0, ci=&lt;optimized out&gt;) at vm_insnhelper.c:1754
</span><span class='line'>#11 0x00007f032a0b7a44 in vm_exec_core (th=th@entry=0x1ed95b0, initial=initial@entry=0) at insns.def:1028
</span><span class='line'>#12 0x00007f032a0bb5ec in vm_exec (th=th@entry=0x1ed95b0) at vm.c:1304
</span><span class='line'>#13 0x00007f032a0c2cff in invoke_block_from_c (defined_class=51649880, cref=0x0, blockptr=0x0, argv=0x7fff3bba1e08, argc=1, self=51647880, 
</span><span class='line'>    block=&lt;optimized out&gt;, th=0x1ed95b0) at vm.c:732
</span><span class='line'>#14 vm_yield (argv=&lt;optimized out&gt;, argc=&lt;optimized out&gt;, th=&lt;optimized out&gt;) at vm.c:763
</span><span class='line'>#15 rb_yield_0 (argv=0x7fff3bba1e08, argc=1) at vm_eval.c:938
</span><span class='line'>#16 rb_yield (val=val@entry=52428600) at vm_eval.c:948
</span><span class='line'>#17 0x00007f0329fcb079 in rb_obj_tap (obj=52428600) at object.c:675
</span><span class='line'>#18 0x00007f032a0bfae1 in vm_call_cfunc_with_frame (ci=&lt;optimized out&gt;, reg_cfp=0x7f032a5c0e30, th=0x1ed95b0) at vm_insnhelper.c:1470
</span><span class='line'>#19 vm_call_cfunc (ci=&lt;optimized out&gt;, reg_cfp=0x7f032a5c0e30, th=0x1ed95b0) at vm_insnhelper.c:1560
</span><span class='line'>#20 vm_call_method (th=0x1ed95b0, cfp=0x7f032a5c0e30, ci=&lt;optimized out&gt;) at vm_insnhelper.c:1754
</span><span class='line'>#21 0x00007f032a0b8385 in vm_exec_core (th=th@entry=0x1ed95b0, initial=initial@entry=0) at insns.def:999
</span><span class='line'>#22 0x00007f032a0bb5ec in vm_exec (th=0x1ed95b0) at vm.c:1304
</span><span class='line'>#23 0x00007f032a0c43c9 in rb_iseq_eval (iseqval=&lt;optimized out&gt;) at vm.c:1549
</span><span class='line'>#24 0x00007f0329f6a630 in rb_load_internal0 (th=0x1ed95b0, fname=52100160, wrap=wrap@entry=0) at load.c:615
</span><span class='line'>#25 0x00007f0329f6bdde in rb_load_internal (wrap=0, fname=&lt;optimized out&gt;) at load.c:644
</span><span class='line'>#26 rb_require_safe (fname=52099680, safe=0) at load.c:996
</span><span class='line'>#27 0x00007f032a0bfae1 in vm_call_cfunc_with_frame (ci=&lt;optimized out&gt;, reg_cfp=0x7f032a5c0f70, th=0x1ed95b0) at vm_insnhelper.c:1470
</span><span class='line'>#28 vm_call_cfunc (ci=&lt;optimized out&gt;, reg_cfp=0x7f032a5c0f70, th=0x1ed95b0) at vm_insnhelper.c:1560
</span><span class='line'>#29 vm_call_method (th=0x1ed95b0, cfp=0x7f032a5c0f70, ci=&lt;optimized out&gt;) at vm_insnhelper.c:1754
</span><span class='line'>#30 0x00007f032a0b7a44 in vm_exec_core (th=th@entry=0x1ed95b0, initial=initial@entry=0) at insns.def:1028
</span><span class='line'>#31 0x00007f032a0bb5ec in vm_exec (th=th@entry=0x1ed95b0) at vm.c:1304
</span><span class='line'>#32 0x00007f032a0c4636 in rb_iseq_eval_main (iseqval=iseqval@entry=52095080) at vm.c:1562
</span><span class='line'>#33 0x00007f0329f6510a in ruby_exec_internal (n=0x31ae868) at eval.c:253
</span><span class='line'>#34 0x00007f0329f670ad in ruby_exec_node (n=n@entry=0x31ae868) at eval.c:318
</span><span class='line'>#35 0x00007f0329f694dc in ruby_run_node (n=0x31ae868) at eval.c:310
</span><span class='line'>#36 0x000000000040088b in main (argc=3, argv=0x7fff3bba2b88) at main.c:36</span></code></pre></td></tr></table></div></figure>


<p>I then thought I might get a bit more info if I dumped the current Ruby backtrace:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>(gdb) call (void) close(1)
</span><span class='line'>(gdb) call (void) close(2)
</span><span class='line'>(gdb) shell tty
</span><span class='line'>/dev/pts/15 &lt;--- this will likely be different on your machine
</span><span class='line'>(gdb) call (int) open("/dev/pts/15", 2, 0)
</span><span class='line'>$1 = 1
</span><span class='line'>(gdb) call (int) open("/dev/pts/15", 2, 0)
</span><span class='line'>$2 = 2
</span><span class='line'>(gdb) call (void)rb_backtrace()</span></code></pre></td></tr></table></div></figure>


<p>This now shows me what&rsquo;s going on inside my Ruby process:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  gems/ruby-2.1.1/gems/puma-2.8.2/lib/puma/thread_pool.rb:92:in `block in spawn_thread'
</span><span class='line'>  gems/ruby-2.1.1/gems/puma-2.8.2/lib/puma/thread_pool.rb:92:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/puma-2.8.2/lib/puma/server.rb:254:in `block in run'
</span><span class='line'>  gems/ruby-2.1.1/gems/puma-2.8.2/lib/puma/server.rb:361:in `process_client'
</span><span class='line'>  gems/ruby-2.1.1/gems/puma-2.8.2/lib/puma/server.rb:490:in `handle_request'
</span><span class='line'>  gems/ruby-2.1.1/gems/rack-1.5.2/lib/rack/content_length.rb:14:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/railties-4.1.1/lib/rails/application.rb:144:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/railties-4.1.1/lib/rails/engine.rb:514:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/airbrake-4.0.0/lib/airbrake/user_informer.rb:12:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/airbrake-4.0.0/lib/airbrake/user_informer.rb:16:in `_call'
</span><span class='line'>  gems/ruby-2.1.1/gems/rack-1.5.2/lib/rack/sendfile.rb:112:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/action_dispatch/middleware/static.rb:64:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/rack-1.5.2/lib/rack/lock.rb:17:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/activesupport-4.1.1/lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/rack-1.5.2/lib/rack/runtime.rb:17:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/rack-1.5.2/lib/rack/methodoverride.rb:21:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/action_dispatch/middleware/request_id.rb:21:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/quiet_assets-1.0.2/lib/quiet_assets.rb:18:in `call_with_quiet_assets'
</span><span class='line'>  gems/ruby-2.1.1/gems/railties-4.1.1/lib/rails/rack/logger.rb:20:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/activesupport-4.1.1/lib/active_support/tagged_logging.rb:68:in `tagged'
</span><span class='line'>  gems/ruby-2.1.1/gems/activesupport-4.1.1/lib/active_support/tagged_logging.rb:26:in `tagged'
</span><span class='line'>  gems/ruby-2.1.1/gems/activesupport-4.1.1/lib/active_support/tagged_logging.rb:68:in `block in tagged'
</span><span class='line'>  gems/ruby-2.1.1/gems/railties-4.1.1/lib/rails/rack/logger.rb:20:in `block in call'
</span><span class='line'>  gems/ruby-2.1.1/gems/railties-4.1.1/lib/rails/rack/logger.rb:38:in `call_app'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/airbrake-4.0.0/lib/airbrake/rails/middleware.rb:13:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/action_dispatch/middleware/reloader.rb:73:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/activesupport-4.1.1/lib/active_support/callbacks.rb:82:in `run_callbacks'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/action_dispatch/middleware/cookies.rb:560:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/rack-1.5.2/lib/rack/session/abstract/id.rb:220:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/rack-1.5.2/lib/rack/session/abstract/id.rb:225:in `context'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/action_dispatch/middleware/flash.rb:254:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/action_dispatch/middleware/params_parser.rb:27:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/rack-1.5.2/lib/rack/head.rb:11:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/rack-1.5.2/lib/rack/conditionalget.rb:25:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/rack-1.5.2/lib/rack/etag.rb:23:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
</span><span class='line'>  gems/ruby-2.1.1/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/action_dispatch/routing/route_set.rb:676:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/action_dispatch/journey/router.rb:59:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/action_dispatch/journey/router.rb:59:in `each'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/action_dispatch/journey/router.rb:71:in `block in call'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/action_dispatch/routing/route_set.rb:48:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/action_dispatch/routing/route_set.rb:80:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/action_controller/metal.rb:231:in `block in action'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/action_controller/metal.rb:195:in `dispatch'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionview-4.1.1/lib/action_view/rendering.rb:30:in `process'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/abstract_controller/base.rb:136:in `process'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/action_controller/metal/instrumentation.rb:30:in `process_action'
</span><span class='line'>  gems/ruby-2.1.1/gems/activesupport-4.1.1/lib/active_support/notifications.rb:159:in `instrument'
</span><span class='line'>  gems/ruby-2.1.1/gems/activesupport-4.1.1/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
</span><span class='line'>  gems/ruby-2.1.1/gems/activesupport-4.1.1/lib/active_support/notifications.rb:159:in `block in instrument'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/action_controller/metal/rescue.rb:29:in `process_action'
</span><span class='line'>  gems/ruby-2.1.1/gems/actionpack-4.1.1/lib/abstract_controller/callbacks.rb:19:in `process_action'
</span><span class='line'>  gems/ruby-2.1.1/gems/activesupport-4.1.1/lib/active_support/callbacks.rb:86:in `run_callbacks'
</span><span class='line'>  gems/ruby-2.1.1/gems/activesupport-4.1.1/lib/active_support/callbacks.rb:86:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/activesupport-4.1.1/lib/active_support/callbacks.rb:166:in `block in halting'
</span><span class='line'>  gems/ruby-2.1.1/gems/activesupport-4.1.1/lib/active_support/callbacks.rb:166:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/activesupport-4.1.1/lib/active_support/callbacks.rb:160:in `block in halting'
</span><span class='line'>  gems/ruby-2.1.1/gems/activesupport-4.1.1/lib/active_support/callbacks.rb:160:in `call'
</span><span class='line'>  gems/ruby-2.1.1/gems/activesupport-4.1.1/lib/active_support/callbacks.rb:440:in `block in make_lambda'
</span><span class='line'>  gems/ruby-2.1.1/gems/activesupport-4.1.1/lib/active_support/callbacks.rb:440:in `instance_exec'
</span><span class='line'>  gems/ruby-2.1.1/gems/mongoid_userstamp-0.3.2/lib/mongoid/userstamp/railtie.rb:15:in `block (2 levels) in &lt;class:Railtie&gt;'
</span><span class='line'>  gems/ruby-2.1.1/gems/devise-3.2.4/lib/devise/controllers/helpers.rb:58:in `current_user'
</span><span class='line'>  gems/ruby-2.1.1/gems/warden-1.2.3/lib/warden/proxy.rb:104:in `authenticate'
</span><span class='line'>  gems/ruby-2.1.1/gems/warden-1.2.3/lib/warden/proxy.rb:318:in `_perform_authentication'
</span><span class='line'>  gems/ruby-2.1.1/gems/warden-1.2.3/lib/warden/proxy.rb:212:in `user'
</span><span class='line'>  gems/ruby-2.1.1/gems/warden-1.2.3/lib/warden/session_serializer.rb:34:in `fetch'
</span><span class='line'>  gems/ruby-2.1.1/gems/devise-3.2.4/lib/devise.rb:462:in `block (2 levels) in configure_warden!'
</span><span class='line'>  gems/ruby-2.1.1/gems/devise-3.2.4/lib/devise/models/authenticatable.rb:208:in `serialize_from_session'
</span><span class='line'>  gems/ruby-2.1.1/gems/orm_adapter-0.5.0/lib/orm_adapter/adapters/mongoid.rb:22:in `get'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/mongoid-49bc68fd3011/lib/mongoid/contextual.rb:20:in `first'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/mongoid-49bc68fd3011/lib/mongoid/contextual/mongo.rb:197:in `first'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/mongoid-49bc68fd3011/lib/mongoid/contextual/mongo.rb:447:in `try_cache'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/mongoid-49bc68fd3011/lib/mongoid/contextual/mongo.rb:198:in `block in first'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/mongoid-49bc68fd3011/lib/mongoid/contextual/mongo.rb:535:in `with_sorting'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/mongoid-49bc68fd3011/lib/mongoid/contextual/mongo.rb:199:in `block (2 levels) in first'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/mongoid-49bc68fd3011/lib/mongoid/query_cache.rb:186:in `first_with_cache'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/mongoid-49bc68fd3011/lib/mongoid/query_cache.rb:135:in `with_cache'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/mongoid-49bc68fd3011/lib/mongoid/query_cache.rb:187:in `block in first_with_cache'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/query.rb:127:in `first'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/read_preference/primary.rb:54:in `with_node'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/read_preference/selectable.rb:65:in `with_retry'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/read_preference/selectable.rb:65:in `call'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/read_preference/primary.rb:55:in `block in with_node'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/cluster.rb:240:in `with_primary'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/cluster.rb:151:in `nodes'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/cluster.rb:194:in `refresh'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/cluster.rb:194:in `each'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/cluster.rb:182:in `block in refresh'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/node.rb:432:in `refresh'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/node.rb:90:in `command'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/node.rb:648:in `read'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/operation/read.rb:48:in `execute'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/node.rb:391:in `process'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/node.rb:587:in `flush'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/node.rb:616:in `logging'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/instrumentable.rb:31:in `instrument'
</span><span class='line'>  gems/ruby-2.1.1/gems/activesupport-4.1.1/lib/active_support/notifications.rb:159:in `instrument'
</span><span class='line'>  gems/ruby-2.1.1/gems/activesupport-4.1.1/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
</span><span class='line'>  gems/ruby-2.1.1/gems/activesupport-4.1.1/lib/active_support/notifications.rb:159:in `block in instrument'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/node.rb:617:in `block in logging'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/node.rb:589:in `block in flush'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/node.rb:187:in `ensure_connected'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/node.rb:184:in `rescue in ensure_connected'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/failover/retry.rb:29:in `execute'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/node.rb:114:in `connection'
</span><span class='line'>  gems/ruby-2.1.1/gems/connection_pool-2.0.0/lib/connection_pool.rb:58:in `with'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/node.rb:115:in `block in connection'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/failover/retry.rb:30:in `block in execute'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/node.rb:590:in `block (2 levels) in flush'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/connection.rb:172:in `write'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/connection.rb:220:in `with_connection'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/connection.rb:52:in `connect'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/connection/socket/connectable.rb:144:in `connect'
</span><span class='line'>  rubies/ruby-2.1.1/lib/ruby/2.1.0/timeout.rb:106:in `timeout'
</span><span class='line'>  rubies/ruby-2.1.1/lib/ruby/2.1.0/timeout.rb:35:in `catch'
</span><span class='line'>  rubies/ruby-2.1.1/lib/ruby/2.1.0/timeout.rb:35:in `catch'
</span><span class='line'>  rubies/ruby-2.1.1/lib/ruby/2.1.0/timeout.rb:35:in `block in catch'
</span><span class='line'>  rubies/ruby-2.1.1/lib/ruby/2.1.0/timeout.rb:91:in `block in timeout'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/connection/socket/connectable.rb:145:in `block in connect'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/connection/socket/connectable.rb:145:in `new'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/connection/socket/tcp.rb:20:in `initialize'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/connection/socket/connectable.rb:119:in `handle_socket_errors'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/connection/socket/tcp.rb:20:in `block in initialize'
</span><span class='line'>  gems/ruby-2.1.1/bundler/gems/moped-074ba070aa98/lib/moped/connection/socket/tcp.rb:20:in `initialize'</span></code></pre></td></tr></table></div></figure>


<p>Looks like the whole think started with a <a href="https://github.com/mongoid/moped">moped</a> socket connection (which makes sense).</p>

<p>Investigating further &hellip;</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Accessing a running process' STDOUT]]></title>
    <link href="http://www.alexbevi.com/blog/2014/06/02/accessing-stdout-of-a-running-process/"/>
    <updated>2014-06-02T09:16:54-04:00</updated>
    <id>http://www.alexbevi.com/blog/2014/06/02/accessing-stdout-of-a-running-process</id>
    <content type="html"><![CDATA[<p>I&rsquo;m currently doing a lot of scripting at work. Although the primary environment is Windows, I have to manage some Linux processes as well.</p>

<p>One example is a series of PowerShell scripts I&rsquo;ve written which abstract away various ETL tasks tha we need in order to get legacy data extracted, updated and inserted into other databases.</p>

<p><img src="http://www.alexbevi.com/images/20140602-001.jpg"></p>

<!-- more -->


<p>One of the longer running processes I have is a Ruby Rake task that processes an uploaded CSV file. This can potentially take a long time, and although I could modify the script to feed progress data back, I&rsquo;d like to demonstrate how to followup from another terminal session.</p>

<p>Any Rake task I write that can potentially take a while, I tend to jazz up a bit with progress details. For this current example, I am using the <a href="https://github.com/paul/progress_bar">progress_bar</a> gem, which writes an ASCII progress bar to the terminal along with some other useful progress information.</p>

<p>If I were to execute the task directly, I could watch the progress directly. Since we&rsquo;re running this script remotely though, this information isn&rsquo;t directly accessible.</p>

<p>In order to gain access to the progress info for this taks, we&rsquo;ll need to access the process&#8217; STDOUT from an alternate session.</p>

<p>The first step is to find the PID of the process we would like:</p>

<pre><code>ps aux | grep ruby

&gt;&gt; 1001     16544 67.7 29.4 1319420 506456 ?      Rl   13:00   3:02 ruby rake phoenix:sync_locations_from_csv
</code></pre>

<p>Now that we have the PID, we can pass this to <a href="http://en.wikipedia.org/wiki/Strace">strace</a> in order to gain a bit more insight into the current process.</p>

<pre><code>sudo strace -p 16544 -s 80 -e write 2&gt;&amp;1 | grep "write(2, \"\["
</code></pre>

<p><img src="http://www.alexbevi.com/images/20140602-002.jpg"></p>

<p>We&rsquo;re redirecting the output of <em>strace</em> in order to further filter the results using <a href="http://en.wikipedia.org/wiki/Grep">grep</a>. Depending on what process you&rsquo;re looking to monitor you may need to adjust your grep conditions.</p>

<p>You can also exclude the redirect and grep entirely, but this may result in too much information to be useful ;)</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Redmine Plugin Extension and Development: Published!!!]]></title>
    <link href="http://www.alexbevi.com/blog/2014/03/19/redmine-plugin-extension-and-development-published/"/>
    <updated>2014-03-19T06:08:02-04:00</updated>
    <id>http://www.alexbevi.com/blog/2014/03/19/redmine-plugin-extension-and-development-published</id>
    <content type="html"><![CDATA[<p><img class="left" src="http://www.alexbevi.com/images/balloons.png"></p>

<p>Well, it&rsquo;s official. The journey I began over six months ago has finally come to an end, and <a href="http://www.packtpub.com/redmine-plugin-extension-and-development/book">Redmine Plugin Extension and Development</a> has officially been published :)</p>

<p>I plan on doing a &ldquo;post-mortem&rdquo; on the process at some point, but for now I&rsquo;m planning on taking a little time off from writing.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Production Timeline]]></title>
    <link href="http://www.alexbevi.com/blog/2014/03/03/8748os-production-timeline/"/>
    <updated>2014-03-03T08:22:30-05:00</updated>
    <id>http://www.alexbevi.com/blog/2014/03/03/8748os-production-timeline</id>
    <content type="html"><![CDATA[<p>Well, it&rsquo;s been a long (longer than anticipated) journey, but <a href="http://www.packtpub.com/redmine-plugin-extension-and-development/book">Redmine Plugin Extension and Development</a> (code number 8748OS) is in the final stages of production.</p>

<p>Since I wanted to share a bit more detail about what went into the production of this book, I&rsquo;m attaching a (slightly edited) copy of the production timeline I received from my Technial Editor.</p>

<!-- more -->


<h2>Technical Editing / Copy Editing</h2>

<p>We would be editing chapters for language and content-related clarity. There might be instances when we&rsquo;ll require your assistance while we make any content-related changes. Even if there are no queries, we would be sending our first edited chapter (Per TE) to you to ensure that you are happy with the quality of editing. When chapter are sent across to you, the expected turnaround time will be 24 hours per chapter.</p>

<ul>
<li>Start of Editing: <em>21st February 2014</em></li>
<li>End of Editing: <em>6th March 2014</em></li>
</ul>


<p>After the chapters  are edited, they are indexed  and then laid out. The laid out chapters are then sent across to the Proof Reader, who are experts in English language. The Proof read chapters are then finalized and made into what we term as &ldquo;Pre-Finals&rdquo;. This is the stage where-in you will get to see the final chapters as you would see them in the book.</p>

<h2>Schedule for Pre-finals</h2>

<p>2 to 4 Pre-Finals will be sent across to you in a batch. The expected turnaround time will be 24 hours for a batch of two chapters.</p>

<p>At this stage, you&rsquo;ll be expected to just go through the chapters and provide feedback, if any. Any major content changes should be avoided. We plan to start sending these within 7-10 days from today and would continue to do so, until the day the book is clubbed and finalized.</p>

<h2>Upload Date</h2>

<p>This is the day when the clubbed book will be finalized and then sent to our printers. We call it the upload day, since the files are transferred to our printers and we cannot make any changes here after.</p>

<ul>
<li>Current Upload Date: <em>17th March 2014</em></li>
</ul>


<h2>Publishing Date</h2>

<p>The book gets published and will be available for purchase in five to eight working days from the day of upload.</p>

<p>So all going well, it looks like the book will officially be available by the end of March 2014. For those who were anticipating the original January 2014 release date, I sincerly apologize for the delay. I felt the delay resulted in a more cohesive final product, and hope that it meets (and even exceeds) your expectations!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Final Rewrites Over 50% Done]]></title>
    <link href="http://www.alexbevi.com/blog/2014/02/18/final-rewrites-over-50-percent-done/"/>
    <updated>2014-02-18T22:08:21-05:00</updated>
    <id>http://www.alexbevi.com/blog/2014/02/18/final-rewrites-over-50-percent-done</id>
    <content type="html"><![CDATA[<p>This is just a quick post to update everyone that chapters 1, 2 and 3 of <a href="http://www.packtpub.com/redmine-plugin-extension-and-development/book">Redmine Plugin Extension and Development</a> have been submitted to Packt with final revisions. Chapter 8 as well as the Appendix were accepted after the initial round of rewrites, so that means <em>4 MORE CHAPTERS TO GO!!!</em></p>

<p>Clearly I didn&rsquo;t meet the target I hinted at in my last post, but it was <a href="http://www.statutoryholidays.com/family-day.php">Family Day</a> here so I took the family away for the long weekend to go skating on the <a href="http://www.ncc-ccn.gc.ca/places-to-visit/rideau-canal-skateway">Rideau Canal</a> in Ottawa :)</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[First Round of Rewrites Completed!]]></title>
    <link href="http://www.alexbevi.com/blog/2014/02/09/first-round-of-rewrites-completed/"/>
    <updated>2014-02-09T21:48:29-05:00</updated>
    <id>http://www.alexbevi.com/blog/2014/02/09/first-round-of-rewrites-completed</id>
    <content type="html"><![CDATA[<p>This is just a quick update that I&rsquo;ve finally finished the first round of rewrites for the upcoming <a href="http://www.packtpub.com/redmine-plugin-extension-and-development/book">Redmine Plugin Extension and Development</a> book.</p>

<p>The issue I was struggling with was little more than a complete lack of motivation. Since I work full time and do contract development on the side (plus have a wife and kids), yet another distraction can be difficult to find time for; especially if it&rsquo;s not a primary source of income.</p>

<p><a href="http://www.packtpub.com">Packt Publishing</a> has been very patient with me though so I&rsquo;m going to try to find the time in the coming week to get through the second round of revisions and rewrites and hopefully get this puppy to market ;)</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[My First Book: Almost Ready for Production]]></title>
    <link href="http://www.alexbevi.com/blog/2014/01/27/my-first-book-is-almost-ready-for-production/"/>
    <updated>2014-01-27T15:37:10-05:00</updated>
    <id>http://www.alexbevi.com/blog/2014/01/27/my-first-book-is-almost-ready-for-production</id>
    <content type="html"><![CDATA[<p>For the last 4 months I&rsquo;ve been working with <a href="http://www.packtpub.com">Packt Publishing</a> on a book about <a href="http://www.redmine.org">Redmine</a> plugin extension and development.</p>

<p><img class="left" src="http://www.alexbevi.com/images/8748OS_mockupcover_normal_0.jpg"></p>

<p>Although it likely won&rsquo;t be ready until February 2014, the book is now available for <a href="http://www.packtpub.com/redmine-plugin-extension-and-development/book">pre-order on Packt&rsquo;s site</a>.</p>

<p>Since the book is <em>almost</em> through the first stage of rewrites, I though it might be a good idea to start documenting the process.</p>

<p>What I&rsquo;m going to write about initially are my first impressions on writing a book, as well as a few notes (which may sound like complaints) about what I did &ldquo;wrong&rdquo; and could improve upon in the future.</p>

<!-- more -->


<p>Originally, I wasn&rsquo;t sure that I would be a good choice as an author as I didn&rsquo;t have the community recognition that some other plugin developers had, and I hadn&rsquo;t been &ldquo;on the scene&rdquo; for more than a few years.</p>

<p>After much consideration, I decided to dive in and start writing.</p>

<p>The first step was to provide the publisher with a rough outline that also included the page count. Initially, I just threw together a handful of topics that I wanted to cover, then (very generically) estimated how many pages I would need to completely cover those topics.</p>

<p>Once approved, and I actually <em>started</em> writing, I very quickly realized that meeting my page estimates was almost impossible; some chapters would be way too short, and others WAY too long.</p>

<p>I also had to provide a rough outline as to how long I thoght it would take me to write each chapter. This step, in retrospect, I wish I had taken more time to properly prepare.</p>

<p>Writing a technically-oriented book involves a lot more research than you may think (no matter how well you think you know the source material). As such, the further I got into the book, the more time I found myself researching, writing code, testing code, then writing about the code I&rsquo;d built.</p>

<p>This process took a good 3x longer than I anticipated, and as such, my deadlines tended to slip by. As a result, the tentative release date for the final book of January 2014 is not very likely.</p>

<p>I&rsquo;m hoping that this blog post will also serve as a motivator to get my ass in gear and finish the final revisions.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Developer Braindump: Warcraft]]></title>
    <link href="http://www.alexbevi.com/blog/2013/03/26/developer-braindump-warcraft/"/>
    <updated>2013-03-26T12:50:00-04:00</updated>
    <id>http://www.alexbevi.com/blog/2013/03/26/developer-braindump-warcraft</id>
    <content type="html"><![CDATA[<p>In an effort to centralize some articles about how some classic games were devloped, I&rsquo;ve collected the <a href="http://www.codeofhonor.com/blog/?s=%22The+making+of+Warcraft%22">various parts</a> of <a href="http://www.codeofhonor.com/blog/">Patrick Wyatt&rsquo;s blog</a> series about the intital development of <a href="http://en.wikipedia.org/wiki/Warcraft">Warcraft</a>.</p>

<p>Please note that this version of the series is just meant to capture the content, and not all formatting changes have been captured.</p>

<p>Please see the original posts for the full experience ;)</p>

<!-- more -->




<hr>


<p>Back before the dawn of time, which is to say when PC games were written for the DOS operating system, I got to work on a game called Warcraft.</p>

<h2>I get to lead a project!</h2>

<p>While I had developed several PC games, a couple of Mac games, and seven console titles for the Super Nintendo and Sega Genesis, I was either in a junior role on those projects, or the projects were game “ports” rather than original development work. A game “port” is the process of moving a game from one platform, like the Amiga, and converting the code, design, artwork and other game assets to make them work on another, like the Nintendo.</p>

<p>My role encompassed two jobs: leading the development team as Producer — a game industry term for project manager, designer, evangelist, and cat herder — and writing the majority of the game code as Lead Programmer. This was perhaps less daunting then, when a game project might employ ten or twenty developers, than it is now, with development teams tipping the scales at two-hundred or more developers.</p>

<h2>The source of Warcraft</h2>

<p>The developers at the startup company I worked for — then named Silicon &amp; Synapse but later renamed Blizzard in a nod towards our tempestuous development methodology — played a great many games during our free time. And from that game-playing came the spark to create Warcraft.</p>

<p>We were inspired to create Warcraft after playing (and replaying and replaying) a game called Dune 2, by Westwood Studios. Dune 2 was arguably the first modern real-time strategy (RTS) game; with a scrolling world map, real-time unit construction and movement, and individual unit combat. It isn’t that much different in design than a modern RTS like Starcraft 2, excepting perhaps a certain scale and graphics quality.</p>

<p>Its predecessor, Dune 1 — a very worthy game itself — shared some of the same elements, but its semi-real-time unit combat was wrapped inside an adventure game. Dune 2 stripped its predecessors’ idea of the player representing a character inside the game-world and focused exclusively on the modern RTS mechanics: harvesting resources, building a base, harvesting more resources, building an army, and finally, finding and conquering the enemy.</p>

<p>Along with the other folks at Blizzard I exhaustively played Dune 2 during lunch breaks and after work, playing each of the three competing races to determine their strengths and weaknesses; and afterward comparing play-styles, strategies and tactics with others in the office.</p>

<p>While the game was great fun, it suffered from several obvious defects that called out (nay, screamed) to be fixed. Most notably, the only way that my friends and I could play the game was against the computer. It was obvious that this gaming style would be ideal as a multiplayer game. Unlike turn-based games, where each player must wait for all opponents to issue unit movement orders, a real-time game would enable all players to give orders simultaneously, placing a premium on rapid, decisive tactical movements over long, drawn-out strategic planning.</p>

<p>And with that singular goal in mind, development of the game began without any serious effort to plan the game design, evaluate the technical requirements, build the schedule, or budget for the required staff. Not even on a napkin. Back at Blizzard we called this the “business plan du jour”, which was or standard operating methodology.</p>

<h2>Initial development</h2>

<p>As the sole developer on the project, and lacking an art team during the initial phase, I screen-captured the artwork of Dune 2 to use until such time as my forward progress warranted an artist or two. The artists were tied up working on any number of other pressing deadlines and didn’t need distractions at this point — we were always pressed for time.</p>

<p>My early programming efforts developing the game engine included creating a tile-based scrolling map renderer, a sprite renderer to draw game units and other bitmaps, a sprite-sequencing engine to animate game units, an event-dispatcher to post mouse and keyboard events, a game-dispatcher to control unit-behavior, and a great deal of user-interface code to control application behavior. With this subset of the project completed in the first few weeks it became possible to “play” a solo game, though I didn’t implement unit-construction until sometime later; early play required using typed commands to spawn units on screen.</p>

<p>Each day I’d build upon the previous efforts in organic fashion. Without schedule milestones or an external driver for the project, I was in the enviable position of choosing which features to build next, which made me incredibly motivated. I already enjoyed game development, and getting to do this green-field programming was like a drug. Even now, some 22 years after getting into the game industry, I still love the creative aspects of programming.</p>

<h2>The first unique feature: multi-unit selection</h2>

<p>One feature of which I was particularly proud was unit-selection. Unlike Dune 2, which only allowed the user to select a single unit at a time, and which necessitated frenzied mouse-clicking to initiate joint-unit tactical combat, it was obvious that enabling players to select more than one unit would speed task-force deployment and dramatically improve game combat.</p>

<p>Before I started in the game industry I had worked extensively with several low-end “Computer Assisted Design” (CAD) programs like MacDraw and MacDraft to design wine-cellars for my dad’s wine cellar business, so it seemed natural to use the “click &amp; drag” rectangle-selection metaphor to round up a group of units to command.</p>

<p>I believe that Warcraft was the first game to use this user-interface metaphor. When I first implemented the feature it was possible to select and control large numbers of units at a time; there was no upper limit on the number of units that could be selected.</p>

<p>While selecting and controlling one hundred units at a time demonstrated terrible weaknesses in the simple path-finding algorithm I had implemented, after I got the basic algorithms working I nevertheless spent hours selecting units and dispatching game units to destinations around the map instead of writing more code; it was the coolest feature I had ever created in my programming career up to that time!</p>

<p>Later in the development process, and after many design arguments between team-members, we decided to allow players to select only four units at a time based on the idea that users would be required to pay attention to their tactical deployments rather than simply gathering a mob and sending them into the fray all at once. We later increased this number to nine in Warcraft II. Command and Conquer, the spiritual successor to Dune 2, didn’t have any upper bound on the number of units that could be selected. It’s worth another article to talk about the design ramifications, for sure.</p>

<p>Apart from the ability to control multiple units at one time, at this phase Warcraft resembled nothing so much as a stripped-down version of Dune 2, so much so that I defensively joked that, while Warcraft was certainly inspired by Dune 2, the game was radically different — our radar minimap was in the upper-left corner of the screen, whereas theirs was in the lower-right corner.</p>

<h2>The formation of the fellowship</h2>

<p>By early 1994, I had made enough progress to warrant additional help on the project. I was joined by Ron Millar, Sam Didier, Stu Rose, Bob Fitch, Jesse McReynolds, Mike Morhaime, Mickey Nielsen, and others. Many of these folks started work on the game after our company was acquired by Davidson &amp; Associates in February 1994.</p>

<p>Ron Millar, who, with his long blond hair and strong build, was obviously the progeny of Viking warriors. He was originally hired on as an artist based on his skill in creating artwork for Gameboy titles at Virgin Games, but his amazing creativity and design sensibilities led to his taking on a design role in many Blizzard projects, and he stepped into a similar role for Warcraft.</p>

<p>Sam Didier, a strong, stocky and stalwart character who resembled nothing so much as a bear scaled down to human proportions, and whose heroic characters and epic drawings are now the definitive art style for Blizzard games, had honed his computer drawing skills on sixteen-bit console titles, but his penchant for drawing fantasy artwork during meetings and at any other spare moment demonstrated his capability to lead the art direction for this new title.</p>

<p>Stu Rose — whose background as an illustrator led to his design of the Blizzard logo still used today — initially contributed to the background tile-map artwork, but he would later take on a critical role in the ultimate design of Warcraft. Stu is quite memorable as a voice actor in the role of Human Peon Peasant, where his rendition of a downtrodden brute-laborer was comedic genius.</p>

<p>Bob Fitch had started work as a programmer and project lead on another title at the same time I started development of Warcraft. Allen Adham, the president of Blizzard, had assigned Bob the task of building a word game called “Games People Play” that would include crossword, scramble, boggle, and other similar diversions. Bob’s notable lack of enthusiasm for the project resulted in his making little progress on the title for many months; with Warcraft showing well Bob was released to assist me, and his enthusiasm for the game helped move the project forward more rapidly.</p>

<p>Jesse, a Caltech graduate, started work on building a network driver for the IPX network protocol so the game could be played on a Local Area Network (LAN). Mike Morhaime, one of the two co-founders of Blizzard, later took on the significantly more difficult task of writing a “mixed-mode” modem driver. While Warcraft was a DOS “Protected Mode” game, the modem driver could be called from both Protected Mode and Real Mode due to quirks in the DOS operating system and the 80386 chip-architecture it ran on, so he could regularly be found in his office staring at screens full of diagnostic numbers as he worked through the complicated timing issues related to re-entrant code. At the end of the day, the modem code was rock-solid, quite an achievement given the primitive toolset we had at the time.</p>

<h2>Warcraft art</h2>

<p>Allen Adham hoped to obtain a license to the Warhammer universe to try to increase sales by brand recognition. Warhammer was a huge inspiration for the art-style of Warcraft, but a combination of factors, including a lack of traction on business terms and a fervent desire on the part of virtually everyone else on the development team (myself included) to control our own universe nixed any potential for a deal. We had already had terrible experiences working with DC Comics on “Death and Return of Superman” and “Justice League Task Force”, and wanted no similar issues for our new game.</p>

<p>It’s surprising now to think what might have happened had Blizzard not controlled the intellectual property rights for the Warcraft universe — it’s highly unlikely Blizzard would be such a dominant player in the game industry today.</p>

<p>Years after the launch of Warcraft my dad, upon returning from a trip to Asia, gave me a present of a set of Warhammer miniatures in the form of a skeleton charioteer and horses with the comment: “I found these cool toys on my trip and they reminded me a lot of your game; you might want to have your legal department contact them because I think they’re ripping you off.” Hmmm!</p>

<h2>Blockers to game development</h2>

<p>One interesting facet of the early development process was that, while I was building a game that would be playable using modems or a local area network, the company had no office LAN. Because we developed console titles, which would easily fit on a floppy disk, it wasn’t something that was necessary, though it would certainly have simplified making backups.</p>

<p>So when I started collaborating with other artists and programmers, we used the “sneaker network”, carrying floppy disks back and forth between offices to integrate source code revisions and artwork.</p>

<p>Bob Fitch was the second programmer on the project, and he and I would regularly copy files and code-changes back and forth. Periodically we’d make integration mistakes and a bug we fixed would re-appear. We’d track it down and discover that — during file-copying while integrating changes — we had accidentally overwritten the bug fix, and we’d have to remember how we had fixed it previously.</p>

<p>This happened more than a few times because of the rapidity with which we developed code and our lack of any processes to handle code-integration other than “remembering” which files we had worked on. I was somewhat luckier in this regard in that my computer was the “master” system upon which we performed all the integrations, so my changes were less likely to get lost. These days we use source-control to avoid such stupidities, but back then we didn’t even know what it was!</p>

<p>With more programmers, designers and artists working on the title progress increased substantially, but we also discovered a big blocker to our progress. The game was initially developed in DOS “Real Mode”, which meant that only 640K of memory was available, less about 120K for the operating system. Can you believe how crap computers were back then!?!</p>

<p>As the art team started creating game units, backgrounds and user-interface artwork, we rapidly burned through all of the memory and started looking for alternatives. A first attempt at a solution was to use EMS “paged memory” mapping and store art resources “above” the 640K memory barrier.</p>

<p>Stories programmers tell about EMS memory are like those that old folks tell about walking uphill to school, barefoot, in the snow, both ways, except that EMS stories are even more horrible, and actually true.</p>

<p>In any event the EMS solution quite fortunately didn’t work; it turned out there was a better solution. A company called Watcom released a C compiler which included a DOS-mode “extender” that allowed programs to be written in “Protected Mode” with access to linear 32-bit memory, something every programmer takes for granted today when they write 32-bit (or even 64-bit applications). While it required a couple of days to update the source code, the DOS-mode extender worked perfectly, and we were back in business, now with access to substantially more memory.</p>

<h2>Initial proposal</h2>

<p>Blizzard was working on at least four other games when I started on the Warcraft project, and as the company numbered only 20 everyone was mega-busy keeping those projects on track. It wasn’t uncommon for artists, programmers and designers to be working on two or sometimes three projects at a time, and of course our sole musician/sound-engineer, Glenn Stafford, worked on everything.</p>

<p>But we regularly found time to meet in large groups to brainstorm and discuss company strategy, so much that we called our efforts the “business plan du jour“.</p>

<p>I already discussed our motivation to create a Real Time Strategy (RTS) game modeled after Dune II in a previous article, but one other key idea propelled us forward.</p>

<p>The other impetus for the game started with a proposal that Allen Adham — president and company co-founder — made during one of our brainstorming sessions. He wanted to build a series of war games that would be released in near identical white boxes under the banner “Warcraft”, with subheadings announcing the historical context for each game: The Roman Empire, The Vietnam War, and so forth.</p>

<p>The goal with the identical boxes was to control a large section of shelf-space that would be easy for players to spot in a crowded retail environment, similar to the Gold Box series of Dungeons &amp; Dragons games from SSI, which enjoyed great success during the late 1980′s. New players would be drawn to the section of games by its dominating shelf-presence, and veteran players who enjoyed one game they would know where to find the next. I know; retail: so archaic compared to app stores and Amazon, right?!?</p>

<p>Ron Millar and Sam Didier, two of the early artists to work at the company, weren’t excited about the idea of working on historical simulations, they enjoyed fantasy games like Warhammer and Dungeons &amp; Dragons. One glance at Sam’s artwork is enough to demonstrate his passion for the fantasy milieu. So at a later meeting they proposed the idea that the first game should be set in a high-fantasy world of Orcs and humans, where they’d have more opportunity to create innovative game artwork instead of being required to conform to the tenets of historical accuracy. The idea took hold, with the first game in the series becoming Warcraft: Orcs and Humans.</p>

<h2>Initial game design</h2>

<p>Many people believe that a game designer is solely responsible for all idea conception and actually “creates the game design”, and this may be true for some development teams. Designers do need to be highly creative and bring to life many of the elements of the game personally.</p>

<p>But equally important is for designers to be receptive to the ideas of others: without some involvement in the game’s design the rest of the team has less motivation to do their best work. And beyond that, it’s never possible to know where the next great design idea is going to come from. It’s critical for designers to listen so that the best ideas of others aren’t stifled.</p>

<p>Our informal design process during the early period of Warcraft’s development worked effectively in that regard. Many brainstorming sessions occurred during hallway meetings, lunches, smoke-breaks, and after late evenings of game playing. Everyone in the company contributed their thoughts. With little formal process and no single design document, the game design evolved with each passing month.</p>

<p>Ron, who had started his career in the game industry as an artist, was at that time our go-to guy for design on Blizzard games. Though he was finishing up the development of Blackthorne, a side-scrolling shooter for Super Nintendo, he devoted time to generating ideas for the game.</p>

<p>Stu Rose was another artist who became one of Blizzard’s early staffers. From a personality standpoint he was the polar opposite of Ron in most respects, and his efforts as part of the design group occasioned conflicts of opinion with Ron, though during the times they did agree they were an unassailable force.</p>

<p>These two ended up as the book-ends for the entire design process, each working independently to develop the world’s culture and plot overview, define the game’s units, specify the play mechanics, envision how magic spells worked, develop the game’s missions, choose place-names, and finalize other minutiae that are nevertheless important to make games comes to life.</p>

<p>At this late date it’s not possible to document who developed exactly which idea without canvassing the entire team and sorting out arguments over events that happened so long ago. Even back then we had difficulties determining how game-design credit should be shared, and ultimately decided the fairest, most egalitarian solution was to credit everyone, and thus the Warcraft: Orcs vs. Humans box credits include “Game design by Blizzard Entertainment”. Incidentally the Moby Games credits for Warcraft 1 are completely borked because they mix the much later Macintosh and 1998 releases of the game with the original 1994 DOS release, so many folks are mis-credited.</p>

<p>While my recollection of the exact timing of events is dim, I’ve recently seen an early design document dated 1994 and labeled “Chaos Studios”, which means it was generated in early 1994 before the company had been renamed Blizzard. By February 1994 we had a set of (still very rough) design documents that had been through several iterations and contained the key concepts for the game.</p>

<p>Admittedly, it would probably have been better to have a design in place before I started programming in September 1993, but with the amount of “substrate” that I needed to build before the actual fun-n-game parts could be developed, the lack of a design wasn’t a show-stopper at that stage, particularly since we already pulled many of the game’s elements from Dune 2.</p>

<h2>What got chopped</h2>

<p>While it’s still (barely) possible to play Warcraft 1 today, it’s not much fun compared to later RTS games. The difficulty of getting the game running on modern computers leads one to high expectations that are then crushed when viewing a game with a screen resolution of only 320×200 pixels — one twentieth of the resolution of a modern high res monitor — and with user interface and play balance that are markedly inferior to our later efforts.</p>

<p>But by playing Warcraft 1 it is possible to see the ideas that survived through the design winnowing process into the game’s final release. In many ways Warcraft 1 isn’t so much different from later games in the series.</p>

<p>Today gamers are familiar with classic Warcraft units like Barracks, Town Halls, Lumber Mills and Gold Mines, all of which survived into future releases of Warcraft games. Those iconic units persist because their names and functions are easily comprehensible to those of us who live in the real world instead of Azeroth.</p>

<p>But many of the ideas that our early design documents contained didn’t come to fruition. Some of this was related to the brutal timeline — the game had to launch for Christmas, 1994 and we barely made it. Ideas died because better alternatives existed, or didn’t have strong advocates, or were too time-consuming to implement, or would have required too much memory, or weren’t fun.</p>

<p>I thought folks might like to know about ideas that ended up on the cutting room floor, like the Mason’s Hall [required for stone buildings], Dwarven Inn [greater production of stone], Elven Fletcher [upgrades for archers], Tax House and Ale House.</p>

<p>These buildings all served secondary functions, some of which could be combined elsewhere. We instead added their functionality to existing buildings instead of creating buildings solely dedicated to one function, as for example the Dwarven Inn and Elven Fletcher buildings.</p>

<p>The Mason’s Hall was dropped because we considered using stone as a third resource (in addition to gold and lumber) an unnecessary complexity. We revisited the idea again for Warcraft 2, and dropped it again after actually implementing (programming) the idea.</p>

<p>The Ale Stand was designed to increase the rate at which soldiers and gold would be produced. I’m not sure how we can rectify that design idea with the amount of work that actually gets done after a night of heavy drinking in our world, but I imagine there are special rules of magic at work in Azeroth. Or maybe that’s why we cut the Ale Stand.</p>

<p>And NPC races like lizard men, hobgoblins and Halflings were also on the drawing board but were ultimately rejected, almost certainly due to the effort of drawing and animating the figures in DPaint.</p>

<p>Game development is about trade-offs — great games don’t have to do everything, they have to do a limited number of things well.</p>

<h2>Formations</h2>

<p>A design idea much discussed but never implemented was “formations”, where units would stick together on the battlefield. Formations are difficult to implement so the feature was chopped from the spec.</p>

<p>Some of the complexities that prevented implementation: units in formation all move at the same speed so slow units don’t get left behind — this created programming complexity. Formations need the ability to rotate — or “wheel” in military parlance — so that a formation heading north comprised of infantry carrying pikes with archers following behind can turn as a group to face an enemy detachment approaching from the east, with the archers still lined up behind the protective wall of infantry — this created user interface complexity. Given enough time we could have completed the feature, but we needed the development time for more basic features.</p>

<p>As a stand-in, I did implement “numbered group selection”. A user would select a group of units and press the Ctrl (control) key plus a number key (1-4). Those unit-groupings would be remembered so it would be possible to later re-select those units by pressing the number key (1-4) by itself. But those units would move independently even though selected as a group.</p>

<p>A player-character on the battlefield
Another idea much discussed but never implemented was that of having a unit that represented the player on the game map: an avatar that would progress from mission to mission during the game.</p>

<p>For a game-avatar to represent the player, it should morph from a weak unit into a mighty hero over the course of several missions to create a sense of progression. To do this properly would require that the character would only become more powerful if utilized. An underutilized avatar would remain weak, while an avatar constantly at work on the front lines would become stronger.</p>

<p>Carrying a unit over from one mission to the next adds to the difficulty of play-balancing missions. A great player will graduate a strong avatar from each mission, and that avatar’s strength will make succeeding missions seem easy, while a less-skilled player’s avatar could be so weak as to make winning later missions impossible. These two problems would lead players to drop out of the game — in the first instance for lack of challenge, and in the second due to frustration, as few players want to go backwards and redo previous missions in order to survive a mission later in the game.</p>

<p>A competitor’s product named War Wind released several years after Warcraft allowed units to be carried over from mission to mission; the game’s designers allowed up to four units to be transferred, but finessed the play-balance problem by ensuring that these units weren’t powerful enough to affect gameplay, somewhat the antithesis of what a heroic player-avatar is supposed to represent.</p>

<h2>Heroes — in Warcraft 1?!?</h2>

<p>We also considered including hero-units in Warcraft 1; they had names like the Illusion Thief, Barbarian, Huntress, and Juggernaut, each with specialized skills. Ultimately we trimmed the list of game units substantially; probably due to design and art-animation time constraints.</p>

<p>As someone with limited involvement in Warcraft III, it was interesting to see the idea of heroes finally implemented in the series, though the design genesis of heroes in Warcraft III comes from a different source — that is, not from ideas re-hashed from Warcraft 1 design documents.</p>

<p>Briefly, Warcraft III started out as a game called Heroes of Warcraft, which departed from the type of traditional RTS we had already launched five times before (W1, W2:ToD, W2:BtDP, SC, SC:BW) and was instead a squad-based tactical combat game set in the Warcraft universe. This game morphed into a more traditional RTS — but retained the element of heroes — after a change of team-leads halfway through the development.</p>

<h2>Warcraft’s bright color palette</h2>

<p>If you consider the artwork of the Warcraft series, you’ll see that the colors are shockingly loud in comparison to, say, Diablo, where only in a dim room is it truly possible to see the beauty of the art. The bright, cartoony art-style was different from the style of many other PC war games of the era, which hewed to more realistic color palette.</p>

<p>Part of that difference can be explained by the past experiences of our artists, who had worked on several Super Nintendo and Sega Genesis console titles, where games required more dynamic colors since televisions of that era were so much worse at displaying colors than PC monitors. Console games on TVs, which had lower pixel resolution and color bleed, needed high-contrast artwork to show well.</p>

<p>Another reason was at the behest of Allen, who charged all the artists with drawing artwork in bright conditions. He’d regularly stalk the halls of Blizzard turning on lights and opening window-blinds.</p>

<p>His view was that most folks play games in bright rooms, so our artists should be authoring our games to play well in that environment. He argued that it’s easy to draw artwork that reads well when viewed in a dark room with no outside light can distract from the monitor. But when computer art is competing with bright lights it’s much more difficult to see. And fluorescent bulbs are the worst form of light available — the cold, flickering glow of their tubes tires the eyes and washes out colors.</p>

<p>So the lights were always on in the art rooms to force artists to compensate for terrible lighting by creating art that accounted for those conditions. These working conditions chafed on some (all?) of the art team, but ultimately led to artwork that stood out compared to products of the day.</p>

<p>Now you know why Warcraft artwork looks like it has been candy-coated!</p>

<p>After six months of development that started in September 1993, Warcraft: Orcs vs. Humans, the first product in what would eventually become the Warcraft series, was finally turning into a game instead of an extended tech-demo.</p>

<p>For several months I was the only full-time employee on the project, which limited the rate of development. I was fortunate to be assisted by other staff members, including Ron Millar, Stu Rose, and others, who did design work on the project. And several artists contributed prototype artwork when they found time in between milestones on other projects.</p>

<p>The team was thinly staffed because the development of Warcraft was self-funded by the company from revenues received for developing titles for game publishers like Interplay and SunSoft, and the company coffers were not deep.</p>

<p>At that time we were developing four 16-bit console titles: The Lost Vikings 2 (the sequel to our critically-acclaimed but low-selling, side-scrolling “run-and-jump” puzzle game), Blackthorne (a side-scrolling “run-and-jump” game where the lead character gets busy with a shotgun), Justice League Task Force (a Street Fighter clone set in the DC Comics universe), and Death and Return of Superman (a side-scrolling beat-em-up based on the DC universe comic series of the same name).</p>

<p>With the money received for developing these games and other odd jobs the company was able to pay initial development costs.</p>

<h2>Game development economics</h2>

<p>For most of the history of the game industry, independent game development studios — which is to say studios that weren’t owned by a retail game publishing company — usually funded their projects by signing contracts with those publishing companies. Publishers would “advance” money for the development of the project. In addition to advances for development, publishers were responsible for publicity, marketing, manufacturing, retail distribution, customer support and so forth.</p>

<p>Back in the early 90′s there were many more retail game-publishers than exist today, but the increasing cost of game development and especially of game publishing led to massive industry consolidation due to bankruptcies and acquisitions, so when you think of a retail game publisher today you’ll probably think of Activision-Blizzard, EA or Ubisoft instead of the myriad mid-sized companies that existed twenty years ago.</p>

<p>As in all industries, the terms of contracts are drawn up to be heavily in the favor of the people with the money. This is the other golden rule: “he who has the money makes the rules”. While in theory these agreements are structured so that the game developer is rewarded when a game sells well, as in the record and movie industries publishers capture the vast majority of profits, with developers receiving enough money to survive to sign another agreement — if they’re lucky.</p>

<p>When I mentioned “advances” paid by the publisher, the more correct term is “advances against royalties”, where the developer if effectively receiving a forgivable loan to be repaid from royalties for game sales. It sounds great: develop a game, get paid for each copy sold. But the mechanics work out such that the vast majority of game titles never earn enough money to recoup (pay for) the advances. Since development studios often had to give up the rights to their title and sequels, these agreements are often thinly disguised work-for-hire agreements.</p>

<p>To aim for better deal terms, a common strategy employed by development studios was to self-fund an initial game prototype, then use the prototype to “pitch” a development deal to publishers. The longer a developer was able to self-fund game creation the better the eventual contract terms.</p>

<p>Perhaps the best example of this strategy is Valve Software, where Gabe Newell used the wealth he earned at Microsoft to fund the development of Half Life and thereby gain a measure of control over the launch schedule for the game — releasing the game only when it was a high-quality product instead of rushing it out the door to meet quarterly revenue goals as Sierra Entertainment (the game’s publisher) desired. More importantly, Gabe’s financial wherewithal enabled Valve to obtain ownership of the online distribution rights for Half Life just as digital downloads were becoming a viable strategy for selling games, and led to that studio’s later — vast — successes.</p>

<p>The downside to self-funding a prototype is the risk that the developer takes in the event that the game project is not signed by a publisher — oftentimes resulting in the death of the studio.</p>

<p>The company I worked for — at that time named Silicon and Synapse — was self-funding Warcraft, along with another project called Games People Play, which would include crossword puzzles, boggle and similar games found on the shelves at airport bookstores to entertain stranded travelers.</p>

<p>By developing two games that targeted radically different audiences the company owners hoped to create multiple sources of revenue that would be more economically stable compared to betting all the company’s prospects on the core entertainment market (that is, “hard core” gamers like you ‘n me).</p>

<p>Of course spreading bets across diverse game genres also has risks, inasmuch as a company brand can be diluted by creating products that don’t meet the desires its audiences. One of the great strengths of the Blizzard brand today is that users will buy its games sight-unseen because they believe in the company’s vision and reputation. That reputation would have been more difficult to establish had the company released both lower-budget casual titles and high-budget AAA+ games, as did Sierra Entertainment, which is now out of business after repeated struggles to find an audience.</p>

<p>In any event, creating Games People Play turned out to be a misstep because developing a casual entertainment product was so demoralizing for the lead programmer that the project never matured and was later canceled. Or perhaps it wasn’t a mistake, because the combination of Warcraft and Games People Play convinced Davidson &amp; Associates, at that time the second largest educational software company in the world, to purchase Silicon &amp; Synapse.</p>

<h2>Our new overlords</h2>

<p>Davidson &amp; Associates, started by Jan Davidson and later joined by her husband Bob, was a diversified educational software company whose growth was predicated on the success of a title named Math Blaster, in which a player answers math problems to blow up incoming asteroids before they destroy the player’s ship. It was a clever conjunction of education and entertainment, and the company reaped massive rewards from its release.</p>

<p>Aside: As an educational title Math Blaster may have had some value when used properly, but I had occasion to see it used in folly. My high school journalism class would write articles for our school newspaper in a computer room shared with the remedial education class; my fellow journalism students and I watched in horror as remedial twelfth graders played Math Blaster using calculators. As asteroids containing expressions like “3 + 5″ and “2 * 3″ approached those students would rapidly punch the equations into calculators then enter the results to destroy those asteroids. Arguably they were learning something, considering they outsmarted their teachers, but I’m not sure it was the best use of their time given their rapidly approaching entry into the work-force.</p>

<p>With good stewardship and aggressive leadership Davidson &amp; Associates expanded into game manufacturing (creating &amp; packing the retail box), game distribution (shipping boxes to retailers and intermediate distributors), and direct-to-school learning-materials distribution. They saw an opportunity to expand into the entertainment business, but their early efforts at creating entertainment titles internally convinced them that it would make better sense to purchase an experienced game development studio rather than continuing to develop their own games with a staff more knowledgeable about early learning than swords &amp; sorcery.</p>

<p>And so at a stroke the cash-flow problems that prevented the growth of the Warcraft development team were solved by the company’s acquisition; with the deep pockets of Davidson backing the effort it was now possible for Silicon &amp; Synapse (renamed Blizzard in the aftermath of the sale) to focus on its own titles instead of pursuing marginally-profitable deals with other game publishers. And they were very marginal — even creating two top-rated games in 1993, which led to the company being named “Nintendo Developer of the Year”, the company didn’t receive any royalties.</p>

<p>With a stack of cash from the acquisition to hire new employees and enable existing staff to jump on board the project, the development of Warcraft accelerated dramatically.</p>

<h2>The design “process”</h2>

<p>The approach to designing and building games at Blizzard during its early years could best be described as “organic”. It was a chaotic process that occurred during formal design meetings but more frequently during impromptu hallway gatherings or over meals.</p>

<p>Some features came from design documents, whereas others were added by individual programmers at whim. Some game art was planned, scheduled and executed methodically, whereas other work was created late at night because an artist had a great idea or simply wanted to try something different. Other elements were similarly ad-libbed; the story and lore for Warcraft came together only in the last several months prior to launch.</p>

<p>While the process was unpredictable, the results were spectacular. Because the team was comprised of computer game fanatics, our games evolved over the course of their development to become something that gamers would want to play and play and play. And Warcraft, our first original game for the IBM PC, exemplified the best (and sometimes the worst) of that process, ultimately resulting in a game that — at least for its day — was exemplary.</p>

<h2>How the Warcraft unit-creation system came about</h2>

<p>As biologists know the process of evolution has false starts where entire branches of the evolutionary tree are wiped out, and so it was with our development efforts. Because we didn’t have spec to measure against, we instead experimented and culled the things that didn’t work. I’d like to say that this was a measured, conscious process in each case, but many times it arose from accidents, arguments, and personality conflicts.</p>

<p>One event I remember in particular was related to the creation of game units. During the early phase of development, units were conjured into existence using “cheat” commands typed into the console because there was no other user-interface mechanism to build them. As we considered how best to create units, various ideas were proposed.</p>

<p>Ron Millar, an artist who did much of the ideation and design for early Blizzard games proposed that players would build farm-houses, and — as in the game Populous — those farms would periodically spawn basic worker units, known as (Human) peasants and (Orc) peons. The player would be able to use those units directly for gold-mining, lumber-harvesting and building-construction, but they wouldn’t be much good as fighters.</p>

<p>Those “peons” not otherwise occupied could be directed by the player to attend military training in barracks, where they’d disappear from the map for a while and eventually emerge as skilled combatants. Other training areas would be used for the creation of more advanced military units like catapult teams and wizards.</p>

<p>The idea was not fully “fleshed out”, which was one of the common flaws of our design process: the end result of the design process lacked the formality to document how an idea should be implemented. So the idea was kicked around and argued back and forth through the informal design team (that is, most of the company) before we started coding (programming) the implementation.</p>

<p>Before we started working on the code Ron left to attend a trade show (probably Winter CES — the Consumer Electronics Show), along with Allen Adham, the company’s president. And during their absence an event occurred which set the direction for the entire Warcraft series, an event that I call the “Warcraft design coup”.</p>

<p>Stu Rose, another early artist/designer to join the company (employee #6, I believe), came late one afternoon to my office to make a case for a different approach. Stu felt that the unit creation mechanism Ron proposed had too many as-yet-unsolved implementation complexities, and moreover that it was antithetical to the type of control we should be giving players in a Real-Time Strategy (RTS) game.</p>

<p>In this new RTS genre the demands on players were much greater than in other genres and players’ attention could not be focused in one place for long because of the many competing demands: plan the build/upgrade tree, drive economic activity, create units, place buildings, scout the map, oversee combat and micromanage individual unit skills. In an RTS the most limited resource is player attention so adding to the cognitive burden with an indirect unit creation mechanism would add to the attention deficit and increase the game’s difficulty.</p>

<p>To build “grunts”, the basic fighting unit, it would be necessary to corral idle peasants or those working on lower priority tasks to give them training, unnecessarily (in Stu’s view) adding to the game’s difficulty.</p>

<p>I was a ready audience for his proposal as I had similar (though less well thought out) concerns and didn’t feel that unit creation was an area where we needed to make bold changes. Dune II, the game from which the design of Warcraft was derived, had a far simpler mechanism for unit creation: just click a button on the user-interface panel of a factory building and the unit would pop out a short time later. It wasn’t novel — the idea was copied from even earlier games — but it just worked.</p>

<p>Stu argued that we should take this approach, and in lieu of more debate just get it done now, so over the next couple of days and late nights I banged out the game and user-interface code necessary to implement unit creation, and the design decision became fait accompli. By the time Ron and Allen returned the game was marginally playable in single-player mode, excepting that the enemy-computer AI was still months away from being developed.</p>

<p>Warcraft was now an actual game that was simple to play and — more importantly — fun. We never looked back.</p>

<h2>The first multiplayer game of Warcraft</h2>

<p>In June 1994, after ten months of development, the game engine was nearly ready for multiplayer. It was with a growing sense of excitement that I integrated the code changes that would make it possible to play the first-ever multiplayer game of Warcraft. While I had been busy building the core game logic (event loop, unit-dispatcher, path-finding, tactical unit-AI, status bar, in-game user-interface, high-level network code) to play, other programmers had been working on related components required to create a multiplayer game.</p>

<p>Jesse McReynolds, a graduate of Caltech, had finished coding a low-level network library to send IPX packets over a local-area network. The code was written based on knowledge gleaned from the source code of <del>Quake</del> Doom, which <del>had been recently</del> was later open-sourced by John Carmack at id software. While the IPX interface layer was only several hundred lines of C code, it was the portion of the code that interfaced with the network-card driver to ensure that messages created on one game client would be sent to the other player.</p>

<p>And Bob Fitch, who was earning his master’s degree from Cal State Fullerton, developed the initial “glue screens” that enabled players to create and join multiplayer games. My office was next to Bob’s, which was mighty convenient since it was necessary for us to collaborate closely to integrate his game join-or-create logic to my game-event loop.</p>

<p>After incorporating the changes I compiled the game client and copied it to a network drive while Bob raced back to his office to join the game. In what was a minor miracle, the code we’d written actually worked and we were able to start playing the very first multiplayer game of Warcraft.</p>

<p>As we started the game I felt a greater sense of excitement than I’d ever known playing any other game. Part of the thrill was in knowing that I had helped to write the code, but even more so were two factors that created a sense of terror: playing against a human opponent instead of a mere computer AI, and more especially, not knowing what he was up to because of the fog of war.</p>

<h2>The fog of war</h2>

<p><img src="http://www.alexbevi.com/images/Warcraft-1-fog-of-war.jpg"></p>

<p>One of the ideas drawn from earlier games was that of hiding enemy units from sight of the opposing player. A black graphic overlay hid areas of the game map unless a friendly unit explored the area, which is designed to mimic the imperfect information known by a general about enemy operations and troop movements during real battles.</p>

<p>Empire, a multiplayer turn-based strategy game written almost seventeen years before by the brilliant Walter Bright (creator the “D” programming language), used fog of war for that same purpose. Once an area of the map was “discovered” (uncovered) it would remain visible forever afterwards, so an important consideration when playing was to explore enough of the map early in the game so as to receive advance warning of enemy troop movements before their incursions could cause damage to critical infrastructure or economic capability.</p>

<p>The psychological terror created by not knowing what the enemy is doing has been the demise of many generals throughout history, and adding this element to the RTS genre is a great way to add to the excitement (and fear) level. Thank Walter and the folks at Westwood who created Dune II for their savvy!</p>

<h2>Computer AI</h2>

<p>As many gamers know, computer-controlled “Artificial Intelligence” (AI) players in strategy games are often weak. It’s common for human players to discover exploits that the computer AI is not programmed to defend against that can be used destroy the AI with little difficulty, so computer AI players usually rely upon a numeric troop advantage, positional advantage, or “asymmetric rules” in order to give players a good challenge.</p>

<p>In most Warcraft missions the enemy computer players are given entire cities and armies to start with when battling human players. Moreover, Warcraft contains several asymmetric rules which make it easier for the AI player to compete, though these rules would perhaps be called outright cheating by most players.</p>

<p>One rule we created to help the computer AI was to reduce the amount of gold removed from gold mines to prevent them from being mined-out. When a human player’s workers emerge from a gold mine those workers remove 100 units of ore from the mine and deliver it back to the player’s town hall on each trip, and eventually the gold mine is exhausted by these mining efforts. However, when an AI-controlled worker makes the same trip, the worker only remove 8 units of ore from the mine, while still delivering 100 units into the AI treasury.</p>

<p>This asymmetric rule actually makes the game more fun in two respects: it prevents humans from “turtling”, which is to say building an unassailable defense and using their superior strategic skills to overcome the computer AI. Turtling is a doomed strategy against computer AIs because the human player’s gold-mines will run dry long before those of the computer.</p>

<p>Secondarily, when the human player eventually does destroy the computer encampment there will still be gold left for the player to harvest, which makes the game run faster and is more fun than grinding out a victory with limited resources.</p>

<p>Most players are aware of a more serious violation of the spirit of fair competition: the computer AI cheats because it can see through the fog of war; the AI knows exactly what the player is doing from moment to moment. In practice this wasn’t a huge advantage for the computer and merely served to prevent it from appearing completely stupid.</p>

<p>Interestingly, with the long popularity of StarCraft (over 14 years since launch and still played), a group of AI programmers has risen to the challenge of building non-cheating AIs. Aided by a library called BWAPI, these programmers write code that can inject commands directly into the StarCraft engine to play the game. Programmers enter their AIs in competitions with each other to determine the victor. While these BWAPI AI players are good, the best of them are handily beaten by skilled human opponents.</p>

<h2>Playing against a human</h2>

<p>As a person who had played many (many many) strategy games before developing Warcraft, I was well aware of the limitations of computer AIs of that era. While I had battled against many computer AIs, sometimes losing, many times winning, I was never scared by AI intelligence, even when battling the terrible Russian offensive in the game Eastern Front by Chris Crawford, which I played on a friend’s Atari 800 until eventually the audio cassette tape (!) that contained the game was so old it could no longer be read.</p>

<p>These games were fun, exciting, and most certainly challenging, but not scary. But something changed when I played the first multiplayer game of Warcraft.</p>

<p>The knowledge that I was competing against an able human player — not just in terms of skill and strategy, but also in terms of speed of command — but was prevented from seeing his actions by the fog of war was both electrifying and terrifying. In my entire career I have never felt as excited about a single game as I was during that first experience playing Warcraft, where it was impossible to know whether I was winning or losing.</p>

<p>As a massive adrenaline rush spiked in my bloodstream, I did my best to efficiently harvest gold and lumber, build farms and barracks, develop an offensive capability, explore the map, and — most importantly — crush Bob’s armies before he could do the same to mine.</p>

<p>This was no test-game to verify the functionality of the engine; I know he felt the same desire to claim bragging rights over who won the first-ever multiplayer game of Warcraft. Moreover, when we had played Doom together at Blizzard, I had won some renown because, after a particularly fierce game Bob had become so angry at me for killing him so frequently with a rocket launcher that he had vowed never to play me again. I knew he’d be looking for payback.</p>

<p>As our armies met in battle, we redoubled our efforts to build more units and threw them into the fray. Once I discovered his encampment and attacked, I felt more hopeful. Bob’s strategy seemed disorganized and it appeared I would be able to crush his forces, but I wanted to leave nothing to chance so I continued at a frenzied pace, attacking his units and buildings wherever I could find them.</p>

<p>And then … crash:</p>

<p><img src="http://www.alexbevi.com/images/Dos4GW-crash.png"></p>

<p>Bad news bears – DOS4GW lets us know Warcraft crashed
As any programmer knows, the likelihood of new code working properly the first time is close to zero, and so it should be no surprise that the game crashed. The game’s graphics scrolled off the top of the monitor and were replaced with the blocky text of the DOS4GW “crash screen” so familiar to gamers in the era before Windows gaming. Now we have the far more sophisticated Windows Error Reporting dialog which enables the player to submit the crash report, though occasionally players see the dreaded “blue screen of death” which is remarkably similar to those of old.</p>

<p>After the crash I leaped up from my chair and ran into Bob’s office, yelling “That was awesooooommmme!” immediately followed by “… and I was kicking your ass!” So I was surprised to hear Bob’s immediate rebuttal: to the contrary, he had been destroying me.</p>

<p>It took a few minutes for our jangled nerves to return to normal but in short order we determined that not only did we have a crash bug but also a game-state synchronization problem, which I termed a “sync bug”: the two computers were showing entirely different battles that, while they started identically, diverged into two entirely different universes.</p>

<p>Someone who hasn’t worked on programming network code might assume that the two Warcraft game clients would send the entire game state back and forth each turn as the game is played. That is, each turn the computers would send the positions and actions for every game unit. In a slow-paced game with only a few board positions, like Chess or Checkers, this would certainly be possible but in a game like Warcraft, with up to 600 units in action at once, it was impossible to send that volume of information over the network.</p>

<p>We anticipated that many gamers would play Warcraft with 2400 baud modems, which could only transmit a few hundred characters per second. Younger gamers who never used a modem should take the time to read up on the technology, which was little removed from smoke signals, and only slightly more advanced than banging rocks together. Remember, this was before Amazon, Google and Netflix — we’re talking the dark ages, man.</p>

<p>Having previously “ported” Battle Chess from DOS to Windows, I was familiar with how multiplayer games could communicate using modems. I knew that because of the limited bandwidth available via a modem it would have been impossible to send the entire game state over the network, so my solution was to send only each player’s commands and have both players execute those commands simultaneously.</p>

<p>I knew that this solution would work because computers are great at doing exactly what they’re told. Unfortunately it turned out that many times we humans who program them are not so good at telling computers exactly the right thing to do, and that is a major source of bugs. When two computers are supposed to be doing the same thing, but disagree because of a bug, well, that’s a problem.</p>

<p>A sync bug arises when the two computers simulating the game each choose different answers to the same question, and from there diverge further and further over time. As in time-travel movies like Back to the Future, small changes made by the time-traveler while in the past lead to entirely different futures; so it was that games of Warcraft would similarly diverge. On my computer my Elvish archer would see your Orcish peon and attack, whereas on your computer the peon would fail to notice the attack and wander off to harvest lumber. With no mechanism to discover or rectify these types of disagreements, our two games would soon be entirely different.</p>

<p>So it was that the first game of Warcraft was a draw, but at the same time it was a giant win for the game team — it was hella fun! Other team members in the office played multiplayer soon afterwards and discovered it was like Blue Sky, the pure crystal meth manufactured by Walter White in Breaking Bad. Once people got a taste for multiplayer Warcraft, nothing else was as good. Even with regular game crashes, we knew we were on to something big.</p>

<p>All we needed to do was get the game done.</p>

<p>Tragically, we soon made an even worse discovery: not only did we have numerous sync bugs, but there were also many different causes for those sync bugs. If all the sync bugs were for similar reasons we could have endeavored to fix the singular root cause. Instead it turned out there were numerous different types of problems, each of which caused a different type of sync bug, and each which therefore necessitated its own fix.</p>

<h2>Why do sync bugs happen</h2>

<p>When developing Warcraft I had designed a solution to minimize the amount of data that needed to be transmitted over the network by only sending the commands that each player initiated, like “select unit 5″, “move to 650, 1224″, and “attack unit 53″. Many programmers have independently designed this same system; it’s an obvious solution to the problem of trying to synchronize two computers without sending the entire game state between them every single game turn.</p>

<p>Aside: These days there are probably several patents retroactively trying to claim credit for this approach. Over time I’ve come to believe that software should not be patentable; most any idea in software is something that a moderately experienced programmer could invent, and the definition of patents requires that patents be non-obvious. Nuff said.</p>

<p>I hadn’t yet implemented a mechanism to verify synchronization between the two computers, so any bug in the game code that caused those computers to make different choices would cause the game to “bifurcate” – that is, split it into two loosely-coupled universes that would continue to communicate but diverge with increasing rapidity over time.</p>

<p>Creating systems designed to detect de-synchronization issues was clearly the next task on my long list of things to do to ship the game!</p>

<h2>In for the long haul</h2>

<p>You know the ending to this story: Warcraft eventually shipped only five months later. It seemed an eternity because we worked so many hours each day, encountered so many obstacles, overcame so many challenges, and created something we cared for so passionately. I’ll continue to explore those remaining months in future blog articles, but so much was packed into that time that it’s impossible to squeeze those recollections into this already too long post!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Fetching Changesets in Redmine from Heroku using Subversion]]></title>
    <link href="http://www.alexbevi.com/blog/2012/11/21/fetching-changesets-in-redmine-from-heroku-using-svn/"/>
    <updated>2012-11-21T08:44:00-05:00</updated>
    <id>http://www.alexbevi.com/blog/2012/11/21/fetching-changesets-in-redmine-from-heroku-using-svn</id>
    <content type="html"><![CDATA[<p>[<strong>NOTE</strong>: The method described below should still work, but it&rsquo;s much easier to just use a Heroku buildpack (see <a href="http://www.alexbevi.com/blog/2014/07/07/subversion-plus-ruby-on-heroku-via-buildpacks/">this post</a> for details)]</p>

<p>I manage my open source and contract development projects using <a href="http://www.redmine.org">Redmine</a>.</p>

<p>Since I&rsquo;m &ldquo;frugal&rdquo;, I tend to try to push the free hosting envelope as far as possible. As a result, I have my Redmine deployment on <a href="http://www.heroku.com">Heroku</a>, my files and attachments on <a href="http://www.dropbox.com">Dropbox</a> and my source on <a href="https://github.com">GitHub</a>.</p>

<p>I also like to link to changesets in my projects, which is easy enough to do when you host the source and the Redmine server on the same machine.</p>

<p>Not so easy with Heroku+GitHub &hellip;. until now!</p>

<p>By the end of this tutorial, we will have:</p>

<ul>
<li>Setup a build system using Vagrant that matches the Heroku hosting environment</li>
<li>Compiled a statically linked <a href="http://subversion.apache.org/">Subversion</a> client</li>
<li>Added the svn client to our Redmine repository and pushed it to Heroku</li>
<li>Configured a project in Redmine to fetch changesets from GitHub using Subversion</li>
</ul>


<!-- more -->


<h2>Overview</h2>

<p>In 2012, <a href="https://github.com/blog/626-announcing-svn-support">GitHub announced SVN support</a>, which primarly opened the service up to developers who hadn&rsquo;t given up the centralized development model.</p>

<p>As an added bonus, it gave us an alternative view into the commit logs for our projects without the need for a local copy.</p>

<p>In order to proceed, I&rsquo;m making the following assumptions:</p>

<ul>
<li>You are hosting an instance of Redmine on Heroku</li>
<li>You are comfortable using <a href="http://git-scm.com">Git</a></li>
<li>You&rsquo;ve used a <a href="http://debian.org">Debian</a>-based Linux distribution in the past</li>
<li>You&rsquo;ve used the <a href="http://en.wikipedia.org/wiki/GNU_build_system">GNU Build System</a> before</li>
<li>You have <a href="http://www.ruby-lang.org">Ruby</a> and <a href="http://rubygems.org">RubyGems</a> configured (if not, <a href="http://rvm.io">RVM</a> is a good place to start)</li>
<li>You are not crazy enough to try doing this from Windows or OSX ;)</li>
<li>You have a sense of humour and realize the winky above indicates this guide was written for Linux, but could easily be adapted for any OS</li>
</ul>


<h2>Configuring the Build Environment</h2>

<p>Heroku (as of November, 2012 at least) deploys applications to an Ubuntu 10.04 x86_64 environment, and we&rsquo;re going to be statically linking for that environment, so we need to setup a build system that reflects this requirement.</p>

<p>The most efficient way of doing this is to use <a href="http://vagrantup.com">Vagrant</a> to initialize a bare-bones <a href="http://releases.ubuntu.com/lucid">Ubuntu Lucid</a> system.</p>

<p>Since Rubygems should already be installed, it can be used to quickly setup Vagrant:</p>

<pre><code>gem install vagrant
</code></pre>

<p>Now, let&rsquo;s fetch a pre-build lucid system (thanks Vagrant!) and initialize it in the current directory:</p>

<pre><code>vagrant box add lucid64 http://files.vagrantup.com/lucid64.box
vagrant init
</code></pre>

<p>This will create a <code>Vagrantfile</code> in the current director, which contains configuration information for our build system. In order to tell Vagrant to use the <em>lucid64</em> instace we&rsquo;ve downloaded, the <code>Vagrantfile</code> needs to be edited and the <em>config.vm.box</em> section updated.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># -*- mode: ruby -*-</span>
</span><span class='line'><span class="c1"># vi: set ft=ruby :</span>
</span><span class='line'>
</span><span class='line'><span class="no">Vagrant</span><span class="o">::</span><span class="no">Config</span><span class="o">.</span><span class="n">run</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
</span><span class='line'>  <span class="c1"># ...</span>
</span><span class='line'>  <span class="c1"># Every Vagrant virtual environment requires a box to build off of.</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box</span> <span class="o">=</span> <span class="s2">&quot;lucid64&quot;</span>
</span><span class='line'>  <span class="c1"># ...</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now that everything is ready to go, let&rsquo;s start the instance.</p>

<pre><code>vagrant up
</code></pre>

<p>Once vagrant has started the virtual machine, we can access it via ssh using:</p>

<pre><code>vagrant ssh
</code></pre>

<h2>Building Subversion</h2>

<p>For the purposes of this tutorial, I&rsquo;m going to be using the 1.6 branch of Subversion, which still had the <em>subversion-deps</em> packaged seperately.</p>

<blockquote><p><strong>NOTE</strong> With the 1.7 branch, there is a script that automates the process, and I&rsquo;ll likely update this tutorial at some point to use this.</p></blockquote>

<p>First, we need to get the source:</p>

<pre><code>wget http://subversion.tigris.org/downloads/subversion-deps-1.6.19.tar.bz2
wget http://subversion.tigris.org/downloads/subversion-1.6.19.tar.bz2
tar xvf subversion-deps-1.6.19.tar.bz2
tar xvf subversion-1.6.19.tar.bz2
cd subversion-1.6.19
</code></pre>

<p>Second, we&rsquo;ll install any additonal components required to compile successfully:</p>

<pre><code>sudo apt-get install build-essential libxml2-dev
</code></pre>

<p>Finally, we&rsquo;ll configure the build to exclude as much as possible and to produce a static binary:</p>

<pre><code>./configure --with-ssl \
            --without-gssapi \
            --without-swig \
            --without-neon \
            --enable-all-static
make
</code></pre>

<p>Once the build completes, the only file we&rsquo;re interested in is the <code>svn</code> client, so we&rsquo;ll copy that to the <code>/vagrant</code> directory of our build machine, but first we&rsquo;ll strip it.</p>

<pre><code>strip subversion/svn/svn
cp subversion/svn/svn /vagrant
</code></pre>

<blockquote><p><strong>NOTE</strong> stripping the binary reduces the overall size from ~ 12 MB to ~ 4 MB, which is important since we have limited space on Heroku.
    vagrant@lucid64:~/subversion-1.6.19$ ls -l subversion/svn/svn
    -rwxr-xr-x 1 vagrant vagrant 12060462 2012-11-21 14:37 subversion/svn/svn*</p>

<pre><code>vagrant@lucid64:~/subversion-1.6.19$ strip subversion/svn/svn   

vagrant@lucid64:~/subversion-1.6.19$ ls -l subversion/svn/svn
-rwxr-xr-x 1 vagrant vagrant 4257472 2012-11-21 14:56 subversion/svn/svn*
</code></pre></blockquote>

<p>The <code>/vagrant</code> directory is shared between the host and the guest machine by default, so this gives us access to the Subversion client if we open a new console and access the project folder we started Vagrant in.</p>

<p>Since we&rsquo;re now done, we can end the ssh session and stop the virtual machine</p>

<pre><code>exit
vagrant halt
</code></pre>

<h2>Adding Subversion to Redmine</h2>

<p>Go to the root of your local Redmine repository, and create a <code>bin</code> folder. Now copy the <code>svn</code> binary to this folder, add the result to your repository and push to Heroku.</p>

<pre><code>mkdir bin
cp /path/to/static/svn bin  
git commit -a -m "Adding a Statically Linked Subversion to Redmine"
git push heroku master
</code></pre>

<p>If all went well, when you access the <em>Repositories</em> tab under <em>Administration -> Settings</em>, Subversion should be listed and the version we just uploaded displayed.</p>

<p><img class="center" src="http://www.alexbevi.com/images/heroku-svn-01.jpg"></p>

<h2>Accessing Changesets from GitHub</h2>

<p>The final step is to configure an existing project to access a project on GitHub.</p>

<p>First, add a new repository and point it to the GitHub url you would normally use to access the project on the web.</p>

<blockquote><p><strong>NOTE</strong> Leave the <em>Login</em> and <em>Password</em> fields blank unless this is a private repository</p></blockquote>

<p><img class="center" src="http://www.alexbevi.com/images/heroku-svn-02.jpg"></p>

<p>Once configured, clicking on the <em>Repository</em> tab should fetch the changesets and show the source tree</p>

<p><img class="center" src="http://www.alexbevi.com/images/heroku-svn-03.jpg"></p>

<blockquote><p><strong>NOTE</strong> This can potentially time out on a larger project and require clicking on the <em>Repository</em> tab multiple times until all changesets have been fetched and parsed.</p>

<p><strong>NOTE</strong> Viewing changeset diffs doesn&rsquo;t work</p></blockquote>

<p>I&rsquo;ve used my personal installation as an example at <a href="http://alexbevi-pm.herokuapp.com/projects/redmine-dropbox-attachments">http://alexbevi-pm.herokuapp.com/projects/redmine-dropbox-attachments</a>.</p>

<p>This method isn&rsquo;t on-par with a self-hosted solution, but it&rsquo;s good enough if you don&rsquo;t have a VPS in your budget ;)</p>

<h3>REFERENCES</h3>

<ul>
<li><a href="http://rickvanderzwet.blogspot.ca/2007/11/building-static-subversion.html">http://rickvanderzwet.blogspot.ca/2007/11/building-static-subversion.html</a></li>
<li><a href="http://bindle.me/blog/index.php/405/running-binaries-on-heroku">http://bindle.me/blog/index.php/405/running-binaries-on-heroku</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Developer Braindump: Tony Tough and the Night of the Roasted Moths]]></title>
    <link href="http://www.alexbevi.com/blog/2012/11/02/developer-braindump-tony-tough-and-the-night-of-the-roasted-moths/"/>
    <updated>2012-11-02T08:28:00-04:00</updated>
    <id>http://www.alexbevi.com/blog/2012/11/02/developer-braindump-tony-tough-and-the-night-of-the-roasted-moths</id>
    <content type="html"><![CDATA[<p>The <a href="http://www.scummvm.org">ScummVM</a> project recently added support for <a href="http://en.wikipedia.org/wiki/Tony_Tough_and_the_Night_of_Roasted_Moths">Tony Tough and the Night of the Roasted Moths</a>.</p>

<p>The original developer, <a href="https://github.com/rasky">Giovanni Bajo</a> appeared on the <a href="http://sourceforge.net/mailarchive/forum.php?forum_name=scummvm-devel">scummvm-devel</a> mailing list and offered some insight into the development of the original engine.</p>

<p>The following is extracted from the <a href="http://sourceforge.net/mailarchive/message.php?msg_id=30015071">original post</a>.</p>

<!-- more -->




<blockquote><p>I went though the pull review code and of course lots of memories sprang to mind, so I&#8217;m happy to post a few things.</p><p>The game originated in 1996, I was 17 back at the time. Luca Giusti and I wrote the first version of the game engine, and it was based on DOS and 8-bit (palette) graphics, with the venerable Mode X for achieving smooth scrolling and higher resolution (320x240), and compiled sprites (!!!). IIRC Luca wrote the game engine and I wrote the MPAL preprocessor (yuk!), compiler, linker and interpreter. We were a distributed team of 5-6 people working across Italy, and we were using Fidonet and BBS files areas to share files. I live in Florence and one of the artist (Sergio) was in Naples; I still remember that we used a direct modem connection on the phone line (so basically he dialed my home phone number with his modem, to setup a 14.4 kbit connection) and then send me the first 4 room background arts through it; they were an early 8-bit version, but I was in love with them :) I also remember our lead artist (Valerio) sent me the first version of the park map (hand drawn wireframe) by fax; the original thermal paper is now a picture hanging on my home wall :)</p><p>At some point, in 1997, it became clear that we need to gather together to get to a decent point, so we organized a one-week crunch session in a alpine hut in northern italy; we worked 18-20hrs a day for a week, ate lots of pasta, and completed an early version of the first 4 rooms. I remember the game engine was using dirty-rectangles at that time to optimize drawing.</p><p>In 1998 we got a deal with a local publisher (Prograph/Protonic), and part of the team got paid to finish the game. That included myself, but Luca declined (for personal reasons); that meant that I was able to work on the game full-time, while Luca only in his spare time. The publisher insisted on reworking the game with 16-bit graphics, and porting it from DOS to Windows; it wasn&#8217;t trivial to port the existing code (Mode X stuff!), plus Luca couldn&#8217;t handle it in his spare time, so I had to take over the game engine. I wasn&#8217;t familiar with it at all (Luca had written it up until then), and thus decided to rewrite it from scratch. One of the few things that I brought over was the pathfinding code, and in fact I think it&#8217;s quite obvious from its look that it&#8217;s been written by a different hand.</p><p>The game engine is quite easy, as you have seen. I think it&#8217;s been the first real world C++ object-oriented program I have ever written, so it&#8217;s obviously very stretched towards using inheritance everywhere (new toy!). I still remember the joy of finally *understanding* polymorphism, and that&#8217;s when the RMTask base class was born, and the idea of having a list of RMTasks that could be anything by simply reimplementing the draw() call. I saw in the code that the list was called &#8220;OTList&#8221; and, while the name obviously rings a bell to me, I don&#8217;t recall what it means.  BTW, &#8220;RM&#8221; stands for Roasted Moths of course; some classes in the source code begins with &#8220;FP&#8221; instead; that&#8217;s &#8220;Falling Pumpkins&#8221; which was the original title of the game.</p><p>When I reimplemented the game, I went for full screen drawing, without dirty rectangles. I think i was positive that computers were fast enough for it, and in fact it did work quite well. I remember I quite optimized sprite drawing routines; for instance, most sprites are RLE-encoded as a way to quickly skip transparent pixels, and to avoid compiled sprites because there was simply too many sprites to compile them all without having memory issues. The game was running 60 fps on a Pentium 2, so that was good enough for us. The &#8217;30s (sepia) mode was a nice touch, but I remember it was noticeably slower at the time as it was an additional pass over the screen, so the framerate was dropping quite noticeably. </p><p>To build the rooms, setup background animations, decide rectangles of interactions with objects, etc. we built a so-called &#8220;location editor&#8221; (we actually used the word &#8220;location&#8221; for what is usually called &#8220;room&#8221; in adventures), whose source code I think has been lost. It was able to load a .loc file, modify it, and save it back. So both the game and the editor was using the same file format. At some point, we realized that it was better to separate the two formats, because the editor needed more information in basic format, while the game engine might use, for instance, sprites that were already rle-compressed instead of rle-compressing on the fly at load time; so the &#8220;lox&#8221; format was born. I think the game engine still opens the original loc files, but the final game assets only contains lox files.</p><p>One guy in the team (Marco) was one of those magic resources in game teams that is both an artist and a programmer; I think it&#8217;s mostly impossible nowadays, and used to be just rare at the time. So he was in charge of both maintaining the editor *and* drawing the background animations *and* using the editor to insert them into the locations. So that&#8217;s one hell of &#8220;eating multiple levels of dogfood&#8221; :) In fact, he was the one that prodded me to add support for &#8220;slot positions&#8221; to the game engine; with &#8220;slot positions&#8221;, we meant having an optional x,y offset associated to a graphic frame within a animation; I remember we discussed whether this was worth it, but at the end of the day, he was in a better position to know, since he was using the editor after all. Later in the game, it proved *extremely* useful in one specific animation: to animate the beast walking out of its cage. In fact, the game engine has no concept of actors (the only &#8220;actor&#8221; is Tony), so every other actor in the game is just an animated background object; in fact, they just don&#8217;t walk around. So, when the designer required the beast to walk out, Marco faked it through manually settings x,y offsets in the editor within the whole animation, making it scroll away. It took him a while of course, and won the title of &#8220;slot position master&#8221; for this achievement :) </p><p>Stuffing all files in a single compressed &#8220;resource&#8221; file was very common at the time. I don&#8217;t think there was a rationale for doing it, it was just the standard way of doing it. Lucas was doing it, so why shouldn&#8217;t we? :) I think it just looked cool, in a way. We were using LZO as a compressor because it was very fast at decompression; you might have noticed also that LZO is GPL, which means that the game was in blatant violation. I don&#8217;t think I have *knew* what free software was and what a free software license was. I don&#8217;t recall the details, but I wouldn&#8217;t be surprised if I simply altavista&#8217;d for &#8220;fast compression&#8221;, found that source code, downloaded it at 64 kbit/s, and dumped it into the game. I&#8217;m now deep into free software at many levels, I even give talks and do trainings about free software licenses from time to time, so I hope Markus of LZO can forgive the young me for not even realizing what I was doing.</p><p>Speeches gave me quite a few headaches. For a start, I realized that simply exporting all texts from MPAL to a txt/html file wasn&#8217;t enough, because actors need context to meaningfully act. So I ended up writing a program that exported HTML file divided by rooms, with some contexts added, and even manually adding comments to explain them. This has been helpful and was important to get good speeches from them. I remember it was really fun when the actors director called us and played us over the phone the first recordings of character voice tests made by the actors. I think we actually voted between a few options to decide which voice sounded best for Tony. When I got the first speeches files back from them, I had some latency issues, especially when running off CDs. I think I ended up caching the main index in RAM and maybe precaching something (don&#8217;t remember the details). I think I also changed the code so to delay display of subtitles to the moment I could effectively start playing the speech, because it was very unfriendly to first see the text on screen, and the hear the speech 1 second later.</p><p>MPAL was very very basic. I actually didn&#8217;t have a clue how to properly code a VM with bytecode and stuff, and I didn&#8217;t have *any* proper compiler theory training, so in retrospect it&#8217;s amazing I even managed to parse and compile files. So basically MPAL can only assign to variables (which are all globals, plus a weird namespace thingie for locality), call &#8220;custom functions&#8221; (aka C++ code stored in a pointer table) and do basic arithmetic. That&#8217;s it. Not even a proper language, isn&#8217;t it? :) No loop constructors, no ifs, no jumps, nothing. So MPAL was a collection of flat routines, each one associated to a specific verb (action), specific object (eg. door), under a specific condition (eg: when open, that is when global variable room1_door_open==1). Since you couldn&#8217;t have conditions *within* a MPAL routine but only to select *which* routine to run, you can see that cut & paste was a useful tool for scripters :)</p><p>In fact, we didn&#8217;t evolve MPAL much during the main game development. We basically went with what we had on the DOS version, and we were using the same compiler/linker binary for months/years like we had no source code for it. In fact, having written most of it in 1996 (2 yrs before), with zero experience on writing compilers, it was kind of &#8220;magical&#8221; in my eyes that it was somehow working, and I was almost scared to touch it, let alone refactoring. I remember that, near the end of development, the scripts hit some internal hard-coded limit of the compiler (say, too many total variables), and I was terrified to simply open the project in Visual Studio, bump that limit, and recompile everything. In retrospect, I think it was more of a psychological thing, since the compiler worked wonderfully for the whole development and did its job.</p><p>There were no actors in MPAL simply because the game didn&#8217;t really require them, so at some point we decided to simply avoid implementing it and tweak the storyboard accordingly. The game designer, Stefano, wasn&#8217;t very happy about it but we eventually found a deal and I simply added a way to run background tasks in MPAL (actually, through a custom verb &#8220;Idle&#8221;, so not to modify the compiler!), to let actors at least chat and animate in background, but without ever walking. In fact, the game engine had already been designed for multiple actors in mind (this is why you have the RMCharacter class separated from RMTony), but there was nothing in MPAL, and of course development time is limited. </p><p>Given my ignorance of &#8220;advanced&#8221; programming techniques, I think I simply couldn&#8217;t think of how one could execute a linear (blocking) piece of script code without recurring to multi-threading. So I think I didn&#8217;t even explore alternatives to multithreading. Obviously multithreading programming isn&#8217;t easy, so custom C++ functions, called from MPAL, were full of locking issues wrt to the main thread that redraws the screen. The game was developed under Windows 95 and in fact was released before Windows 2000 was out; on the NT kernel, the game didn&#8217;t work too well and crashed often because of race conditions. I see that you debugged and fixed at least few those bugs, well done! Those simply weren&#8217;t triggering on a 9x kernel. </p><p>Another issue with MPAL is that there&#8217;s no way to skip cutscenes; I don&#8217;t remember whether I couldn&#8217;t think of a good way of doing it, or whether all methods I devised would require too much workload on scripters that were already quite full. I think it&#8217;s my #1 technical regret when I see the game, and in fact I would quite love if you found a way to implement it now.</p><p>I think this ends my braindump of today. Feel free to ask questions of course.</p><p>Thanks again for your work!</p><footer><strong>Giovanni Bajo</strong> <cite>2012 October 25</cite></footer></blockquote>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Disable Hot Corner Hover in Linux Mint]]></title>
    <link href="http://www.alexbevi.com/blog/2012/11/02/disable-hot-corner-hover-in-linux-mint-13/"/>
    <updated>2012-11-02T08:01:00-04:00</updated>
    <id>http://www.alexbevi.com/blog/2012/11/02/disable-hot-corner-hover-in-linux-mint-13</id>
    <content type="html"><![CDATA[<p><strong>UPDATE</strong> For Linux Mint 16, the <code>hotCorner</code> settings have been moved to <code>/usr/share/cinnamon/js/ui/hotCorner.js</code>.</p>

<p>I use <a href="http://www.synergy-foss.org">Synergy</a> on all my computers to share a common mouse and keyboard, but I&rsquo;ve found that with Gnome 3 based distributions, the hot corner was causing me some grief.</p>

<p>The beauty of using a Linux-based system though is that you can pretty much change anything you&rsquo;re unhappy with, so that&rsquo;s what I&rsquo;m here to do.</p>

<!-- more -->


<p>By default, <a href="http://linuxmint.com">Linux Mint</a> uses the <a href="http://cinnamon.linuxmint.com">Cinnamon</a> desktop, so the configuration file we&rsquo;re looking for is at <code>/usr/share/cinammon/js/ui/layout.js</code>.</p>

<p>For Linux Mint 12, which still used <a href="https://live.gnome.org/GnomeShell">Gnome Shell</a>, the file was at <code>/usr/share/gnome-shell/js/ui/layout.js</code>.</p>

<p>Edit the appropriate file</p>

<pre><code>$ sudo nano /usr/share/cinammon/js/ui/layout.js
</code></pre>

<p>Locate the following section (I just searched for <em>hot-corner</em>)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">this</span><span class="p">.</span><span class="nx">_corner</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Clutter</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">({</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;hot-corner&#39;</span><span class="p">,</span>
</span><span class='line'>                                       <span class="nx">width</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>                                       <span class="nx">height</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>                                       <span class="nx">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>                                       <span class="nx">reactive</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>And change the value of <code>reactive</code> from <em>true</em> to <em>false</em>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">this</span><span class="p">.</span><span class="nx">_corner</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Clutter</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">({</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;hot-corner&#39;</span><span class="p">,</span>
</span><span class='line'>                                       <span class="nx">width</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>                                       <span class="nx">height</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>                                       <span class="nx">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>                                       <span class="nx">reactive</span><span class="o">:</span> <span class="kc">false</span> <span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Log off, then back on. Booya!</p>
]]></content>
  </entry>
  
</feed>
