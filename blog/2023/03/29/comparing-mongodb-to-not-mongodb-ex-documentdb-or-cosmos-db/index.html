<!DOCTYPE html><html lang="en-US" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Comparing MongoDB to not-MongoDB (ex: DocumentDB or Cosmos DB)" /><meta name="author" content="Alex Bevilacqua" /><meta property="og:locale" content="en_US" /><meta name="description" content="Let’s start off first with what is MongoDB? MongoDB’s document model is simple for developers to learn and use, while still providing all the capabilities needed to meet the most complex requirements at any scale. To enable developers to quickly integrate their data with their applications, drivers for 10+ languages as well dozens more community supported libraries exist that expose idiomatic interfaces and intuitive APIs." /><meta property="og:description" content="Let’s start off first with what is MongoDB? MongoDB’s document model is simple for developers to learn and use, while still providing all the capabilities needed to meet the most complex requirements at any scale. To enable developers to quickly integrate their data with their applications, drivers for 10+ languages as well dozens more community supported libraries exist that expose idiomatic interfaces and intuitive APIs." /><link rel="canonical" href="https://www.alexbevi.com/blog/2023/03/29/comparing-mongodb-to-not-mongodb-ex-documentdb-or-cosmos-db/" /><meta property="og:url" content="https://www.alexbevi.com/blog/2023/03/29/comparing-mongodb-to-not-mongodb-ex-documentdb-or-cosmos-db/" /><meta property="og:site_name" content="ALEX BEVILACQUA" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-03-29T13:12:37-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Comparing MongoDB to not-MongoDB (ex: DocumentDB or Cosmos DB)" /><meta name="twitter:site" content="@alexbevi" /><meta name="twitter:creator" content="@Alex Bevilacqua" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Alex Bevilacqua"},"dateModified":"2023-03-29T19:43:26-04:00","datePublished":"2023-03-29T13:12:37-04:00","description":"Let’s start off first with what is MongoDB? MongoDB’s document model is simple for developers to learn and use, while still providing all the capabilities needed to meet the most complex requirements at any scale. To enable developers to quickly integrate their data with their applications, drivers for 10+ languages as well dozens more community supported libraries exist that expose idiomatic interfaces and intuitive APIs.","headline":"Comparing MongoDB to not-MongoDB (ex: DocumentDB or Cosmos DB)","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.alexbevi.com/blog/2023/03/29/comparing-mongodb-to-not-mongodb-ex-documentdb-or-cosmos-db/"},"url":"https://www.alexbevi.com/blog/2023/03/29/comparing-mongodb-to-not-mongodb-ex-documentdb-or-cosmos-db/"}</script><title>Comparing MongoDB to not-MongoDB (ex: DocumentDB or Cosmos DB) | ALEX BEVILACQUA</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-36490021-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-36490021-1'); }); </script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6215800856413580" crossorigin="anonymous"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/galleria/1.5.7/galleria.min.js"></script><link href="//cdnjs.cloudflare.com/ajax/libs/galleria/1.5.7/themes/classic/galleria.classic.min.css" media="screen, projection" rel="stylesheet" type="text/css" /><style> /* This rule is read by Galleria to define the gallery height: */ .galleria{ width: 700px; height: 400px; background: #000 } .responsive-wrap iframe{ max-width: 100%;}</style><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /images/avatar.png " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">ALEX BEVILACQUA</a></div><div class="site-subtitle font-italic">my little corner of the interwebs</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href=" https://github.com/alexbevi " aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href=" https://twitter.com/alexbevi " aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['alex','alexbevi.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href=" /feed.xml " aria-label="rss" > <i class="fas fa-rss"></i> </a> <a href=" https://linkedin.com/in/alexbevi " aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" https://stackoverflow.com/users/195509 " aria-label="stack-overflow" target="_blank" rel="noopener"> <i class="fab fa-stack-overflow"></i> </a> <a href=" https://www.facebook.com/alexbevi " aria-label="facebook" target="_blank" rel="noopener"> <i class="fab fa-facebook"></i> </a> <a href=" https://reddit.com/user/alexbevi " aria-label="reddit" target="_blank" rel="noopener"> <i class="fab fa-reddit"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> Blog </span> <span> 2023 </span> <span> 03 </span> <span> 29 </span> <span>Comparing MongoDB to not-MongoDB (ex: DocumentDB or Cosmos DB)</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Comparing MongoDB to not-MongoDB (ex: DocumentDB or Cosmos DB)</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Mar 29, 2023, 1:12 PM -0400" > Mar 29 <i class="unloaded">2023-03-29T13:12:37-04:00</i> </span> by <span class="author"> Alex Bevilacqua </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Wed, Mar 29, 2023, 7:43 PM -0400" > Mar 29 <i class="unloaded">2023-03-29T19:43:26-04:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1378 words">7 min</span></div></div><div class="post-content"> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/images/mongodb-logo.png" class="preview-img" alt="MongoDB Logo"><p>Let’s start off first with <a href="https://www.mongodb.com/what-is-mongodb">what is MongoDB?</a> MongoDB’s <a href="https://www.mongodb.com/document-databases">document model</a> is simple for developers to learn and use, while still providing all the capabilities needed to meet the most complex requirements at any scale. To enable developers to quickly integrate their data with their applications, <a href="https://www.mongodb.com/docs/drivers/">drivers for 10+ languages</a> as well dozens more <a href="https://www.mongodb.com/docs/drivers/community-supported-drivers/">community supported libraries</a> exist that expose idiomatic interfaces and intuitive APIs.</p><p>The ease of use of the drivers and the low barrier to entry to working with your data programmatically has been a huge draw for developers coming to MongoDB, however there are now choices in the market as big names such as Microsoft and Amazon release similar offerings that expose a MongoDB “compatibility layer” atop cloud database products.</p><p>According to the product blurb for <a href="https://aws.amazon.com/documentdb/">Amazon DocumentDB (with MongoDB compatibility)</a>, <em>Amazon DocumentDB (with MongoDB compatibility) is a fully managed native JSON document database that makes it easy and cost effective to operate critical document workloads at virtually any scale without managing infrastructure. Amazon DocumentDB simplifies your architecture by providing built-in security best practices, continuous backups, and native integrations with other AWS services.</em></p><p>Note that the branding for DocumentDB includes <strong>“with MongoDB compatibility”</strong> right in the product name, and in a similar fashion Azure’s Cosmos DB provides a variation called <a href="https://learn.microsoft.com/en-us/azure/cosmos-db/mongodb/">Azure Cosmos DB for MongoDB</a>. <a href="https://www.mongodb.com/atlas/database">MongoDB Atlas</a>, which is MongoDB’s cloud database service can make the same claims Amazon and Microsoft make, however with the main differentiating factor being that it offers the MongoDB Server natively - not through some abstraction layer.</p><p>The major area of focus for developers is on building software using MongoDB’s drivers, so we’ll be focusing this article on the availability of MongoDB’s <a href="https://www.mongodb.com/docs/manual/reference/command/">database commands</a> across both Amazon Document DB as well as Azure Cosmos DB. The drivers use these commands internally to deliver consistent API experiences (based on published specifications such as the <a href="https://github.com/mongodb/specifications/blob/master/source/crud/crud.rst">Driver CRUD API</a>) and inconsistencies in implementation or outright omissions could effect an application using MongoDB’s drivers as a result.</p><h1 id="aws-documentdb">AWS DocumentDB</h1><p>As of 2022-08-22, <a href="https://www.isdocumentdbreallymongodb.com/">Amazon DocumentDB is 35.31% compatible</a>. This number is being established based on the result of <a href="https://github.com/mongodb-developer/service-tests">compatibility tests</a> that can be run by anyone to validate the results, but what does compatibility really mean here to the end user?</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/images/notmdb-01.png" alt="" /></p><p>According to the <a href="https://www.mongodb.com/support-policy/lifecycles">MongoDB Software Lifecycle Schedules</a> the versions of MongoDB that DocumentDB lists as supported reached end of life in 2021 and 2022. At the time of writing <a href="https://www.mongodb.com/docs/manual/release-notes/6.0/">MongoDB 6.0</a> is the latest version available, with 7.0 scheduled for sometime during the second half of 2023. As such, it’s important to check your selected driver’s compatibility to ensure you’re potentially using features that won’t be supported or exist (for example, see the <a href="https://www.mongodb.com/docs/ruby-driver/master/reference/driver-compatibility/">Ruby Driver Compatibility</a> documentation).</p><p>Minor frustration - provisioning either an elastic or instance based DocumentDB cluster takes 10+ minutes. I also found the network restrictions made it extremely difficult to connect to the cluster even after downloading the PEM file for the security group. To interact with the cluster in any meaningful way I setup an Amazon Linux EC2 container, which I then installed the <a href="https://www.mongodb.com/try/download/shell">MongoDB Shell</a> on.</p><p>To do this, connect to the container, get a download url for <code class="language-plaintext highlighter-rouge">mongosh</code> for <em>“RHEL / CentOS / Fedora / Suse 64-bit”</em> and install that in the container to connect to the cluster.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre>   ,     <span class="c">#_</span>
   ~<span class="se">\_</span>  <span class="c">####_        Amazon Linux 2023</span>
  ~~  <span class="se">\_</span><span class="c">#####\</span>
  ~~     <span class="se">\#</span><span class="c">##|</span>
  ~~       <span class="se">\#</span>/ ___   https://aws.amazon.com/linux/amazon-linux-2023
   ~~       V~<span class="s1">' '</span>-&gt;
    ~~~         /
      ~~._.   _/
         _/ _/
       _/m/<span class="s1">'
[ec2-user@ip-172-31-7-1 ~]$ wget https://downloads.mongodb.com/compass/mongodb-mongosh-1.8.0.x86_64.rpm
[ec2-user@ip-172-31-7-1 ~]$ sudo rpm -i mongodb-mongosh-1.8.0.x86_64.rpm
[ec2-user@ip-172-31-7-1 ~]$ mongosh mongodb://&lt;user&gt;:&lt;pass&gt;@ab-elastic-docdb-051834932553.us-east-1.docdb-elastic.amazonaws.com:27017 -ssl
WARNING: argument --ssl is deprecated and will be removed. Use --tls instead.
Current Mongosh Log ID: 64247c7a6aaa0a9d29f5ada3
Connecting to:          mongodb://&lt;credentials&gt;@ab-elastic-docdb-051834932553.us-east-1.docdb-elastic.amazonaws.com:27017/?directConnection=true&amp;tls=true&amp;appName=mongosh+1.8.0
Using MongoDB:          5.0.0
Using Mongosh:          1.8.0

[direct: mongos] test&gt;
</span></pre></table></code></div></div><p>The two cluster types you can create effectively map to either a <a href="https://www.mongodb.com/docs/manual/replication/">replica set</a> or <a href="https://www.mongodb.com/docs/manual/sharding/#sharded-cluster">sharded cluster</a>. To see what commands are supported by each cluster type, from a <code class="language-plaintext highlighter-rouge">mongosh</code> session we run the following script that uses the <a href="https://www.mongodb.com/docs/manual/reference/command/listCommands/"><code class="language-plaintext highlighter-rouge">listCommands</code></a> command generate the list:</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nf">keys</span><span class="p">(</span><span class="nx">db</span><span class="p">.</span><span class="nf">runCommand</span><span class="p">({</span> <span class="na">listCommands</span><span class="p">:</span> <span class="mi">1</span> <span class="p">})[</span><span class="dl">"</span><span class="s2">commands</span><span class="dl">"</span><span class="p">]).</span><span class="nf">sort</span><span class="p">())</span>

<span class="c1">// instance based (commands: 69)</span>
<span class="p">[</span><span class="dl">"</span><span class="s2">abortTransaction</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">aggregate</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">authenticate</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">buildInfo</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">collMod</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">collStats</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">commitTransaction</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">connectionStatus</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">count</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">create</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">createIndexes</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">createRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">createUser</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">currentOp</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dataSize</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dbStats</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">delete</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">deleteIndexes</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">distinct</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">driverOIDTest</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">drop</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropAllRolesFromDatabase</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropAllUsersFromDatabase</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropDatabase</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropIndexes</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropUser</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">explain</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">find</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">findAndModify</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">forceerror</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getLastError</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getMaxChangeStreamTimestamp</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getMore</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getnonce</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">grantPrivilegesToRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">grantRolesToRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">grantRolesToUser</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">hello</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">hostInfo</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">insert</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">isMaster</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">killAllSessions</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">killCursors</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">killOp</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">killSessions</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">listCollections</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">listCommands</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">listCursors</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">listDatabases</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">listIndexes</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">logout</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">modifyChangeStreams</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">ping</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetGetConfig</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetGetStatus</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">revokePrivilegesFromRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">revokeRolesFromRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">revokeRolesFromUser</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">rolesInfo</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">saslContinue</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">saslStart</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">serverStatus</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">top</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">update</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">updateRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">updateUser</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">usersInfo</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">whatsmyuri</span><span class="dl">"</span><span class="p">]</span>

<span class="c1">// elastic (commands: 50)</span>
<span class="p">[</span><span class="dl">"</span><span class="s2">aggregate</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">buildinfo</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">collStats</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">count</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">create</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">createIndexes</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">createUser</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">currentOp</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dataSize</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dbStats</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">delete</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">deleteIndexes</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">distinct</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">drop</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropAllUsersFromDatabase</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropDatabase</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropIndexes</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropUser</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">enablesharding</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">endsessions</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">find</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">findandmodify</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getMore</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getcmdlineopts</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getengineversion</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getfreemonitoringstatus</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getlasterror</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getlog</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">grantRolesToUser</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">hello</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">insert</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">isMaster</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">killCursors</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">killOp</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">listCollections</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">listCommands</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">listDatabases</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">listIndexes</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">logout</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">ping</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replsetgetstatus</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">revokeRolesFromUser</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">rolesInfo</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">saslstart</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">serverStatus</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">shardcollection</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">update</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">updateUser</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">usersInfo</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">whatsmyuri</span><span class="dl">"</span><span class="p">]</span>
</pre></table></code></div></div><p>For sake of comparison I setup a sharded cluster using MongoDB 5.0.15 and using <code class="language-plaintext highlighter-rouge">mongosh</code> ran the following command against both a <code class="language-plaintext highlighter-rouge">mongos</code> as well as a <code class="language-plaintext highlighter-rouge">mongod</code>:</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nf">keys</span><span class="p">(</span><span class="nx">db</span><span class="p">.</span><span class="nf">runCommand</span><span class="p">({</span> <span class="na">listCommands</span><span class="p">:</span> <span class="mi">1</span> <span class="p">})[</span><span class="dl">"</span><span class="s2">commands</span><span class="dl">"</span><span class="p">]).</span><span class="nf">filter</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nf">startsWith</span><span class="p">(</span><span class="dl">"</span><span class="s2">_</span><span class="dl">"</span><span class="p">)).</span><span class="nf">sort</span><span class="p">())</span>

<span class="c1">// mongod (commands: 152, unfiltered: 224)</span>
<span class="p">[</span><span class="dl">"</span><span class="s2">abortTransaction</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">aggregate</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">appendOplogNote</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">applyOps</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">authenticate</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">autoSplitVector</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">availableQueryOptions</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">buildInfo</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">checkShardingIndex</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">cleanupOrphaned</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">cloneCollectionAsCapped</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">collMod</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">collStats</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">commitTransaction</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">compact</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">connPoolStats</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">connPoolSync</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">connectionStatus</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">convertToCapped</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">coordinateCommitTransaction</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">count</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">create</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">createIndexes</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">createRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">createUser</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">currentOp</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dataSize</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dbCheck</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dbHash</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dbStats</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">delete</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">distinct</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">donorAbortMigration</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">donorForgetMigration</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">donorStartMigration</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">driverOIDTest</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">drop</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropAllRolesFromDatabase</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropAllUsersFromDatabase</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropConnections</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropDatabase</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropIndexes</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropUser</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">endSessions</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">explain</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">exportCollection</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">features</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">filemd5</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">find</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">findAndModify</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">flushRouterConfig</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">fsync</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">fsyncUnlock</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getAuditConfig</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getCmdLineOpts</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getDatabaseVersion</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getDefaultRWConcern</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getDiagnosticData</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getFreeMonitoringStatus</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getLastError</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getLog</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getMore</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getParameter</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getShardMap</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getShardVersion</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getnonce</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">grantPrivilegesToRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">grantRolesToRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">grantRolesToUser</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">hello</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">hostInfo</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">importCollection</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">insert</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">internalRenameIfOptionsAndIndexesMatch</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">invalidateUserCache</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">isMaster</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">killAllSessions</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">killAllSessionsByPattern</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">killCursors</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">killOp</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">killSessions</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">listCollections</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">listCommands</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">listDatabases</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">listIndexes</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">lockInfo</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">logApplicationMessage</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">logRotate</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">logout</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">mapReduce</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">mergeChunks</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">moveChunk</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">ping</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">planCacheClear</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">planCacheClearFilters</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">planCacheListFilters</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">planCacheSetFilter</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">prepareTransaction</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">profile</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">reIndex</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">recipientForgetMigration</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">recipientSyncData</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">refreshSessions</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">renameCollection</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetAbortPrimaryCatchUp</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetFreeze</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetGetConfig</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetGetRBID</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetGetStatus</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetHeartbeat</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetInitiate</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetMaintenance</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetReconfig</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetRequestVotes</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetResizeOplog</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetStepDown</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetStepUp</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetSyncFrom</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetUpdatePosition</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">revokePrivilegesFromRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">revokeRolesFromRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">revokeRolesFromUser</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">rolesInfo</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">rotateCertificates</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">saslContinue</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">saslStart</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">serverStatus</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">setAuditConfig</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">setDefaultRWConcern</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">setFeatureCompatibilityVersion</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">setIndexCommitQuorum</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">setParameter</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">setShardVersion</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">shardingState</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">shutdown</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">splitChunk</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">splitVector</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">startRecordingTraffic</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">startSession</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">stopRecordingTraffic</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">top</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">update</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">updateRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">updateUser</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">usersInfo</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">validate</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">validateDBMetadata</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">voteCommitImportCollection</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">voteCommitIndexBuild</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">waitForFailPoint</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">whatsmyuri</span><span class="dl">"</span><span class="p">]</span>

<span class="c1">// mongos (commands: 133, unfiltered: 137)</span>
<span class="p">[</span><span class="dl">"</span><span class="s2">abortReshardCollection</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">abortTransaction</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">addShard</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">addShardToZone</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">aggregate</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">appendOplogNote</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">authenticate</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">availableQueryOptions</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">balancerCollectionStatus</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">balancerStart</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">balancerStatus</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">balancerStop</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">buildInfo</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">cleanupReshardCollection</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">clearJumboFlag</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">collMod</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">collStats</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">commitReshardCollection</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">commitTransaction</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">compact</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">connPoolStats</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">connPoolSync</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">connectionStatus</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">convertToCapped</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">count</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">create</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">createIndexes</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">createRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">createUser</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">currentOp</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dataSize</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dbStats</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">delete</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">distinct</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">drop</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropAllRolesFromDatabase</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropAllUsersFromDatabase</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropConnections</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropDatabase</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropIndexes</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropUser</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">enableSharding</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">endSessions</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">explain</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">features</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">filemd5</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">find</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">findAndModify</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">flushRouterConfig</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">fsync</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getAuditConfig</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getCmdLineOpts</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getDefaultRWConcern</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getDiagnosticData</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getLastError</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getLog</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getMore</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getParameter</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getShardMap</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getShardVersion</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getnonce</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">grantPrivilegesToRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">grantRolesToRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">grantRolesToUser</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">hello</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">hostInfo</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">insert</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">invalidateUserCache</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">isMaster</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">isdbgrid</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">killAllSessions</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">killAllSessionsByPattern</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">killCursors</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">killOp</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">killSessions</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">listCollections</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">listCommands</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">listDatabases</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">listIndexes</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">listShards</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">logApplicationMessage</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">logRotate</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">logout</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">mapReduce</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">mergeChunks</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">moveChunk</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">movePrimary</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">netstat</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">ping</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">planCacheClear</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">planCacheClearFilters</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">planCacheListFilters</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">planCacheSetFilter</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">profile</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">refineCollectionShardKey</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">refreshSessions</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">removeShard</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">removeShardFromZone</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">renameCollection</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">repairShardedCollectionChunksHistory</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetGetStatus</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">reshardCollection</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">revokePrivilegesFromRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">revokeRolesFromRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">revokeRolesFromUser</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">rolesInfo</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">rotateCertificates</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">saslContinue</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">saslStart</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">serverStatus</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">setAllowMigrations</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">setAuditConfig</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">setDefaultRWConcern</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">setFeatureCompatibilityVersion</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">setIndexCommitQuorum</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">setParameter</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">shardCollection</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">shutdown</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">split</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">splitVector</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">startRecordingTraffic</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">startSession</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">stopRecordingTraffic</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">update</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">updateRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">updateUser</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">updateZoneKeyRange</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">usersInfo</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">validate</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">validateDBMetadata</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">waitForFailPoint</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">whatsmyuri</span><span class="dl">"</span><span class="p">]</span>
</pre></table></code></div></div><p>The above output filters internal commands (commands prefixed with an underscore), however these are visible to the <code class="language-plaintext highlighter-rouge">listCommands</code> command. As Amazon controls the output of the commands and the source code for this compatibility layer is not public we cannot confirm or deny if any additional commands exist beyond what is listed.</p><h1 id="azure-cosmos-db">Azure Cosmos DB</h1><p><em><a href="https://learn.microsoft.com/en-us/azure/cosmos-db/mongodb/introduction">“What is Azure Cosmos DB for MongoDB”</a></em> you might be asking. From their documentation, <em>Cosmos DB for MongoDB implements the <a href="https://www.mongodb.com/docs/manual/reference/mongodb-wire-protocol/">wire protocol</a> for MongoDB. This implementation allows transparent compatibility with MongoDB client SDKs, drivers, and tools. Azure Cosmos DB doesn’t host the MongoDB database engine. Any MongoDB client driver compatible with the API version you’re using should be able to connect, with no special configuration.</em></p><p>What’s notable about the above claim is <em>“<strong>should</strong> be able to connect”</em>. This type of hedging language is typical of marketing copy that doesn’t want to provide guarantees, but focus on a desired outcome without drawing attention to any of the underlying negative connotations of the statement.</p><p>For example, the <a href="https://www.mongodb.com/docs/manual/reference/command/hello/"><code class="language-plaintext highlighter-rouge">hello</code></a> command was introduced in MongoDB 5.0, but backported to versions 4.4.2, 4.2.10, 4.0.21, and 3.6.21. Cosmos DB currently doesn’t offer 5.0 API compatibility (except in limited preview), given the backport list I’d expect using this command to work. I don’t see it listed in the <a href="https://learn.microsoft.com/en-us/azure/cosmos-db/mongodb/feature-support-42">“Azure Cosmos DB for MongoDB (4.2 server version): supported features and syntax”</a> documentation, however as it’s an internal command (used for initial connections or monitoring) it might have been excluded on purpose.</p><p>If you try and connect to your Cosmos DB cluster using a connection string the includes a <a href="https://www.mongodb.com/docs/manual/reference/stable-api/">Stable API</a> version, the lack of the <code class="language-plaintext highlighter-rouge">hello</code> command will cause the connection to outright fail.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>mongosh ab-cosmosdb1.mongo.cosmos.azure.com:10255 <span class="nt">-u</span> ab-cosmosdb1 <span class="nt">-p</span> &lt;redacted&gt; <span class="nt">--ssl</span> <span class="nt">--sslAllowInvalidCertificates</span> <span class="nt">--apiVersion</span> 1
WARNING: argument <span class="nt">--ssl</span> is deprecated and will be removed. Use <span class="nt">--tls</span> instead.
WARNING: argument <span class="nt">--sslAllowInvalidCertificates</span> is deprecated and will be removed. Use <span class="nt">--tlsAllowInvalidCertificates</span> instead.
Current Mongosh Log ID: 642472c47f4e6cdad20312b0
Connecting to:          mongodb://&lt;credentials&gt;@ab-cosmosdb1.mongo.cosmos.azure.com:10255/?directConnection<span class="o">=</span><span class="nb">true</span>&amp;tls<span class="o">=</span><span class="nb">true</span>&amp;tlsAllowInvalidCertificates<span class="o">=</span><span class="nb">true</span>&amp;appName<span class="o">=</span>mongosh+1.6.0
MongoServerSelectionError: Command hello not supported prior to authentication.
</pre></table></code></div></div><p>Similar to what we did with DocumentDB, let’s try and identify what commands exist in Cosmos DB. Unfortunately, similar to the <code class="language-plaintext highlighter-rouge">hello</code> command it appears <code class="language-plaintext highlighter-rouge">listCommands</code> is also not supported:</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nx">globaldb</span> <span class="p">[</span><span class="nx">direct</span><span class="p">:</span> <span class="nx">primary</span><span class="p">]</span> <span class="nx">test</span><span class="o">&gt;</span> <span class="nx">db</span><span class="p">.</span><span class="nf">runCommand</span><span class="p">({</span> <span class="na">listCommands</span><span class="p">:</span> <span class="mi">1</span> <span class="p">})</span>
<span class="nx">MongoServerError</span><span class="p">:</span> <span class="nx">Command</span> <span class="nx">listCommands</span> <span class="nx">not</span> <span class="nx">supported</span><span class="p">.</span>
</pre></table></code></div></div><p>Since we generated the command list from a <code class="language-plaintext highlighter-rouge">mongod</code> process earlier, let’s assign those results to a variable below and try executing each of the 152 command with a <code class="language-plaintext highlighter-rouge">null</code> value to see how they fail. This can be used to build out a (somewhat) representative view of what commands are available.</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="c1">// commands from 5.0.15 mongod</span>
<span class="kd">var</span> <span class="nx">commands</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">abortTransaction</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">aggregate</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">appendOplogNote</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">applyOps</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">authenticate</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">autoSplitVector</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">availableQueryOptions</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">buildInfo</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">checkShardingIndex</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">cleanupOrphaned</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">cloneCollectionAsCapped</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">collMod</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">collStats</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">commitTransaction</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">compact</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">connPoolStats</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">connPoolSync</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">connectionStatus</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">convertToCapped</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">coordinateCommitTransaction</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">count</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">create</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">createIndexes</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">createRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">createUser</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">currentOp</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dataSize</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dbCheck</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dbHash</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dbStats</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">delete</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">distinct</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">donorAbortMigration</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">donorForgetMigration</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">donorStartMigration</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">driverOIDTest</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">drop</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropAllRolesFromDatabase</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropAllUsersFromDatabase</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropConnections</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropDatabase</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropIndexes</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropUser</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">endSessions</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">explain</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">exportCollection</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">features</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">filemd5</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">find</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">findAndModify</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">flushRouterConfig</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">fsync</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">fsyncUnlock</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getAuditConfig</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getCmdLineOpts</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getDatabaseVersion</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getDefaultRWConcern</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getDiagnosticData</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getFreeMonitoringStatus</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getLastError</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getLog</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getMore</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getParameter</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getShardMap</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getShardVersion</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getnonce</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">grantPrivilegesToRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">grantRolesToRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">grantRolesToUser</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">hello</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">hostInfo</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">importCollection</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">insert</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">internalRenameIfOptionsAndIndexesMatch</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">invalidateUserCache</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">isMaster</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">killAllSessions</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">killAllSessionsByPattern</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">killCursors</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">killOp</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">killSessions</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">listCollections</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">listCommands</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">listDatabases</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">listIndexes</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">lockInfo</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">logApplicationMessage</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">logRotate</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">logout</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">mapReduce</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">mergeChunks</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">moveChunk</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">ping</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">planCacheClear</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">planCacheClearFilters</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">planCacheListFilters</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">planCacheSetFilter</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">prepareTransaction</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">profile</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">reIndex</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">recipientForgetMigration</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">recipientSyncData</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">refreshSessions</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">renameCollection</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetAbortPrimaryCatchUp</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetFreeze</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetGetConfig</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetGetRBID</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetGetStatus</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetHeartbeat</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetInitiate</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetMaintenance</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetReconfig</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetRequestVotes</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetResizeOplog</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetStepDown</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetStepUp</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetSyncFrom</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetUpdatePosition</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">revokePrivilegesFromRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">revokeRolesFromRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">revokeRolesFromUser</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">rolesInfo</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">rotateCertificates</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">saslContinue</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">saslStart</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">serverStatus</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">setAuditConfig</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">setDefaultRWConcern</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">setFeatureCompatibilityVersion</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">setIndexCommitQuorum</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">setParameter</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">setShardVersion</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">shardingState</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">shutdown</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">splitChunk</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">splitVector</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">startRecordingTraffic</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">startSession</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">stopRecordingTraffic</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">top</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">update</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">updateRole</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">updateUser</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">usersInfo</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">validate</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">validateDBMetadata</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">voteCommitImportCollection</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">voteCommitIndexBuild</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">waitForFailPoint</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">whatsmyuri</span><span class="dl">"</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">supported</span> <span class="o">=</span> <span class="p">[];</span>
<span class="nx">commands</span><span class="p">.</span><span class="nf">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">cmd</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="cm">/* command doesn't fail when null is passed */</span>
    <span class="nf">if </span><span class="p">(</span><span class="nx">db</span><span class="p">.</span><span class="nf">runCommand</span><span class="p">({</span> <span class="p">[</span><span class="nx">cmd</span><span class="p">]:</span> <span class="kc">null</span> <span class="p">}).</span><span class="nx">ok</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">supported</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="nx">cmd</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="nf">catch</span><span class="p">(</span><span class="nx">ex</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* 59: command not found */</span>
    <span class="nf">if </span><span class="p">(</span><span class="nx">ex</span><span class="p">.</span><span class="nx">code</span> <span class="o">!=</span> <span class="mi">59</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">ex</span><span class="p">.</span><span class="nx">message</span><span class="p">.</span><span class="nf">endsWith</span><span class="p">(</span><span class="dl">"</span><span class="s2">not supported.</span><span class="dl">"</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">supported</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="nx">cmd</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
<span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">(</span><span class="nx">supported</span><span class="p">);</span>

<span class="c1">// commands: 47</span>
<span class="p">[</span><span class="dl">"</span><span class="s2">abortTransaction</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">aggregate</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">authenticate</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">buildInfo</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">collStats</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">commitTransaction</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">connectionStatus</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">count</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">create</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">createIndexes</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">currentOp</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dbStats</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">delete</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">distinct</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">drop</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropDatabase</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">dropIndexes</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">endSessions</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">explain</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">filemd5</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">find</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">findAndModify</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getCmdLineOpts</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getLastError</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getLog</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getMore</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getParameter</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">getnonce</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">hello</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">hostInfo</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">insert</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">isMaster</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">killCursors</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">listCollections</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">listDatabases</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">listIndexes</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">logout</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">ping</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">reIndex</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">renameCollection</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">replSetGetStatus</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">saslContinue</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">saslStart</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">serverStatus</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">update</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">validate</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">whatsmyuri</span><span class="dl">"</span><span class="p">]</span>
</pre></table></code></div></div><h1 id="conclusion">Conclusion</h1><p>By reviewing the database commands that Microsoft and Amazon have chosen to implement we can get a sense of what features may be accessible via MongoDB drivers. Though the bare minimum commands required to satisfy the CRUD API appear to be available, the feature set is still limited when it comes to administration and data manipulation.</p><p>Azure documents which <a href="https://learn.microsoft.com/en-us/azure/cosmos-db/mongodb/feature-support-42#aggregation-pipeline">aggregation stages</a> aren’t available, and AWS also documents the <a href="https://docs.aws.amazon.com/documentdb/latest/developerguide/mongo-apis.html">limitations of their MongoDB APIs and operation types</a>.</p><p>Though there are definitely benefits to working with AWS and Azure, when it comes to MongoDB compatibility it is likely a better bet to simply use MongoDB.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/mongodb/'>MongoDB</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Comparing MongoDB to not-MongoDB (ex: DocumentDB or Cosmos DB) - ALEX BEVILACQUA&url=https://www.alexbevi.com/blog/2023/03/29/comparing-mongodb-to-not-mongodb-ex-documentdb-or-cosmos-db/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Comparing MongoDB to not-MongoDB (ex: DocumentDB or Cosmos DB) - ALEX BEVILACQUA&u=https://www.alexbevi.com/blog/2023/03/29/comparing-mongodb-to-not-mongodb-ex-documentdb-or-cosmos-db/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Comparing MongoDB to not-MongoDB (ex: DocumentDB or Cosmos DB) - ALEX BEVILACQUA&url=https://www.alexbevi.com/blog/2023/03/29/comparing-mongodb-to-not-mongodb-ex-documentdb-or-cosmos-db/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.alexbevi.com/blog/2023/03/29/comparing-mongodb-to-not-mongodb-ex-documentdb-or-cosmos-db/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <a href="http://service.weibo.com/share/share.php?title=Comparing MongoDB to not-MongoDB (ex: DocumentDB or Cosmos DB) - ALEX BEVILACQUA&url=https://www.alexbevi.com/blog/2023/03/29/comparing-mongodb-to-not-mongodb-ex-documentdb-or-cosmos-db/" data-toggle="tooltip" data-placement="top" title="Weibo" target="_blank" rel="noopener" aria-label="Weibo"> <i class="fa-fw fab fa-weibo"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/blog/2023/04/25/kings-quest-ii/">King's Quest II: Romancing the Throne (Sierra On-Line) - 1985</a><li><a href="/blog/2021/07/28/adventure-games-1980-1999/">Journey into Adventure Games (1980-1999)</a><li><a href="/blog/2021/08/08/adventure-games-1980-1999-sorted-by-score/">Adventure Games (1980-1999): Sorted by Score</a><li><a href="/blog/2023/04/20/countdown/">Countdown (Access Software) - 1990</a><li><a href="/blog/2023/04/11/deja-vu/">Déjà Vu: A Nightmare Comes True (ICOM Simulations) - 1985</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/adventure/">adventure</a> <a class="post-tag" href="/tags/mongodb/">mongodb</a> <a class="post-tag" href="/tags/redmine/">redmine</a> <a class="post-tag" href="/tags/rpg/">rpg</a> <a class="post-tag" href="/tags/book/">book</a> <a class="post-tag" href="/tags/ruby/">ruby</a> <a class="post-tag" href="/tags/sierra-on-line/">Sierra On-Line</a> <a class="post-tag" href="/tags/jrpg/">jrpg</a> <a class="post-tag" href="/tags/snes/">snes</a> <a class="post-tag" href="/tags/linux/">linux</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/blog/2018/05/28/troubleshooting-a-mongodb-performance-issue/"><div class="card-body"> <span class="timeago small" > May 28, 2018 <i class="unloaded">2018-05-28T09:14:03-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Troubleshooting a MongoDB Performance Issue</h3><div class="text-muted small"><p> UPDATE (2018-06-28): I actually sent a link to this article to the author of the previous blog post and in her reply she indicates that the improvements to cache management and checkpoint areas wer...</p></div></div></a></div><div class="card"> <a href="/blog/2020/01/17/current-date-math-in-mongodb-aggregations/"><div class="card-body"> <span class="timeago small" > Jan 17, 2020 <i class="unloaded">2020-01-17T06:30:17-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Current Date Math in MongoDB Aggregations</h3><div class="text-muted small"><p> A challenge that I’ve had in the past while working with my data in MongoDB has been how to incorporate date math into my aggregations. db.foo.insertMany([ { lastUpdated: new Date(new Date().setDa...</p></div></div></a></div><div class="card"> <a href="/blog/2020/01/23/troubleshooting-and-fixing-invariant-failure-featuretracker/"><div class="card-body"> <span class="timeago small" > Jan 23, 2020 <i class="unloaded">2020-01-23T05:34:53-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Troubleshooting and Fixing Invariant Failure !_featureTracker on MongoDB Startup</h3><div class="text-muted small"><p> I recently found myself troubleshooting another MongoDB startup issue due to potential corruption within a WiredTiger file. As I have previously covered this topic (see “Recovering a WiredTiger col...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/blog/2023/03/23/geisha/" class="btn btn-outline-primary" prompt="Older"><p>Geisha (Coktel Vision) - 1990</p></a> <a href="/blog/2023/03/30/i-have-no-mouth-and-i-must-scream/" class="btn btn-outline-primary" prompt="Newer"><p>I Have No Mouth, and I Must Scream (The Dreamers Guild) - 1995</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="text-center text-muted small pb-5"> Loading comments from <a href="https://disqus.com/">Disqus</a> ...</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> const options = { scriptUrl: '//alexbevi.disqus.com/embed.js', disqusConfig: function() { this.page.title = 'Comparing MongoDB to not-MongoDB (ex: DocumentDB or Cosmos DB)'; this.page.url = 'https://www.alexbevi.com/blog/2023/03/29/comparing-mongodb-to-not-mongodb-ex-documentdb-or-cosmos-db/'; this.page.identifier = '/blog/2023/03/29/comparing-mongodb-to-not-mongodb-ex-documentdb-or-cosmos-db/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/alexbevi">Alex Bevilacqua</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/adventure/">adventure</a> <a class="post-tag" href="/tags/mongodb/">mongodb</a> <a class="post-tag" href="/tags/redmine/">redmine</a> <a class="post-tag" href="/tags/rpg/">rpg</a> <a class="post-tag" href="/tags/book/">book</a> <a class="post-tag" href="/tags/ruby/">ruby</a> <a class="post-tag" href="/tags/sierra-on-line/">Sierra On Line</a> <a class="post-tag" href="/tags/jrpg/">jrpg</a> <a class="post-tag" href="/tags/snes/">snes</a> <a class="post-tag" href="/tags/linux/">linux</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://www.alexbevi.com{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script type="text/javascript" src="/assets/js/lightbox.js"></script><link rel="stylesheet" href="/assets/css/lightbox.css">
