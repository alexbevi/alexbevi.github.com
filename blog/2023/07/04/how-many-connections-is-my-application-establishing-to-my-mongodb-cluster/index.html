<!doctype html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="How Many Connections is My Application Establishing to My MongoDB Cluster?" /><meta property="og:locale" content="en" /><meta name="description" content="MongoDB Atlas is the best way to host your MongoDB data, but it’s important to be aware that like any other managed service there can be limitations. For example, MongoDB Atlas - depending on the selected tier - will impose a connection limit." /><meta property="og:description" content="MongoDB Atlas is the best way to host your MongoDB data, but it’s important to be aware that like any other managed service there can be limitations. For example, MongoDB Atlas - depending on the selected tier - will impose a connection limit." /><link rel="canonical" href="https://www.alexbevi.com/blog/2023/07/04/how-many-connections-is-my-application-establishing-to-my-mongodb-cluster/" /><meta property="og:url" content="https://www.alexbevi.com/blog/2023/07/04/how-many-connections-is-my-application-establishing-to-my-mongodb-cluster/" /><meta property="og:site_name" content="ALEX BEVILACQUA" /><meta property="og:image" content="https://www.alexbevi.com/images/mongodb-logo.png" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-07-04T10:16:14-04:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://www.alexbevi.com/images/mongodb-logo.png" /><meta property="twitter:title" content="How Many Connections is My Application Establishing to My MongoDB Cluster?" /><meta name="twitter:site" content="@alexbevi" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-07-26T15:29:12-04:00","datePublished":"2023-07-04T10:16:14-04:00","description":"MongoDB Atlas is the best way to host your MongoDB data, but it’s important to be aware that like any other managed service there can be limitations. For example, MongoDB Atlas - depending on the selected tier - will impose a connection limit.","headline":"How Many Connections is My Application Establishing to My MongoDB Cluster?","image":"https://www.alexbevi.com/images/mongodb-logo.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.alexbevi.com/blog/2023/07/04/how-many-connections-is-my-application-establishing-to-my-mongodb-cluster/"},"url":"https://www.alexbevi.com/blog/2023/07/04/how-many-connections-is-my-application-establishing-to-my-mongodb-cluster/"}</script><title>How Many Connections is My Application Establishing to My MongoDB Cluster? | ALEX BEVILACQUA</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ALEX BEVILACQUA"><meta name="application-name" content="ALEX BEVILACQUA"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="stylesheet" href="/assets/lib/fonts/main.css"><link rel="stylesheet" href="/assets/lib/bootstrap/bootstrap.min.css"><link rel="stylesheet" href="/assets/lib/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="/assets/lib/tocbot/tocbot.min.css"><link rel="stylesheet" href="/assets/lib/magnific-popup/magnific-popup.css"> <script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/lightgallery.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/plugins/zoom/lg-zoom.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/css/lightgallery-bundle.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/css/lg-transitions.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/css/lg-zoom.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/css/lg-thumbnail.min.css" rel="stylesheet"><style> .inline-gallery-container { width: 100%; // set 60% height height: 0; padding-bottom: 65%; }</style><body><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"> <img src="/images/avatar.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'"> </a><div class="site-title"> <a href="/">ALEX BEVILACQUA</a></div><div class="site-subtitle fst-italic">my little corner of the interwebs</div></div><ul class="nav flex-column flex-grow-1 w-100 ps-0"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <a href="https://github.com/alexbevi " aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://twitter.com/alexbevi " aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['alex','alexbevi.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a> <a href="@alexbevi@ruby.social" aria-label="mastodon" target="_blank" rel="noopener noreferrer me" > <i class="fab fa-mastodon"></i> </a> <a href="https://linkedin.com/in/alexbevi" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="https://stackoverflow.com/users/195509" aria-label="stack-overflow" target="_blank" rel="noopener noreferrer" > <i class="fab fa-stack-overflow"></i> </a> <a href="https://www.facebook.com/alexbevi" aria-label="facebook" target="_blank" rel="noopener noreferrer" > <i class="fab fa-facebook"></i> </a> <a href="https://reddit.com/user/alexbevi" aria-label="reddit" target="_blank" rel="noopener noreferrer" > <i class="fab fa-reddit"></i> </a></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container px-xxl-5"><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100" > <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>How Many Connections is My Application Establishing to My MongoDB Cluster?</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </span> <span id="search-cancel">Cancel</span></div></div><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pe-xl-4"><div class="post px-1 px-md-2"><h1 data-toc-skip>How Many Connections is My Application Establishing to My MongoDB Cluster?</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1688480174" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jul 4, 2023 </em> </span> <span> Updated <em class="" data-ts="1690399752" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jul 26, 2023 </em> </span><div class="mt-3 mb-3"> <a href="/images/mongodb-logo.png" class="popup img-link preview-img shimmer"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 630'%3E%3C/svg%3E" data-src="/images/mongodb-logo.png" alt="Preview Image" width="1200" height="630" class="lazyload" data-proofer-ignore></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/alexbevi">Alex Bevilacqua</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1020 words" > <em>5 min</em> read </span></div></div></div><div class="post-content"><p><a href="https://www.mongodb.com/atlas/database">MongoDB Atlas</a> is the best way to host your MongoDB data, but it’s important to be aware that like any other managed service there can be limitations. For example, MongoDB Atlas - depending on the selected tier - will impose a <a href="https://www.mongodb.com/docs/atlas/reference/atlas-limits/#connection-limits-and-cluster-tier">connection limit</a>.</p><p>Depending on the architecture of your application and how you’ve configured your <a href="https://www.mongodb.com/docs/manual/administration/connection-pool-overview/">connection pools</a> it’s possible you’ve approached or exceeded these limits before and weren’t really sure why. Thankfully MongoDB Atlas provides a number of configurable alerts (such as <a href="https://www.mongodb.com/docs/atlas/reference/alert-conditions/#mongodb-alert-Connections---of-configured-limit-is"><code class="language-plaintext highlighter-rouge">Connections % of configured limit</code></a>) which can notify you if you’re approaching a limit, but where are these connections coming from in the first place?</p><h2 id="mongodb-drivers"><span class="me-2">MongoDB Drivers</span><a href="#mongodb-drivers" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Your application has been built using one of <a href="https://www.mongodb.com/docs/drivers/">MongoDB’s Drivers</a>, which are all built according to a number of <a href="https://github.com/mongodb/specifications">published specifications</a>. Most noteworthy when it comes to how many connections an application may establish to a MongoDB cluster are the <a href="https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-monitoring.rst">Server Monitoring</a> and <a href="https://github.com/mongodb/specifications/blob/master/source/connection-monitoring-and-pooling/connection-monitoring-and-pooling.rst">Connection Monitoring and Pooling</a> (CMAP) specifications.</p><p>These specifications help us understand how many connections may be opened, and what variables we should be aware of that can affect these connections such as:</p><ul><li>Is the MongoClient single-threaded or multi-threaded<li>The MongoDB Server version (&gt;= 4.4)<li>The MongoDB Driver version (does it support MongoDB Server 4.4+)</ul><p>Just a quick note regarding <em>Connection Pools</em>: the default value of <a href="https://github.com/mongodb/specifications/blob/master/source/connection-monitoring-and-pooling/connection-monitoring-and-pooling.rst#id1"><code class="language-plaintext highlighter-rouge">minPoolSize</code></a> is <code class="language-plaintext highlighter-rouge">0</code>, which means that using the defaults when a <em>Connection Pool</em> is created it will not contain any connections. For the purposes of this article I imply that at least one connection has been created in the pool and ready for use.</p><h3 id="single-threaded-mongoclient"><span class="me-2">Single-Threaded <code class="language-plaintext highlighter-rouge">MongoClient</code></span><a href="#single-threaded-mongoclient" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The MongoDB <a href="https://www.mongodb.com/docs/drivers/c/">C Driver</a> and <a href="https://www.mongodb.com/docs/drivers/php/">PHP Driver</a> provide single-threaded <code class="language-plaintext highlighter-rouge">MongoClient</code> implementations. As such, they do not offer connection pools at all which makes understanding how many connections can be established straightforward<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup>.</p><p><a href="/images/mongo-conns-01.png" class="popup img-link "><img data-src="/images/mongo-conns-01.png" alt="" class="lazyload" data-proofer-ignore></a> <em>Connections from a Single Threaded <code class="language-plaintext highlighter-rouge">MongoClient</code></em></p><p>With this configuration, a single connection (<code class="language-plaintext highlighter-rouge">c1</code>) will be established to each <a href="https://www.mongodb.com/docs/manual/core/replica-set-members/">replica set member</a>, or if the cluster is <a href="https://www.mongodb.com/docs/manual/sharding/">Sharded</a> each <a href="https://www.mongodb.com/docs/manual/core/sharded-cluster-query-router/"><code class="language-plaintext highlighter-rouge">mongos</code></a> present in the seed list when the <code class="language-plaintext highlighter-rouge">MongoClient</code> was created<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup>. This single connection will be used for data operations as well as to perform <a href="https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-monitoring.rst#single-threaded-monitoring">server monitoring</a>.</p><blockquote class="prompt-tip"><p>Note that when connecting to a Sharded Cluster using a <a href="https://www.mongodb.com/docs/manual/reference/connection-string/#dns-seed-list-connection-format">DNS Seed List</a> connection string, the <a href="https://github.com/mongodb/specifications/blob/master/source/initial-dns-seedlist-discovery/initial-dns-seedlist-discovery.rst#srvmaxhosts"><code class="language-plaintext highlighter-rouge">srvMaxHosts</code></a> URI option can be configured to limit the number of <code class="language-plaintext highlighter-rouge">mongos</code>’ that will be connected to.</p></blockquote><blockquote class="prompt-info"><p>Assuming a cluster with 3 nodes, each <code class="language-plaintext highlighter-rouge">MongoClient</code> instance would create 3 connections.</p></blockquote><h3 id="mongodb-server-42-and-earlier-polling-monitoring"><span class="me-2">MongoDB Server 4.2 and earlier (Polling Monitoring)</span><a href="#mongodb-server-42-and-earlier-polling-monitoring" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Prior to MongoDB 4.4, MongoDB Drivers would use a <a href="https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-monitoring.rst#polling-protocol">polling protocol to perform server monitoring</a>. This process would involve opening a dedicated <a href="https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-monitoring.rst#monitor-thread">monitor thread</a> per host, which would be polled (by default<sup id="fnref:3" role="doc-noteref"><a href="#fn:3" class="footnote" rel="footnote">3</a></sup>) every 10 seconds (multi-threaded) or 60 seconds (single-threaded) to determine if the state of the host or cluster topology had changed.</p><p><a href="/images/mongo-conns-02.png" class="popup img-link "><img data-src="/images/mongo-conns-02.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>This dedicated monitor thread (<code class="language-plaintext highlighter-rouge">m1</code>) as well as a the 1 or more connections in the connection pool (<code class="language-plaintext highlighter-rouge">p1</code>) result in at least 2 connections per host. Note that if <a href="https://www.mongodb.com/docs/manual/reference/connection-string/#mongodb-urioption-urioption.minPoolSize"><code class="language-plaintext highlighter-rouge">minPoolSize</code></a> (default: 0) is &gt; 1 this number of connections will <em>always</em> remain open against each host a connection pool has been created for.</p><blockquote class="prompt-info"><p>Assuming a cluster with 3 nodes, each <code class="language-plaintext highlighter-rouge">MongoClient</code> instance would create 6 connections.</p></blockquote><blockquote class="prompt-tip"><p>If <code class="language-plaintext highlighter-rouge">minPoolSize=5</code> then each <code class="language-plaintext highlighter-rouge">MongoClient</code> would create 18 connections (using the formula <code class="language-plaintext highlighter-rouge">(minPoolSize + 1) x nodes</code>)</p></blockquote><h3 id="mongodb-server-44-and-later-streaming-monitoring"><span class="me-2">MongoDB Server 4.4 and later (Streaming Monitoring)</span><a href="#mongodb-server-44-and-later-streaming-monitoring" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Starting with MongoDB 4.4, MongoDB Drivers would begin using a <a href="https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-monitoring.rst#streaming-protocol">streaming protocol to perform server monitoring</a> - assuming those Drivers were compatible with MongoDB 4.4. The goal of this new protocol was to ensure connected applications could discover topology changes in as close to realtime as possible.</p><p>As the polling protocol only polled at fixed intervals, it was possible for topology changes to go undiscovered for upwards of 10 seconds. The streaming protocol would “push” updates from the server to the clients, as opposed to the previous “pull” model, which allowed applications to update their view of the cluster far more quickly.</p><p><a href="/images/mongo-conns-03.png" class="popup img-link "><img data-src="/images/mongo-conns-03.png" alt="" class="lazyload" data-proofer-ignore></a></p><p>Similar to the polling protocol, a dedicated monitor thread (<code class="language-plaintext highlighter-rouge">m1</code>) will be opened per host, as well as 1 or more connections in the connection pool (<code class="language-plaintext highlighter-rouge">p1</code>). Further to these connections though a third connection (<code class="language-plaintext highlighter-rouge">r1</code>) is opened per node for <a href="https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-monitoring.rst#measuring-rtt">measuring RTT</a> (round trip time). This is needed as the monitor thread is open and listening once established, and will only receive updates from the server as they occur. Measuring RTT require the measurement of the time taken for an operation to travel from the client to the server and back, which the streaming monitor no longer provides.</p><blockquote class="prompt-info"><p>Assuming a cluster with 3 nodes, each <code class="language-plaintext highlighter-rouge">MongoClient</code> instance would create 9 connections.</p></blockquote><blockquote class="prompt-tip"><p>If <code class="language-plaintext highlighter-rouge">minPoolSize=5</code> then each <code class="language-plaintext highlighter-rouge">MongoClient</code> would create 21 connections (using the formula <code class="language-plaintext highlighter-rouge">(minPoolSize + 2) x nodes</code>)</p></blockquote><h2 id="what-if-im-using-aws-lambda"><span class="me-2">What if I’m using AWS Lambda?</span><a href="#what-if-im-using-aws-lambda" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Depending on your application’s architecture, it’s possible to blow past your connection limits pretty quickly. This is one reason why the documented guidance for <a href="https://www.mongodb.com/docs/atlas/manage-connections-aws-lambda/">managing connections with AWS Lambda</a> has the first bullet point of <em>“Define the client to the MongoDB server outside the <a href="http://docs.aws.amazon.com/lambda/latest/dg/nodejs-prog-model-handler.html">AWS Lambda handler function</a>“</em>.</p><p>If each Lambda function were to connect to a MongoDB 4.4+ cluster using a connection string of <code class="language-plaintext highlighter-rouge">mongodb+srv://xxx.mongodb.net/?minPoolSize=5</code> and the cluster only had 3000 connections configured, within 150 near-concurrent function executions the cluster could potentially reach the connection limit! This is obviously an extreme scenario, but is meant to help illustrate the impact creating many <code class="language-plaintext highlighter-rouge">MongoClient</code> instances can potentially have on your cluster.</p><h2 id="i-plan-on-going-into-much-more-detail-regarding-aws-lambda-and-mongodb-connection-behavior-in-a-future-article"><span class="me-2">I plan on going into much more detail regarding AWS Lambda and MongoDB connection behavior in a future article.</span><a href="#i-plan-on-going-into-much-more-detail-regarding-aws-lambda-and-mongodb-connection-behavior-in-a-future-article" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="footnotes" role="doc-endnotes"><ol><li id="fn:1" role="doc-endnote"><p><small>The MongoDB C driver has two connection modes: single-threaded and <a href="https://mongoc.org/libmongoc/current/connection-pooling.html#pooled-mode">pooled</a>. Single-threaded mode is optimized for embedding the driver within languages like PHP. Multi-threaded programs should use pooled mode: this mode minimizes the total connection count, and in pooled mode background threads monitor the MongoDB server topology, so the program need not block to scan it.</small> <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p><li id="fn:2" role="doc-endnote"><p><small><code class="language-plaintext highlighter-rouge">MongoClient</code>s created using a <a href="https://www.mongodb.com/docs/manual/reference/connection-string/#dns-seed-list-connection-format">DNS Seed List</a> connection string can <a href="https://github.com/mongodb/specifications/blob/master/source/polling-srv-records-for-mongos-discovery/polling-srv-records-for-mongos-discovery.rst">poll the <code class="language-plaintext highlighter-rouge">SRV</code> record to discover additional <code class="language-plaintext highlighter-rouge">mongos</code>’</a></small> <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p><li id="fn:3" role="doc-endnote"><p><small>Polling interval can be configured via the <a href="https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-monitoring.rst#heartbeatfrequencyms"><code class="language-plaintext highlighter-rouge">heartbeatFrequencyMS</code></a> URI option, but must be more than the <a href="https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-monitoring.rst#minheartbeatfrequencyms"><code class="language-plaintext highlighter-rouge">minHeartbeatFrequencyMS</code></a> of 500ms. In MongoDB Atlas environments the <code class="language-plaintext highlighter-rouge">heartbeatFrequencyMS</code> is lowered from the default (10000) to 5000.</small> <a href="#fnref:3" class="reversefootnote" role="doc-backlink">&#8617;</a></p></ol></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href='/categories/mongodb/'>MongoDB</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/mongodb/" class="post-tag no-text-decoration" >mongodb</a> <a href="/tags/connections/" class="post-tag no-text-decoration" >connections</a> <a href="/tags/drivers/" class="post-tag no-text-decoration" >drivers</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted me-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=How%20Many%20Connections%20is%20My%20Application%20Establishing%20to%20My%20MongoDB%20Cluster?%20-%20ALEX%20BEVILACQUA&url=https%3A%2F%2Fwww.alexbevi.com%2Fblog%2F2023%2F07%2F04%2Fhow-many-connections-is-my-application-establishing-to-my-mongodb-cluster%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter" > <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=How%20Many%20Connections%20is%20My%20Application%20Establishing%20to%20My%20MongoDB%20Cluster?%20-%20ALEX%20BEVILACQUA&u=https%3A%2F%2Fwww.alexbevi.com%2Fblog%2F2023%2F07%2F04%2Fhow-many-connections-is-my-application-establishing-to-my-mongodb-cluster%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook" > <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fwww.alexbevi.com%2Fblog%2F2023%2F07%2F04%2Fhow-many-connections-is-my-application-establishing-to-my-mongodb-cluster%2F&text=How%20Many%20Connections%20is%20My%20Application%20Establishing%20to%20My%20MongoDB%20Cluster?%20-%20ALEX%20BEVILACQUA" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram" > <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fwww.alexbevi.com%2Fblog%2F2023%2F07%2F04%2Fhow-many-connections-is-my-application-establishing-to-my-mongodb-cluster%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin" > <i class="fa-fw fab fa-linkedin"></i> </a> <a href="http://service.weibo.com/share/share.php?title=How%20Many%20Connections%20is%20My%20Application%20Establishing%20to%20My%20MongoDB%20Cluster?%20-%20ALEX%20BEVILACQUA&url=https%3A%2F%2Fwww.alexbevi.com%2Fblog%2F2023%2F07%2F04%2Fhow-many-connections-is-my-application-establishing-to-my-mongodb-cluster%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Weibo" target="_blank" rel="noopener" aria-label="Weibo" > <i class="fa-fw fab fa-weibo"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/blog/2021/07/28/adventure-games-1980-1999/">Let's Adventure! A Journey into Adventure Games (1980-1999)</a><li class="text-truncate lh-lg"> <a href="/blog/2021/08/08/adventure-games-1980-1999-sorted-by-score/">Let's Adventure! Reviewed Games Sorted by Score</a><li class="text-truncate lh-lg"> <a href="/blog/2023/06/28/snatcher/">Snatcher (Konami) - 1988</a><li class="text-truncate lh-lg"> <a href="/blog/2012/11/02/developer-braindump-tony-tough-and-the-night-of-the-roasted-moths/">Developer Braindump: Tony Tough and the Night of the Roasted Moths</a><li class="text-truncate lh-lg"> <a href="/blog/2023/07/31/tony-tough/">Tony Tough and the Night of Roasted Moths (Nayma Software, Prograph Research S.r.l.) - 1999</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/adventure/">adventure</a> <a class="post-tag btn btn-outline-primary" href="/tags/mongodb/">mongodb</a> <a class="post-tag btn btn-outline-primary" href="/tags/redmine/">redmine</a> <a class="post-tag btn btn-outline-primary" href="/tags/rpg/">rpg</a> <a class="post-tag btn btn-outline-primary" href="/tags/sierra-on-line/">Sierra On-Line</a> <a class="post-tag btn btn-outline-primary" href="/tags/ruby/">ruby</a> <a class="post-tag btn btn-outline-primary" href="/tags/book/">book</a> <a class="post-tag btn btn-outline-primary" href="/tags/jrpg/">jrpg</a> <a class="post-tag btn btn-outline-primary" href="/tags/snes/">snes</a> <a class="post-tag btn btn-outline-primary" href="/tags/drivers/">drivers</a></div></div></div><div id="toc-wrapper" class="ps-0 pe-4 mb-5"><div class="panel-heading ps-3 pt-2 mb-2">Contents</div><nav id="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-3 pe-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ms-1" data-toc-skip> Further Reading</h3><div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><div class="col"> <a href="/blog/2023/05/04/round-trips-to-authenticate-a-mongodb-client-connection/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1683225652" data-df="ll" > May 4, 2023 </em><h4 class="pt-0 my-2" data-toc-skip>Round Trips to Authenticate a MongoDB Client Connection</h4><div class="text-muted small"><p> When MongoDB Drivers establish a connection with a MongoDB cluster a number of network round trips are performed. This can result in increased latency when measuring the time to response of an oper...</p></div></div></a></div><div class="col"> <a href="/blog/2021/12/23/mongodb-driver-specifications/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1640272099" data-df="ll" > Dec 23, 2021 </em><h4 class="pt-0 my-2" data-toc-skip>MongoDB Driver Specifications</h4><div class="text-muted small"><p> To ensure official MongoDB Drivers are developed with consistent functionality and APIs MongoDB maintains a set of public specifications (see GitHub Repository) that driver engineers can reference ...</p></div></div></a></div><div class="col"> <a href="/blog/2022/05/15/mongodb-driver-monitoring/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1652617629" data-df="ll" > May 15, 2022 </em><h4 class="pt-0 my-2" data-toc-skip>MongoDB Driver Monitoring</h4><div class="text-muted small"><p> One of the great things about MongoDB Drivers is that they are all built around a common set of specifications. Though these specifications exist to facilitate the development of new language drive...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/blog/2023/06/28/snatcher/" class="btn btn-outline-primary" prompt="Older" ><p>Snatcher (Konami) - 1988</p></a> <a href="/blog/2023/07/31/tony-tough/" class="btn btn-outline-primary" prompt="Newer" ><p>Tony Tough and the Night of Roasted Moths (Nayma Software, Prograph Research S.r.l.) - 1999</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small">Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://www.alexbevi.com/blog/2023/07/04/how-many-connections-is-my-application-establishing-to-my-mongodb-cluster/'; this.page.identifier = '/blog/2023/07/04/how-many-connections-is-my-application-establishing-to-my-mongodb-cluster/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver( function (entries) { if (entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://alexbevi.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] } ); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* Disqus hasn't been loaded */ if (typeof DISQUS === 'undefined') { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } } if (document.querySelector('.mode-toggle')) { window.addEventListener('message', reloadDisqus); } </script></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/adventure/">adventure</a> <a class="post-tag btn btn-outline-primary" href="/tags/mongodb/">mongodb</a> <a class="post-tag btn btn-outline-primary" href="/tags/redmine/">redmine</a> <a class="post-tag btn btn-outline-primary" href="/tags/rpg/">rpg</a> <a class="post-tag btn btn-outline-primary" href="/tags/sierra-on-line/">Sierra On-Line</a> <a class="post-tag btn btn-outline-primary" href="/tags/ruby/">ruby</a> <a class="post-tag btn btn-outline-primary" href="/tags/book/">book</a> <a class="post-tag btn btn-outline-primary" href="/tags/jrpg/">jrpg</a> <a class="post-tag btn btn-outline-primary" href="/tags/snes/">snes</a> <a class="post-tag btn btn-outline-primary" href="/tags/drivers/">drivers</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div></div><footer><div class="container px-lg-4"><div class="d-flex justify-content-center align-items-center text-muted mx-md-3"><p>Using the <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> theme <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a></p><p>© 2023 <a href="https://twitter.com/alexbevi">Alex Bevilacqua</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p></div></div></footer><div id="mask"></div><button id="back-to-top" aria-label="back-to-top" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="/assets/lib/jquery/jquery.min.js"></script> <script src="/assets/lib/bootstrap/bootstrap.bundle.min.js"></script> <script src="/assets/lib/simple-jekyll-search/simple-jekyll-search.min.js"></script> <script src="/assets/lib/lazysizes/lazysizes.min.js"></script> <script src="/assets/lib/magnific-popup/jquery.magnific-popup.min.js"></script> <script src="/assets/lib/clipboard/clipboard.min.js"></script> <script src="/assets/lib/dayjs/dayjs.min.js"></script> <script src="/assets/lib/dayjs/locale/en.min.js"></script> <script src="/assets/lib/dayjs/plugin/relativeTime.min.js"></script> <script src="/assets/lib/dayjs/plugin/localizedFormat.min.js"></script> <script src="/assets/lib/tocbot/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script> /* Note: dependent library will be loaded in `js-selector.html` */ SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="px-1 px-sm-2 px-lg-4 px-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
