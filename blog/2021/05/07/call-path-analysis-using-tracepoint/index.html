<!DOCTYPE html><html lang="en-US" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Ruby Call Path Analysis using TracePoint" /><meta name="author" content="Alex Bevilacqua" /><meta property="og:locale" content="en_US" /><meta name="description" content="During a recent diagnostic analysis exercise I needed to identify if there was additional “work” being done based on a single option being changed. As Ruby offers numerous productivity tools for developers it should come as no surprise that a mechanism to easily produce a full call stack for one to many operations exists." /><meta property="og:description" content="During a recent diagnostic analysis exercise I needed to identify if there was additional “work” being done based on a single option being changed. As Ruby offers numerous productivity tools for developers it should come as no surprise that a mechanism to easily produce a full call stack for one to many operations exists." /><link rel="canonical" href="https://www.alexbevi.com/blog/2021/05/07/call-path-analysis-using-tracepoint/" /><meta property="og:url" content="https://www.alexbevi.com/blog/2021/05/07/call-path-analysis-using-tracepoint/" /><meta property="og:site_name" content="ALEX BEVILACQUA" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-05-07T09:56:11-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Ruby Call Path Analysis using TracePoint" /><meta name="twitter:site" content="@alexbevi" /><meta name="twitter:creator" content="@Alex Bevilacqua" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Alex Bevilacqua"},"dateModified":"2022-07-04T14:47:40-04:00","datePublished":"2021-05-07T09:56:11-04:00","description":"During a recent diagnostic analysis exercise I needed to identify if there was additional “work” being done based on a single option being changed. As Ruby offers numerous productivity tools for developers it should come as no surprise that a mechanism to easily produce a full call stack for one to many operations exists.","headline":"Ruby Call Path Analysis using TracePoint","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.alexbevi.com/blog/2021/05/07/call-path-analysis-using-tracepoint/"},"url":"https://www.alexbevi.com/blog/2021/05/07/call-path-analysis-using-tracepoint/"}</script><title>Ruby Call Path Analysis using TracePoint | ALEX BEVILACQUA</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-36490021-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-36490021-1'); }); </script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6215800856413580" crossorigin="anonymous"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/lightgallery.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/plugins/zoom/lg-zoom.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/css/lightgallery-bundle.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/css/lg-transitions.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/css/lg-zoom.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/css/lg-thumbnail.min.css" rel="stylesheet"><style> .inline-gallery-container { width: 100%; // set 60% height height: 0; padding-bottom: 65%; }</style><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /images/avatar.png " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">ALEX BEVILACQUA</a></div><div class="site-subtitle font-italic">my little corner of the interwebs</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href=" https://github.com/alexbevi " aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href=" https://twitter.com/alexbevi " aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['alex','alexbevi.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href=" /feed.xml " aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <a href=" https://linkedin.com/in/alexbevi " aria-label="linkedin" class="order-7" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" https://stackoverflow.com/users/195509 " aria-label="stack-overflow" class="order-8" target="_blank" rel="noopener"> <i class="fab fa-stack-overflow"></i> </a> <a href=" https://www.facebook.com/alexbevi " aria-label="facebook" class="order-9" target="_blank" rel="noopener"> <i class="fab fa-facebook"></i> </a> <a href=" https://reddit.com/user/alexbevi " aria-label="reddit" class="order-10" target="_blank" rel="noopener"> <i class="fab fa-reddit"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> Blog </span> <span> 2021 </span> <span> 05 </span> <span> 07 </span> <span>Ruby Call Path Analysis using TracePoint</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Ruby Call Path Analysis using TracePoint</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Fri, May 7, 2021, 9:56 AM -0400" > May 7, 2021 <i class="unloaded">2021-05-07T09:56:11-04:00</i> </span> by <span class="author"> Alex Bevilacqua </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Mon, Jul 4, 2022, 2:47 PM -0400" > Jul 4, 2022 <i class="unloaded">2022-07-04T14:47:40-04:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="424 words">2 min</span></div></div><div class="post-content"><p>During a recent diagnostic analysis exercise I needed to identify if there was additional “work” being done based on a single option being changed. As Ruby offers numerous productivity tools for developers it should come as no surprise that a mechanism to easily produce a full call stack for one to many operations exists.</p><p>The code below is using the <a href="https://docs.mongodb.com/ruby-driver/master/">MongoDB Ruby Driver</a> and <a href="https://docs.mongodb.com/mongoid/current/">Mongoid ODM</a> to <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/sample/"><code class="language-plaintext highlighter-rouge">$sample</code></a> a single document with a <a href="https://docs.mongodb.com/manual/core/read-preference">Read Preference</a> passed in from the command line. The collection likely won’t exist however the goal of this analysis was simply to see what differences changing the read preference would expose.</p><p>For the purposes of my analysis I wanted to produce a <a href="https://en.wikipedia.org/wiki/Diff">diff</a> of two call stacks to try and see “where” there may be a difference in the amount of “work” being performed. To do this the first step was to introduce instrumentation via a <a href="https://ruby-doc.org/core-2.7.0/TracePoint.html">TracePoint</a>.</p><div class="language-ruby highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre><td class="rouge-code"><pre><span class="c1"># test.rb</span>
<span class="c1"># ruby test.rb [primary|secondary]</span>
<span class="nb">require</span> <span class="s1">'bundler/inline'</span>
<span class="n">gemfile</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s1">'https://rubygems.org'</span>

  <span class="n">gem</span> <span class="s1">'mongoid'</span><span class="p">,</span> <span class="s1">'7.0.4'</span>
  <span class="n">gem</span> <span class="s1">'mongo'</span><span class="p">,</span> <span class="s1">'2.11.1'</span>
<span class="k">end</span>

<span class="no">Mongoid</span><span class="p">.</span><span class="nf">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">clients</span><span class="p">.</span><span class="nf">default</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">uri: </span><span class="s2">"mongodb+srv://..."</span> <span class="p">}</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Sample</span>
  <span class="kp">include</span> <span class="no">Mongoid</span><span class="o">::</span><span class="no">Document</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">with_tracepoint</span>
  <span class="n">trace</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="n">tp</span> <span class="o">=</span> <span class="no">TracePoint</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">:call</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span>
    <span class="n">trace</span> <span class="o">&lt;&lt;</span> <span class="s2">"</span><span class="si">#{</span><span class="n">x</span><span class="p">.</span><span class="nf">defined_class</span><span class="si">}</span><span class="s2">#</span><span class="si">#{</span><span class="n">x</span><span class="p">.</span><span class="nf">method_id</span><span class="p">.</span><span class="nf">to_s</span><span class="si">}</span><span class="s2"> @ </span><span class="si">#{</span><span class="n">x</span><span class="p">.</span><span class="nf">path</span><span class="si">}</span><span class="s2">"</span>
  <span class="k">end</span>
  <span class="n">tp</span><span class="p">.</span><span class="nf">enable</span>
  <span class="k">yield</span>
  <span class="k">return</span> <span class="n">trace</span>
<span class="k">ensure</span>
  <span class="n">tp</span><span class="p">.</span><span class="nf">disable</span> <span class="k">unless</span> <span class="n">tp</span><span class="p">.</span><span class="nf">nil?</span>
<span class="k">end</span>

<span class="c1"># first argument to symbol</span>
<span class="n">read_pref</span> <span class="o">=</span> <span class="no">ARGV</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nf">nil?</span> <span class="p">?</span> <span class="ss">:primary</span> <span class="p">:</span> <span class="no">ARGV</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nf">to_sym</span>
<span class="c1"># run first command to establish a connection</span>
<span class="no">Sample</span><span class="p">.</span><span class="nf">collection</span><span class="p">.</span><span class="nf">aggregate</span><span class="p">([{</span> <span class="ss">:'$sample'</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="ss">size: </span><span class="mi">1</span> <span class="p">}</span> <span class="p">}],</span> <span class="ss">read: </span><span class="p">{</span> <span class="ss">mode: </span><span class="n">read_pref</span> <span class="p">}).</span><span class="nf">first</span>
<span class="n">trace</span> <span class="o">=</span> <span class="n">with_tracepoint</span> <span class="k">do</span>
  <span class="no">Sample</span><span class="p">.</span><span class="nf">collection</span><span class="p">.</span><span class="nf">aggregate</span><span class="p">([{</span> <span class="ss">:'$sample'</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="ss">size: </span><span class="mi">1</span> <span class="p">}</span> <span class="p">}],</span> <span class="ss">read: </span><span class="p">{</span> <span class="ss">mode: </span><span class="n">read_pref</span> <span class="p">}).</span><span class="nf">first</span>
<span class="k">end</span>

<span class="nb">puts</span> <span class="n">trace</span>
</pre></table></code></div></div><p>The above will trace all Ruby method calls executed within the block and push them into an array. By running the above script twice with different options and feeding the results into a <code class="language-plaintext highlighter-rouge">diff</code> tool (such as <a href="https://www.jefftk.com/icdiff"><code class="language-plaintext highlighter-rouge">icdiff</code></a>) a visual representation of how the call stacks differ can be generated.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>icdiff <span class="nt">-N</span> &lt;<span class="o">(</span>ruby test.rb primary<span class="o">)</span> &lt;<span class="o">(</span>ruby test.rb secondary<span class="o">)</span> | less
</pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/images/ruby-diff-tp.png" alt="" /></p><p>(Open screenshot in a new tab to get a better look)</p><p>The <code class="language-plaintext highlighter-rouge">with_tracepoint</code> helper method in the script above is only filtering on <code class="language-plaintext highlighter-rouge">:call</code>s, however can easily be modified to filter based on your particular needs (see <a href="https://ruby-doc.org/core-2.7.0/TracePoint.html#class-TracePoint-label-Events">TracePoint Events</a> for the full list).</p><p>Let me know if this approach helped you troubleshoot a particular issue or identify an interesting defect.</p><p>Happy Coding!</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/programming/'>Programming</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/ruby/" class="post-tag no-text-decoration" >ruby</a> <a href="/tags/mongodb/" class="post-tag no-text-decoration" >mongodb</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Ruby Call Path Analysis using TracePoint - ALEX BEVILACQUA&url=https://www.alexbevi.com/blog/2021/05/07/call-path-analysis-using-tracepoint/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Ruby Call Path Analysis using TracePoint - ALEX BEVILACQUA&u=https://www.alexbevi.com/blog/2021/05/07/call-path-analysis-using-tracepoint/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Ruby Call Path Analysis using TracePoint - ALEX BEVILACQUA&url=https://www.alexbevi.com/blog/2021/05/07/call-path-analysis-using-tracepoint/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.alexbevi.com/blog/2021/05/07/call-path-analysis-using-tracepoint/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <a href="http://service.weibo.com/share/share.php?title=Ruby Call Path Analysis using TracePoint - ALEX BEVILACQUA&url=https://www.alexbevi.com/blog/2021/05/07/call-path-analysis-using-tracepoint/" data-toggle="tooltip" data-placement="top" title="Weibo" target="_blank" rel="noopener" aria-label="Weibo"> <i class="fa-fw fab fa-weibo"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/blog/2023/05/04/round-trips-to-authenticate-a-mongodb-client-connection/">Round Trips to Authenticate a MongoDB Client Connection</a><li><a href="/blog/2023/05/01/favourite-ruby-slash-rails-ides/">Identifying Ruby Developers' Favourite IDEs for Ruby/Rails in 2023</a><li><a href="/blog/2021/08/08/adventure-games-1980-1999-sorted-by-score/">Adventure Games (1980-1999): Sorted by Score</a><li><a href="/blog/2021/10/07/mongodb-versioned-api/">MongoDB Stable API</a><li><a href="/blog/2023/04/26/mission-asteroid/">Mission Asteroid (On-Line Systems) - 1980</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/adventure/">adventure</a> <a class="post-tag" href="/tags/mongodb/">mongodb</a> <a class="post-tag" href="/tags/redmine/">redmine</a> <a class="post-tag" href="/tags/rpg/">rpg</a> <a class="post-tag" href="/tags/ruby/">ruby</a> <a class="post-tag" href="/tags/book/">book</a> <a class="post-tag" href="/tags/sierra-on-line/">Sierra On-Line</a> <a class="post-tag" href="/tags/jrpg/">jrpg</a> <a class="post-tag" href="/tags/snes/">snes</a> <a class="post-tag" href="/tags/linux/">linux</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/blog/2021/03/26/analysis-and-optimization-of-an-n-plus-1-scenario-in-mongoid/"><div class="card-body"> <span class="timeago small" > Mar 26, 2021 <i class="unloaded">2021-03-26T09:16:09-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Analysis and Optimization of an N+1 Scenario in Mongoid</h3><div class="text-muted small"><p> The N + 1 queries problem is a common issue Rails applications face whereby iterating an array of models and accessing an association results in a sub-optimal pattern of recurring queries. To addr...</p></div></div></a></div><div class="card"> <a href="/blog/2022/08/18/why-use-mongodb-with-ruby/"><div class="card-body"> <span class="timeago small" > Aug 18, 2022 <i class="unloaded">2022-08-18T11:23:27-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Why Use MongoDB with Ruby</h3><div class="text-muted small"><p> Cross posted from MongoDB Developer Center Before discovering Ruby and Ruby on Rails I was a .NET developer. At that time I’d make ad-hoc changes to my development database, export my table/func...</p></div></div></a></div><div class="card"> <a href="/blog/2022/09/09/performance-profiling-a-mongoid-issue-using-appprofiler/"><div class="card-body"> <span class="timeago small" > Sep 9, 2022 <i class="unloaded">2022-09-09T06:41:01-04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Performance Profiling a Mongoid Issue Using AppProfiler</h3><div class="text-muted small"><p> In MONGOID-4889 the claim was made that assignment of a large number of embedded documents to an instance of a model will take increasingly longer as the size of the list of documents to embed grow...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/blog/2021/03/28/same-blog-new-look/" class="btn btn-outline-primary" prompt="Older"><p>Same Blog, New Look!</p></a> <a href="/blog/2021/05/19/scummvm-asylum-engine/" class="btn btn-outline-primary" prompt="Newer"><p>Sanitarium: The ScummVM Asylum Engine Journey Concludes</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="text-center text-muted small pb-5"> Loading comments from <a href="https://disqus.com/">Disqus</a> ...</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> const options = { scriptUrl: '//alexbevi.disqus.com/embed.js', disqusConfig: function() { this.page.title = 'Ruby Call Path Analysis using TracePoint'; this.page.url = 'https://www.alexbevi.com/blog/2021/05/07/call-path-analysis-using-tracepoint/'; this.page.identifier = '/blog/2021/05/07/call-path-analysis-using-tracepoint/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/alexbevi">Alex Bevilacqua</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/adventure/">adventure</a> <a class="post-tag" href="/tags/mongodb/">mongodb</a> <a class="post-tag" href="/tags/redmine/">redmine</a> <a class="post-tag" href="/tags/rpg/">rpg</a> <a class="post-tag" href="/tags/ruby/">ruby</a> <a class="post-tag" href="/tags/book/">book</a> <a class="post-tag" href="/tags/sierra-on-line/">Sierra On Line</a> <a class="post-tag" href="/tags/jrpg/">jrpg</a> <a class="post-tag" href="/tags/snes/">snes</a> <a class="post-tag" href="/tags/linux/">linux</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://www.alexbevi.com{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script type="text/javascript" src="/assets/js/lightbox.js"></script><link rel="stylesheet" href="/assets/css/lightbox.css">
