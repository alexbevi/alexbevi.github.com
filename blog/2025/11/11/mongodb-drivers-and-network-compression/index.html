<!doctype html><html lang="en" data-mode="dark"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="MongoDB Drivers and Network Compression" /><meta property="og:locale" content="en" /><meta name="description" content="MongoDB’s drivers communicate with a MongoDB process using the Wire Protocol, which is a simple socket-based, request-response style protocol that primarily uses the OP_MSG opcode (though prior to MongoDB 6.0 there were a number of additional legacy opcodes). Since the contents of OP_MSG messages was uncompressed, starting with MongoDB 3.4 a new opcode was introduced that would enable the Wire Protocol to support compressed messages as well: OP_COMPRESSED." /><meta property="og:description" content="MongoDB’s drivers communicate with a MongoDB process using the Wire Protocol, which is a simple socket-based, request-response style protocol that primarily uses the OP_MSG opcode (though prior to MongoDB 6.0 there were a number of additional legacy opcodes). Since the contents of OP_MSG messages was uncompressed, starting with MongoDB 3.4 a new opcode was introduced that would enable the Wire Protocol to support compressed messages as well: OP_COMPRESSED." /><link rel="canonical" href="https://www.alexbevi.com/blog/2025/11/11/mongodb-drivers-and-network-compression/" /><meta property="og:url" content="https://www.alexbevi.com/blog/2025/11/11/mongodb-drivers-and-network-compression/" /><meta property="og:site_name" content="ALEX BEVILACQUA" /><meta property="og:image" content=" https://www.alexbevi.com/images/mongodb-compression.png " /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-11-11T16:44:22-05:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content=" https://www.alexbevi.com/images/mongodb-compression.png " /><meta property="twitter:title" content="MongoDB Drivers and Network Compression" /><meta name="twitter:site" content="@alexbevi" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2026-01-20T05:17:56-05:00","datePublished":"2025-11-11T16:44:22-05:00","description":"MongoDB’s drivers communicate with a MongoDB process using the Wire Protocol, which is a simple socket-based, request-response style protocol that primarily uses the OP_MSG opcode (though prior to MongoDB 6.0 there were a number of additional legacy opcodes). Since the contents of OP_MSG messages was uncompressed, starting with MongoDB 3.4 a new opcode was introduced that would enable the Wire Protocol to support compressed messages as well: OP_COMPRESSED.","headline":"MongoDB Drivers and Network Compression","image":" https://www.alexbevi.com/images/mongodb-compression.png ","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.alexbevi.com/blog/2025/11/11/mongodb-drivers-and-network-compression/"},"url":"https://www.alexbevi.com/blog/2025/11/11/mongodb-drivers-and-network-compression/"}</script><title>MongoDB Drivers and Network Compression | ALEX BEVILACQUA</title><link rel="icon" type="image/png" href="/assets/img/favicons/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/svg+xml" href="/assets/img/favicons/favicon.svg"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="/assets/lib/fonts/main.css"><link rel="stylesheet" href="/assets/lib/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="/assets/lib/tocbot/tocbot.min.css"><link rel="stylesheet" href="/assets/lib/loading-attribute-polyfill/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="/assets/lib/glightbox/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="/assets/lib/simple-jekyll-search/simple-jekyll-search.min.js"></script> <script defer src="/assets/lib/loading-attribute-polyfill/loading-attribute-polyfill.umd.min.js"></script> <script defer src="/assets/lib/glightbox/glightbox.min.js"></script> <script defer src="/assets/lib/clipboard/clipboard.min.js"></script> <script defer src="/assets/lib/dayjs/dayjs.min.js"></script> <script defer src="/assets/lib/dayjs/locale/en.js"></script> <script defer src="/assets/lib/dayjs/plugin/relativeTime.js"></script> <script defer src="/assets/lib/dayjs/plugin/localizedFormat.js"></script> <script defer src="/assets/lib/tocbot/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-36490021-1"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'UA-36490021-1'); }); </script> <script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/lightgallery.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/plugins/zoom/lg-zoom.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/css/lightgallery-bundle.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/css/lg-transitions.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/css/lg-zoom.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/css/lg-thumbnail.min.css" rel="stylesheet"><style> .inline-gallery-container { width: 100%; // set 60% height height: 0; padding-bottom: 65%; }</style><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6215800856413580" crossorigin="anonymous"></script><meta name="google-adsense-account" content="ca-pub-6215800856413580"><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src=" /./images/avatar.png " width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">ALEX BEVILACQUA</a><p class="site-subtitle fst-italic mb-0">my little corner of the interwebs</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/specifications/" class="nav-link"> <i class="fa-fw fas fa-leaf"></i> <span>MONGODB DRIVER SPECIFICATIONS</span> </a><li class="nav-item"> <a href="/driver-compatibility-checker/" class="nav-link"> <i class="fa-fw fas fa-car"></i> <span>MONGODB DRIVER COMPATIBILITY CHECKER</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <a href="https://github.com/alexbevi " aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://twitter.com/alexbevi " aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['alex','alexbevi.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a> <a href="@alexbevi@ruby.social" aria-label="mastodon" target="_blank" rel="noopener noreferrer me" > <i class="fab fa-mastodon"></i> </a> <a href="https://linkedin.com/in/alexbevi" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="https://stackoverflow.com/users/195509" aria-label="stack-overflow" target="_blank" rel="noopener noreferrer" > <i class="fab fa-stack-overflow"></i> </a> <a href="https://www.facebook.com/alexbevi" aria-label="facebook" target="_blank" rel="noopener noreferrer" > <i class="fab fa-facebook"></i> </a> <a href="https://reddit.com/user/alexbevi" aria-label="reddit" target="_blank" rel="noopener noreferrer" > <i class="fab fa-reddit"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" class="flex-shrink-0" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>MongoDB Drivers and Network Compression</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link" aria-label="Search"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>MongoDB Drivers and Network Compression</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1762897462" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Nov 11, 2025 </time> </span> <span> Updated <time data-ts="1768904276" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jan 20, 2026 </time> </span><div class="mt-3 mb-3"> <a href=" /images/mongodb-compression.png" class="popup img-link preview-img shimmer"><img src=" /images/mongodb-compression.png" alt="Preview Image" width="1200" height="630" loading="lazy"></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/alexbevi">Alex Bevilacqua</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1449 words" > <em>8 min</em> read </span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">MongoDB Drivers and Network Compression</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Contents</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">MongoDB Drivers and Network Compression</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><p>MongoDB’s drivers communicate with a MongoDB process using the <a href="https://www.mongodb.com/docs/manual/reference/mongodb-wire-protocol">Wire Protocol</a>, which is a simple socket-based, request-response style protocol that primarily uses the <a href="https://www.mongodb.com/docs/manual/reference/mongodb-wire-protocol/#op_msg"><code class="language-plaintext highlighter-rouge">OP_MSG</code></a> opcode (though <a href="https://www.mongodb.com/docs/v6.0/release-notes/6.0-compatibility/#std-label-legacy-op-codes-removed">prior to MongoDB 6.0</a> there were a number of additional <a href="https://www.mongodb.com/docs/manual/legacy-opcodes">legacy opcodes</a>). Since the contents of <code class="language-plaintext highlighter-rouge">OP_MSG</code> messages was uncompressed, starting with MongoDB 3.4 a new opcode was introduced that would enable the Wire Protocol to support compressed messages as well: <a href="https://www.mongodb.com/docs/manual/reference/mongodb-wire-protocol/#op_compressed"><code class="language-plaintext highlighter-rouge">OP_COMPRESSED</code></a>.</p><p>All official <a href="https://www.mongodb.com/docs/drivers/">MongoDB drivers</a> allow you to enable and configure <a href="https://www.mongodb.com/docs/manual/reference/connection-string-options/#compression-options">compression options</a> via the connection string. To use any of the available compressors, they’d need to first be <a href="https://www.mongodb.com/docs/manual/reference/configuration-options/#mongodb-setting-net.compression.compressors">enabled for each <code class="language-plaintext highlighter-rouge">mongod</code> or <code class="language-plaintext highlighter-rouge">mongos</code> instance through the <code class="language-plaintext highlighter-rouge">net.compression.compressors</code> option</a>, however all compressors are currently enabled by default, so you’d really only need to modify this to remove support for a given compressor.</p><p>Enabling network compression for your workload is as easy as appending <code class="language-plaintext highlighter-rouge">compressors=xxx</code> (where <code class="language-plaintext highlighter-rouge">xxx</code> is one or more compressors as comma-separated values) to your connection string. For every <code class="language-plaintext highlighter-rouge">MongoClient</code> created with this connection string, <em>almost all</em><sup id="fnref:1"><a href="#fn:1" class="footnote" rel="footnote" role="doc-noteref">1</a></sup> database commands will be compressed, which can result in massive reductions in the amount of data that needs to be sent back and forth to a MongoDB process.</p><p>As a simple demonstration, I’ve instrumented a Node.js-based workload (see <a href="https://github.com/alexbevi/node-tcp-metrics">alexbevi/node-tcp-metrics</a>) to hook into <a href="https://nodejs.org/api/net.html#netcreateconnection"><code class="language-plaintext highlighter-rouge">net.createConnection()</code></a>, <a href="https://nodejs.org/api/net.html#class-netserver"><code class="language-plaintext highlighter-rouge">net.Server</code></a> and <a href="https://nodejs.org/api/tls.html#tlsconnectoptions-callback"><code class="language-plaintext highlighter-rouge">tls.connect()</code></a> to track the number of bytes being sent/received:</p><div class="language-js highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
</pre><td class="rouge-code"><pre><span class="k">import</span> <span class="dl">"</span><span class="s2">./tcp-metrics.js</span><span class="dl">"</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">on</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./tcp-metrics.js</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MongoClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">mongodb</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Chance</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">chance</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">uri</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">MONGODB_URI</span><span class="p">;</span>
<span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">uri</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="nc">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">MONGODB_URI environment variable is not set</span><span class="dl">"</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MongoClient</span><span class="p">(</span><span class="nx">uri</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">delay</span> <span class="o">=</span> <span class="p">(</span><span class="nx">ms</span><span class="p">:</span> <span class="nx">number</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="k">void</span><span class="o">&gt;</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nc">Promise</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="nf">setTimeout</span><span class="p">(</span><span class="nx">res</span><span class="p">,</span> <span class="nx">ms</span><span class="p">));</span>

<span class="p">(</span><span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nf">connect</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">db</span> <span class="o">=</span> <span class="nx">client</span><span class="p">.</span><span class="nf">db</span><span class="p">(</span><span class="dl">"</span><span class="s2">testdb</span><span class="dl">"</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">collection</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">collection</span><span class="o">&lt;</span><span class="p">{</span> <span class="na">_id</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span> <span class="nl">data</span><span class="p">:</span> <span class="nx">string</span> <span class="p">}</span><span class="o">&gt;</span><span class="p">(</span><span class="dl">"</span><span class="s2">testcollection</span><span class="dl">"</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">chance</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Chance</span><span class="p">(</span><span class="mi">42</span><span class="p">);</span> <span class="c1">// Fixed seed for deterministic generation</span>

    <span class="c1">// Generate a complex document structure that's approximately 5MB</span>
    <span class="kd">const</span> <span class="nx">itemCount</span> <span class="o">=</span> <span class="mi">5000</span><span class="p">;</span> <span class="c1">// Adjust to control size</span>
    <span class="kd">const</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">users</span><span class="p">:</span> <span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">({</span> <span class="na">length</span><span class="p">:</span> <span class="nx">itemCount</span> <span class="p">},</span> <span class="p">(</span><span class="nx">_</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
      <span class="na">id</span><span class="p">:</span> <span class="nx">i</span><span class="p">,</span>
      <span class="na">name</span><span class="p">:</span> <span class="nx">chance</span><span class="p">.</span><span class="nf">name</span><span class="p">(),</span>
      <span class="na">email</span><span class="p">:</span> <span class="nx">chance</span><span class="p">.</span><span class="nf">email</span><span class="p">(),</span>
      <span class="na">address</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">street</span><span class="p">:</span> <span class="nx">chance</span><span class="p">.</span><span class="nf">address</span><span class="p">(),</span>
        <span class="na">city</span><span class="p">:</span> <span class="nx">chance</span><span class="p">.</span><span class="nf">city</span><span class="p">(),</span>
        <span class="na">state</span><span class="p">:</span> <span class="nx">chance</span><span class="p">.</span><span class="nf">state</span><span class="p">(),</span>
        <span class="na">zip</span><span class="p">:</span> <span class="nx">chance</span><span class="p">.</span><span class="nf">zip</span><span class="p">(),</span>
        <span class="na">country</span><span class="p">:</span> <span class="nx">chance</span><span class="p">.</span><span class="nf">country</span><span class="p">()</span>
      <span class="p">},</span>
      <span class="na">phone</span><span class="p">:</span> <span class="nx">chance</span><span class="p">.</span><span class="nf">phone</span><span class="p">(),</span>
      <span class="na">company</span><span class="p">:</span> <span class="nx">chance</span><span class="p">.</span><span class="nf">company</span><span class="p">(),</span>
      <span class="na">bio</span><span class="p">:</span> <span class="nx">chance</span><span class="p">.</span><span class="nf">paragraph</span><span class="p">({</span> <span class="na">sentences</span><span class="p">:</span> <span class="mi">5</span> <span class="p">}),</span>
      <span class="na">avatar</span><span class="p">:</span> <span class="nx">chance</span><span class="p">.</span><span class="nf">url</span><span class="p">(),</span>
      <span class="na">tags</span><span class="p">:</span> <span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">({</span> <span class="na">length</span><span class="p">:</span> <span class="mi">10</span> <span class="p">},</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">chance</span><span class="p">.</span><span class="nf">word</span><span class="p">()),</span>
      <span class="na">metadata</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">createdAt</span><span class="p">:</span> <span class="nx">chance</span><span class="p">.</span><span class="nf">date</span><span class="p">().</span><span class="nf">toISOString</span><span class="p">(),</span>
        <span class="na">lastLogin</span><span class="p">:</span> <span class="nx">chance</span><span class="p">.</span><span class="nf">timestamp</span><span class="p">(),</span>
        <span class="na">preferences</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">theme</span><span class="p">:</span> <span class="nx">chance</span><span class="p">.</span><span class="nf">pickone</span><span class="p">([</span><span class="dl">'</span><span class="s1">dark</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">light</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">auto</span><span class="dl">'</span><span class="p">]),</span>
        <span class="na">language</span><span class="p">:</span> <span class="nx">chance</span><span class="p">.</span><span class="nf">locale</span><span class="p">(),</span>
        <span class="na">notifications</span><span class="p">:</span> <span class="nx">chance</span><span class="p">.</span><span class="nf">bool</span><span class="p">()</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="p">}))</span>
    <span class="p">};</span>
    <span class="kd">const</span> <span class="na">doc</span><span class="p">:</span> <span class="nx">any</span> <span class="o">=</span> <span class="p">{</span> <span class="na">_id</span><span class="p">:</span> <span class="dl">"</span><span class="s2">large-doc</span><span class="dl">"</span><span class="p">,</span> <span class="p">...</span><span class="nx">payload</span> <span class="p">};</span>

    <span class="k">await</span> <span class="nx">collection</span><span class="p">.</span><span class="nf">insertOne</span><span class="p">(</span><span class="nx">doc</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">collection</span><span class="p">.</span><span class="nf">findOne</span><span class="p">({</span> <span class="na">_id</span><span class="p">:</span> <span class="dl">"</span><span class="s2">large-doc</span><span class="dl">"</span> <span class="p">});</span>

    <span class="kd">const</span> <span class="nx">buf</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">(</span><span class="nx">result</span><span class="p">));</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Document insert and read complete, doc size (bytes):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">buf</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>

    <span class="k">await</span> <span class="nx">collection</span><span class="p">.</span><span class="nf">deleteOne</span><span class="p">({</span> <span class="na">_id</span><span class="p">:</span> <span class="dl">"</span><span class="s2">large-doc</span><span class="dl">"</span> <span class="p">});</span>
  <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">MongoDB error:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nf">close</span><span class="p">();</span>
 <span class="p">}</span>
<span class="p">})();</span>

<span class="nf">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">socketSummary</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">s</span><span class="p">));</span>
</pre></table></code></div></div><p>When this is run, the workload will create a complex JSON document using <a href="https://chancejs.com/">Chance</a>, write it to a <a href="https://www.mongodb.com/products/platform/atlas-database">MongoDB Atlas Database</a>, then read it back before deleting it.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nv">$ MONGODB_URI</span><span class="o">=</span><span class="s2">"mongodb+srv://USER:PASS@abc.cdefg.mongodb.net/"</span> npm run dev

Document insert and <span class="nb">read complete</span>, doc size <span class="o">(</span>bytes<span class="o">)</span>: 4725754
<span class="o">{</span> rx: 5058704, tx: 5058304, label: <span class="s1">'xxx.yyy.zzz.108:27017'</span> <span class="o">}</span>
<span class="o">{</span> rx: 1093, tx: 523, label: <span class="s1">'xxx.yyy.zzz.101:27017'</span> <span class="o">}</span>
<span class="o">{</span> rx: 1093, tx: 523, label: <span class="s1">'xxx.yyy.zzz.116:27017'</span> <span class="o">}</span>
<span class="o">{</span> rx: 1117, tx: 523, label: <span class="s1">'xxx.yyy.zzz.108:27017'</span> <span class="o">}</span>
</pre></table></code></div></div><blockquote class="prompt-info"><p>There are 4 open sockets in the example as the default Atlas configuration is a 3 member <a href="https://www.mongodb.com/docs/manual/replication/">replica set</a>. The driver has opened one socket to send commands to the server, and has also created dedicated monitoring connections to each host. If the workload were to remain active and not exit immediately, another 3 RTT connections would also be opened (one to each host in the replica set) for a total of 7 sockets. <br /> See the <a href="https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-monitoring.md">Server Monitoring specification</a>, or <a href="/blog/2023/07/04/how-many-connections-is-my-application-establishing-to-my-mongodb-cluster/">“How Many Connections is My Application Establishing to My MongoDB Cluster?”</a> for more detail.</p></blockquote><p>MongoDB supports 3 possible network compressors: <a href="https://zlib.net/">zlib</a>, ZStandard (<a href="https://facebook.github.io/zstd/">zstd</a>) and <a href="https://google.github.io/snappy/">Snappy</a>. zlib is always supported out of the box, however some drivers may require an additional package to support additional compressors. For example, when using MongoDB’s <a href="https://www.mongodb.com/docs/drivers/node/current/">Node.js driver</a>, the following would be required from <code class="language-plaintext highlighter-rouge">npm</code> to support snappy and zstd:</p><ul><li><a href="https://www.npmjs.com/package/snappy"><code class="language-plaintext highlighter-rouge">snappy</code></a><li><a href="https://www.npmjs.com/package/@mongodb-js/zstd"><code class="language-plaintext highlighter-rouge">@mongodb-js/zstd</code></a></ul><p>Our workload is using the default <a href="https://www.mongodb.com/docs/manual/core/read-preference/">read preference</a>, so with a baseline of <code class="language-plaintext highlighter-rouge">rx: 5058704, tx: 5058304</code> being sent to and received from the <a href="https://www.mongodb.com/docs/manual/core/replica-set-primary/">replica set primary</a>, let’s explore the impact of network compression.</p><h3 id="zlib"><span class="me-2">zlib</span><a href="#zlib" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>zlib is a software library used for data compression as well as a data format. zlib was written by Jean-loup Gailly and Mark Adler and implements the DEFLATE compression algorithm used in their gzip file compression program. The first public version of Zlib, 0.9, was released on 1 May 1995 and was originally intended for use with the libpng image library. It is free software, distributed under the zlib License.</p><p>To test this compressor we append <code class="language-plaintext highlighter-rouge">compressors=zlib</code> to our connection string and re-run our script.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nv">$ MONGODB_URI</span><span class="o">=</span><span class="s2">"mongodb+srv://USER:PASS@abc.cdefg.mongodb.net/?compressors=zlib"</span> npm run dev

Document insert and <span class="nb">read complete</span>, doc size <span class="o">(</span>bytes<span class="o">)</span>: 4725754
<span class="o">{</span> rx: 2417301, tx: 2361623, label: <span class="s1">'xxx.yyy.zzz.108:27017'</span> <span class="o">}</span>
<span class="o">{</span> rx: 1147, tx: 515, label: <span class="s1">'xxx.yyy.zzz.108:27017'</span> <span class="o">}</span>
<span class="o">{</span> rx: 1123, tx: 518, label: <span class="s1">'xxx.yyy.zzz.101:27017'</span> <span class="o">}</span>
<span class="o">{</span> rx: 1123, tx: 518, label: <span class="s1">'xxx.yyy.zzz.116:27017'</span> <span class="o">}</span>
</pre></table></code></div></div><p>With <code class="language-plaintext highlighter-rouge">zlib</code> compression enabled we can see about a <strong>52% decrease</strong> in the amount of data sent over the wire for this workload:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>uncompressed:      rx: 5058704, tx: 5058304
compressed (zlib): rx: 2417301, tx: 2361623
</pre></table></code></div></div><h3 id="zstandard-zstd"><span class="me-2">ZStandard (zstd)</span><a href="#zstandard-zstd" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Zstandard is a lossless data compression algorithm developed by Yann Collet at Facebook. Zstd is the corresponding reference implementation in C, released as open-source software on 31 August 2016. The algorithm was published in 2018 as RFC 8478, which also defines an associated media type “application/zstd”, filename extension “zst”, and HTTP content encoding “zstd”.</p><p>To test this compressor we append <code class="language-plaintext highlighter-rouge">compressors=zstd</code> to our connection string and re-run our script.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nv">$ MONGODB_URI</span><span class="o">=</span><span class="s2">"mongodb+srv://USER:PASS@abc.cdefg.mongodb.net/?compressors=zstd"</span> npm run dev

Document insert and <span class="nb">read complete</span>, doc size <span class="o">(</span>bytes<span class="o">)</span>: 4725754
<span class="o">{</span> rx: 2395239, tx: 2394798, label: <span class="s1">'xxx.yyy.zzz.108:27017'</span> <span class="o">}</span>
<span class="o">{</span> rx: 1147, tx: 519, label: <span class="s1">'xxx.yyy.zzz.108:27017'</span> <span class="o">}</span>
<span class="o">{</span> rx: 1123, tx: 519, label: <span class="s1">'xxx.yyy.zzz.101:27017'</span> <span class="o">}</span>
<span class="o">{</span> rx: 1123, tx: 519, label: <span class="s1">'xxx.yyy.zzz.116:27017'</span> <span class="o">}</span>
</pre></table></code></div></div><p>With <code class="language-plaintext highlighter-rouge">zstd</code> compression enabled we can see about a <strong>53% decrease</strong> in the amount of data sent over the wire for this workload:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>uncompressed:      rx: 5058704, tx: 5058304
compressed (zstd): rx: 2395239, tx: 2394798
</pre></table></code></div></div><h3 id="snappy"><span class="me-2">Snappy</span><a href="#snappy" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Snappy (previously known as Zippy) is a fast data compression and decompression library written in C++ by Google based on ideas from LZ77 and open-sourced in 2011. It does not aim for maximum compression, or compatibility with any other compression library; instead, it aims for very high speeds and reasonable compression. Compression speed is 250 MB/s and decompression speed is 500 MB/s using a single core of a circa 2011 “Westmere” 2.26 GHz Core i7 processor running in 64-bit mode. The compression ratio is 20–100% lower than gzip.</p><p>To test this compressor we append <code class="language-plaintext highlighter-rouge">compressors=snappy</code> to our connection string and re-run our script.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nv">$ MONGODB_URI</span><span class="o">=</span><span class="s2">"mongodb+srv://USER:PASS@abc.cdefg.mongodb.net/?compressors=snappy"</span> npm run dev

Document insert and <span class="nb">read complete</span>, doc size <span class="o">(</span>bytes<span class="o">)</span>: 4725754
<span class="o">{</span> rx: 1125, tx: 527, label: <span class="s1">'xxx.yyy.zzz.116:27017'</span> <span class="o">}</span>
<span class="o">{</span> rx: 3807095, tx: 3797837, label: <span class="s1">'xxx.yyy.zzz.108:27017'</span> <span class="o">}</span>
<span class="o">{</span> rx: 1149, tx: 527, label: <span class="s1">'xxx.yyy.zzz.108:27017'</span> <span class="o">}</span>
<span class="o">{</span> rx: 1125, tx: 527, label: <span class="s1">'xxx.yyy.zzz.101:27017'</span> <span class="o">}</span>
</pre></table></code></div></div><p>With <code class="language-plaintext highlighter-rouge">snappy</code> compression enabled we can see about a <strong>25% decrease</strong> in the amount of data sent over the wire for this workload:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>uncompressed:        rx: 5058704, tx: 5058304
compressed (snappy): rx: 3807095, tx: 3797837
</pre></table></code></div></div><h2 id="summary"><span class="me-2">Summary</span><a href="#summary" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Though there may be a need for an additional dependency, Zstandard compression is likely the best option as it will provide good compression with a low memory footprint. For Node.js specifically this requirement will likely go away once the driver’s minimum runtime version rises to Node 24 as <a href="https://nodejs.org/en/blog/release/v23.8.0#support-for-the-zstd-compression-algorithm">zstd support was added in 23.8.0</a>.</p><p>If you’re running your workload in AWS (or anywhere really), <a href="https://aws.amazon.com/blogs/architecture/overview-of-data-transfer-costs-for-common-architectures/">data transfer costs</a> will contribute to your overall costs. You can use tools like the <a href="https://calculator.aws">AWS pricing calculator</a> to dig into cost projections, but given you can potentially slash those in half (at least for the data going to/from your cluster) with a simple connection string update it makes MongoDB a more cost-effective option for your application.</p><hr /><div class="footnotes" role="doc-endnotes"><ol><li id="fn:1"><p><small>Per the <a href="https://github.com/mongodb/specifications/blob/master/source/compression/OP_COMPRESSED.md#messages-not-allowed-to-be-compressed">Wire Compression specification</a>, some commands should not be compressed. These include <code class="language-plaintext highlighter-rouge">hello</code>/<code class="language-plaintext highlighter-rouge">ismaster</code>, <code class="language-plaintext highlighter-rouge">saslStart</code>, <code class="language-plaintext highlighter-rouge">saslContinue</code>, <code class="language-plaintext highlighter-rouge">getnonce</code>, <code class="language-plaintext highlighter-rouge">authenticate</code>, <code class="language-plaintext highlighter-rouge">createUser</code>, <code class="language-plaintext highlighter-rouge">updateUser</code>, <code class="language-plaintext highlighter-rouge">copydbSaslStart</code>, <code class="language-plaintext highlighter-rouge">copydbgetnonce</code> and <code class="language-plaintext highlighter-rouge">copydb</code>.</small> <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;&#xfe0e;</a></p></ol></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/mongodb/">MongoDB</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/mongodb/" class="post-tag no-text-decoration" >mongodb</a> <a href="/tags/drivers/" class="post-tag no-text-decoration" >drivers</a> <a href="/tags/networking/" class="post-tag no-text-decoration" >networking</a> <a href="/tags/compression/" class="post-tag no-text-decoration" >compression</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=MongoDB%20Drivers%20and%20Network%20Compression%20-%20ALEX%20BEVILACQUA&url=https%3A%2F%2Fwww.alexbevi.com%2Fblog%2F2025%2F11%2F11%2Fmongodb-drivers-and-network-compression%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=MongoDB%20Drivers%20and%20Network%20Compression%20-%20ALEX%20BEVILACQUA&u=https%3A%2F%2Fwww.alexbevi.com%2Fblog%2F2025%2F11%2F11%2Fmongodb-drivers-and-network-compression%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fwww.alexbevi.com%2Fblog%2F2025%2F11%2F11%2Fmongodb-drivers-and-network-compression%2F&text=MongoDB%20Drivers%20and%20Network%20Compression%20-%20ALEX%20BEVILACQUA" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fwww.alexbevi.com%2Fblog%2F2025%2F11%2F11%2Fmongodb-drivers-and-network-compression%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <a href="http://service.weibo.com/share/share.php?title=MongoDB%20Drivers%20and%20Network%20Compression%20-%20ALEX%20BEVILACQUA&url=https%3A%2F%2Fwww.alexbevi.com%2Fblog%2F2025%2F11%2F11%2Fmongodb-drivers-and-network-compression%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Weibo" aria-label="Weibo"> <i class="fa-fw fab fa-weibo"></i> </a> <a href="https://bsky.app/intent/compose?text=MongoDB%20Drivers%20and%20Network%20Compression%20-%20ALEX%20BEVILACQUA%20https%3A%2F%2Fwww.alexbevi.com%2Fblog%2F2025%2F11%2F11%2Fmongodb-drivers-and-network-compression%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Bluesky" aria-label="Bluesky"> <i class="fa-fw fa-brands fa-bluesky"></i> </a> <a href="https://www.reddit.com/submit?url=https%3A%2F%2Fwww.alexbevi.com%2Fblog%2F2025%2F11%2F11%2Fmongodb-drivers-and-network-compression%2F&title=MongoDB%20Drivers%20and%20Network%20Compression%20-%20ALEX%20BEVILACQUA" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Reddit" aria-label="Reddit"> <i class="fa-fw fa-brands fa-square-reddit"></i> </a> <a href="https://www.threads.net/intent/post?text=MongoDB%20Drivers%20and%20Network%20Compression%20-%20ALEX%20BEVILACQUA%20https%3A%2F%2Fwww.alexbevi.com%2Fblog%2F2025%2F11%2F11%2Fmongodb-drivers-and-network-compression%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Threads" aria-label="Threads"> <i class="fa-fw fa-brands fa-square-threads"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/blog/2023/03/23/geisha/">Geisha (Coktel Vision) - 1990</a><li class="text-truncate lh-lg"> <a href="/blog/2023/03/29/comparing-mongodb-to-not-mongodb-ex-documentdb-or-cosmos-db/">Comparing MongoDB to not-MongoDB (ex: DocumentDB or Cosmos DB)</a><li class="text-truncate lh-lg"> <a href="/blog/2023/03/30/i-have-no-mouth-and-i-must-scream/">I Have No Mouth, and I Must Scream (The Dreamers Guild) - 1995</a><li class="text-truncate lh-lg"> <a href="/blog/2023/04/11/deja-vu/">Déjà Vu: A Nightmare Comes True (ICOM Simulations) - 1985</a><li class="text-truncate lh-lg"> <a href="/blog/2023/04/16/beavis-and-butthead/">Beavis and Butt-Head in Virtual Stupidity (Viacom New Media) - 1995</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/adventure/">adventure</a> <a class="post-tag btn btn-outline-primary" href="/tags/mongodb/">mongodb</a> <a class="post-tag btn btn-outline-primary" href="/tags/sierra-on-line/">Sierra On-Line</a> <a class="post-tag btn btn-outline-primary" href="/tags/drivers/">drivers</a> <a class="post-tag btn btn-outline-primary" href="/tags/sci/">SCI</a> <a class="post-tag btn btn-outline-primary" href="/tags/ruby/">ruby</a> <a class="post-tag btn btn-outline-primary" href="/tags/redmine/">redmine</a> <a class="post-tag btn btn-outline-primary" href="/tags/rpg/">rpg</a> <a class="post-tag btn btn-outline-primary" href="/tags/book/">book</a> <a class="post-tag btn btn-outline-primary" href="/tags/javascript/">javascript</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/blog/2024/03/08/mongodb-and-load-balancer-support/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1709905045" data-df="ll" > Mar 8, 2024 </time><h4 class="pt-0 my-2">MongoDB and Load Balancer Support</h4><div class="text-muted"><p>Overview A load balancer enhances your application’s scalability, availability, and performance by efficiently distributing traffic across multiple servers based on a number of algorithms and tech...</p></div></div></a></article><article class="col"> <a href="/blog/2024/02/05/node-dot-js-driver-failing-to-connect-due-to-unsafe-legacy-renegotiation-disabled/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1707142013" data-df="ll" > Feb 5, 2024 </time><h4 class="pt-0 my-2">Node.js Driver failing to connect due to "unsafe legacy renegotiation disabled"</h4><div class="text-muted"><p>Overview In this community forum post there was a report of the MongoDB Node.js driver failing to connect with the following error: MongoServerSelectionError: C8320000:error:0A000152:SSL routi...</p></div></div></a></article><article class="col"> <a href="/blog/2023/11/13/querysrv-errors-when-connecting-to-mongodb-atlas/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1699904533" data-df="ll" > Nov 13, 2023 </time><h4 class="pt-0 my-2">querySrv errors when connecting to MongoDB Atlas</h4><div class="text-muted"><p>If your application uses MongoDB’s Node.js driver or Mongoose ODM, occasionally you may observe errors such as querySrv ECONNREFUSED _mongodb._tcp.cluster0.abcde.mongodb.net or Error: querySrv ETIM...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/blog/2025/10/21/martian-memorandum/" class="btn btn-outline-primary" aria-label="Older" ><p>Martian Memorandum (Access Software) - 1991</p></a> <a href="/blog/2025/11/13/maniac-mansion/" class="btn btn-outline-primary" aria-label="Newer" ><p>Maniac Mansion (Lucasfilm Games) - 1987</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2026</time> <a href="https://twitter.com/alexbevi">Alex Bevilacqua</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.4.1" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/adventure/">adventure</a> <a class="post-tag btn btn-outline-primary" href="/tags/mongodb/">mongodb</a> <a class="post-tag btn btn-outline-primary" href="/tags/sierra-on-line/">Sierra On-Line</a> <a class="post-tag btn btn-outline-primary" href="/tags/drivers/">drivers</a> <a class="post-tag btn btn-outline-primary" href="/tags/sci/">SCI</a> <a class="post-tag btn btn-outline-primary" href="/tags/ruby/">ruby</a> <a class="post-tag btn btn-outline-primary" href="/tags/redmine/">redmine</a> <a class="post-tag btn btn-outline-primary" href="/tags/rpg/">rpg</a> <a class="post-tag btn btn-outline-primary" href="/tags/book/">book</a> <a class="post-tag btn btn-outline-primary" href="/tags/javascript/">javascript</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> var disqus_config = function () { this.page.url = 'https://www.alexbevi.com/blog/2025/11/11/mongodb-drivers-and-network-compression/'; this.page.identifier = '/blog/2025/11/11/mongodb-drivers-and-network-compression/'; }; function addDisqus() { let disqusThread = document.createElement('div'); let paragraph = document.createElement('p'); disqusThread.id = 'disqus_thread'; paragraph.className = 'text-center text-muted small'; paragraph.innerHTML = 'Comments powered by <a href="https://disqus.com/">Disqus</a>.'; disqusThread.appendChild(paragraph); const footer = document.querySelector('footer'); footer.insertAdjacentElement("beforebegin", disqusThread); }function reloadDisqus(event) { if (event.source === window && event.data && event.data.id === Theme.ID) {if (typeof DISQUS === 'undefined') { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } } addDisqus(); if (Theme.switchable) { addEventListener('message', reloadDisqus); }var disqusObserver = new IntersectionObserver( function (entries) { if (entries[0].isIntersecting) { var d = document, s = d.createElement('script'); s.src = 'https://alexbevi.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); disqusObserver.disconnect(); } }, { threshold: [0] } ); disqusObserver.observe(document.getElementById('disqus_thread')); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{content}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
