<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Bash | ALEX BEVILACQUA]]></title>
  <link href="http://alexbevi.com/blog/categories/bash/atom.xml" rel="self"/>
  <link href="http://alexbevi.com/"/>
  <updated>2014-03-03T10:07:05-05:00</updated>
  <id>http://alexbevi.com/</id>
  <author>
    <name><![CDATA[Alex Bevilacqua]]></name>
    <email><![CDATA[alexbevi@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Install Latest MongoDB in Ubuntu]]></title>
    <link href="http://alexbevi.com/blog/2012/08/29/install-latest-mongodb-in-ubuntu/"/>
    <updated>2012-08-29T13:46:00-04:00</updated>
    <id>http://alexbevi.com/blog/2012/08/29/install-latest-mongodb-in-ubuntu</id>
    <content type="html"><![CDATA[<p>A couple projects I work on use <a href="http://www.mongodb.org/">MongoDB</a> as the database, and I&rsquo;m generally not satisfied to use the (often outdated) version that ships with Ubuntu.</p>

<p>As a result, I wrote this script to automate fetching, extracting and linking the latest version.</p>

<!-- more -->


<p>To configure the script, just replace the <code>PKG</code> information with whatever value is most relevant for your configuration at <a href="http://www.mongodb.org/downloads">http://www.mongodb.org/downloads</a>.</p>

<p><div><script src='https://gist.github.com/3516100.js'></script>
<noscript><pre><code>#!/bin/bash

PKG=mongodb-linux-x86_64-2.2.0
URL=http://fastdl.mongodb.org/linux

if [ -f /etc/init.d/mongod ]
then
  echo &quot;mongod already installed ... stopping&quot;
  sudo service mongod stop
else
  echo &quot;installing mongod script&quot;
  wget https://raw.github.com/gist/3516078/713ad981715236473999f30636bca2ee3dcc5f24/mongod
  sudo mv mongod /etc/init.d/mongod
  sudo chmod +x /etc/init.d/mongod
  echo &quot;creating mongodb user&quot;
  sudo useradd mongodb
  echo &quot;creating directories&quot;
  sudo mkdir -p /var/lib/mongodb
  sudo mkdir -p /var/log/mongodb
  sudo chown mongodb.mongodb /var/lib/mongodb
  sudo chown mongodb.mongodb /var/log/mongodb
  sudo update-rc.d mongod defaults
fi

wget $URL/$PKG.tgz
sudo tar -xvzf $PKG.tgz -C /usr/local/

if [ -d /usr/local/mongodb ]
then
  echo &quot;removing existing mongodb symlink&quot;
  sudo rm -rf /usr/local/mongodb
  sudo ln -s /usr/local/$PKG /usr/local/mongodb
else
  echo &quot;creating symlinks&quot;
  sudo ln -s /usr/local/$PKG /usr/local/mongodb
  sudo ln -s /usr/local/mongodb/bin/bsondump /usr/local/bin/bsondump
  sudo ln -s /usr/local/mongodb/bin/mongo /usr/local/bin/mongo
  sudo ln -s /usr/local/mongodb/bin/mongod /usr/local/bin/mongod
  sudo ln -s /usr/local/mongodb/bin/mongodump /usr/local/bin/mongodump
  sudo ln -s /usr/local/mongodb/bin/mongoexport /usr/local/bin/mongoexport
  sudo ln -s /usr/local/mongodb/bin/mongofiles /usr/local/bin/mongofiles
  sudo ln -s /usr/local/mongodb/bin/mongoimport /usr/local/bin/mongoimport
  sudo ln -s /usr/local/mongodb/bin/mongorestore /usr/local/bin/mongorestore
  sudo ln -s /usr/local/mongodb/bin/mongos /usr/local/bin/mongos
  sudo ln -s /usr/local/mongodb/bin/mongosniff /usr/local/bin/mongosniff
  sudo ln -s /usr/local/mongodb/bin/mongostat /usr/local/bin/mongostat
fi

echo &quot;cleaning up&quot;
rm $PKG.tgz

echo &quot;starting mongod service&quot;
sudo service mongod start</code></pre></noscript></div>
</p>

<p>Note that this script pulls <code>mongod</code> from a gist which I created. This script is originally from <a href="https://github.com/ijonas">Ijonas Kisselbach</a>&rsquo;s <a href="https://raw.github.com/ijonas/dotfiles/master/etc/init.d/mongod">dotfiles</a>.</p>
]]></content>
  </entry>
  
</feed>
