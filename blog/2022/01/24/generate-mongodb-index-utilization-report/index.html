<!doctype html><html lang="en" data-mode="dark"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Generate MongoDB Index Utilization Report" /><meta property="og:locale" content="en" /><meta name="description" content="When MongoDB 3.2 introduced the $indexStats aggregation pipeline stage accesses details were suddenly accessible to users. As a result, scripts could now be written to better understand how frequently indexes were being accessed by operations." /><meta property="og:description" content="When MongoDB 3.2 introduced the $indexStats aggregation pipeline stage accesses details were suddenly accessible to users. As a result, scripts could now be written to better understand how frequently indexes were being accessed by operations." /><link rel="canonical" href="https://www.alexbevi.com/blog/2022/01/24/generate-mongodb-index-utilization-report/" /><meta property="og:url" content="https://www.alexbevi.com/blog/2022/01/24/generate-mongodb-index-utilization-report/" /><meta property="og:site_name" content="ALEX BEVILACQUA" /><meta property="og:image" content=" https://www.alexbevi.com/images/mongodb-logo.png " /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-01-24T09:49:50-05:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content=" https://www.alexbevi.com/images/mongodb-logo.png " /><meta property="twitter:title" content="Generate MongoDB Index Utilization Report" /><meta name="twitter:site" content="@alexbevi" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-05-09T12:45:05-04:00","datePublished":"2022-01-24T09:49:50-05:00","description":"When MongoDB 3.2 introduced the $indexStats aggregation pipeline stage accesses details were suddenly accessible to users. As a result, scripts could now be written to better understand how frequently indexes were being accessed by operations.","headline":"Generate MongoDB Index Utilization Report","image":" https://www.alexbevi.com/images/mongodb-logo.png ","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.alexbevi.com/blog/2022/01/24/generate-mongodb-index-utilization-report/"},"url":"https://www.alexbevi.com/blog/2022/01/24/generate-mongodb-index-utilization-report/"}</script><title>Generate MongoDB Index Utilization Report | ALEX BEVILACQUA</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ALEX BEVILACQUA"><meta name="application-name" content="ALEX BEVILACQUA"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="/assets/lib/fonts/main.css"><link rel="stylesheet" href="/assets/lib/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="/assets/lib/tocbot/tocbot.min.css"><link rel="stylesheet" href="/assets/lib/loading-attribute-polyfill/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="/assets/lib/glightbox/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="/assets/lib/simple-jekyll-search/simple-jekyll-search.min.js"></script> <script defer src="/assets/lib/loading-attribute-polyfill/loading-attribute-polyfill.umd.min.js"></script> <script defer src="/assets/lib/glightbox/glightbox.min.js"></script> <script defer src="/assets/lib/clipboard/clipboard.min.js"></script> <script defer src="/assets/lib/dayjs/dayjs.min.js"></script> <script defer src="/assets/lib/dayjs/locale/en.js"></script> <script defer src="/assets/lib/dayjs/plugin/relativeTime.js"></script> <script defer src="/assets/lib/dayjs/plugin/localizedFormat.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-36490021-1"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'UA-36490021-1'); }); </script> <script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/lightgallery.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/plugins/zoom/lg-zoom.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/css/lightgallery-bundle.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/css/lg-transitions.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/css/lg-zoom.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/css/lg-thumbnail.min.css" rel="stylesheet"><style> .inline-gallery-container { width: 100%; // set 60% height height: 0; padding-bottom: 65%; }</style><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6215800856413580" crossorigin="anonymous"></script><meta name="google-adsense-account" content="ca-pub-6215800856413580"><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src=" /./images/avatar.png " width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">ALEX BEVILACQUA</a><p class="site-subtitle fst-italic mb-0">my little corner of the interwebs</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/specifications/" class="nav-link"> <i class="fa-fw fas fa-book"></i> <span>SPECIFICATIONS</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <a href="https://github.com/alexbevi " aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://twitter.com/alexbevi " aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['alex','alexbevi.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a> <a href="@alexbevi@ruby.social" aria-label="mastodon" target="_blank" rel="noopener noreferrer me" > <i class="fab fa-mastodon"></i> </a> <a href="https://linkedin.com/in/alexbevi" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="https://stackoverflow.com/users/195509" aria-label="stack-overflow" target="_blank" rel="noopener noreferrer" > <i class="fab fa-stack-overflow"></i> </a> <a href="https://www.facebook.com/alexbevi" aria-label="facebook" target="_blank" rel="noopener noreferrer" > <i class="fab fa-facebook"></i> </a> <a href="https://reddit.com/user/alexbevi" aria-label="reddit" target="_blank" rel="noopener noreferrer" > <i class="fab fa-reddit"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>Generate MongoDB Index Utilization Report</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="false"><header><h1 data-toc-skip>Generate MongoDB Index Utilization Report</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1643035790" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jan 24, 2022 </time> </span> <span> Updated <time data-ts="1683650705" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > May 9, 2023 </time> </span><div class="mt-3 mb-3"> <a href=" /images/mongodb-logo.png" class="popup img-link preview-img shimmer"><img src=" /images/mongodb-logo.png" alt="Preview Image" width="1200" height="630" loading="lazy"></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/alexbevi">Alex Bevilacqua</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="466 words" > <em>2 min</em> read </span></div></div></div></header><div class="content"><p>When MongoDB 3.2 introduced the <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/indexStats/"><code class="language-plaintext highlighter-rouge">$indexStats</code></a> aggregation pipeline stage <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/indexStats/#std-label-indexStats-output-accesses"><code class="language-plaintext highlighter-rouge">accesses</code> details</a> were suddenly accessible to users. As a result, scripts could now be written to better understand how frequently <a href="https://docs.mongodb.com/manual/indexes/">indexes</a> were being accessed by operations.</p><p>The following script will cycle through all databases and collections (omitting <code class="language-plaintext highlighter-rouge">admin</code>, <code class="language-plaintext highlighter-rouge">local</code> and <code class="language-plaintext highlighter-rouge">config</code>) to produce a delimited report of index utilization:</p><div class="language-js highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">DELIMITER</span> <span class="o">=</span> <span class="dl">'</span><span class="se">\t</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">IGNORE</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">admin</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">local</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">config</span><span class="dl">"</span><span class="p">];</span>
<span class="nf">print</span><span class="p">([</span><span class="dl">"</span><span class="s2">Namespace</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Index Name</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Usage Count</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Last Used</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Index Size (bytes)</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Index Specification</span><span class="dl">"</span><span class="p">].</span><span class="nf">join</span><span class="p">(</span><span class="nx">DELIMITER</span><span class="p">));</span>
<span class="nx">db</span><span class="p">.</span><span class="nf">getMongo</span><span class="p">().</span><span class="nf">getDBNames</span><span class="p">().</span><span class="nf">forEach</span><span class="p">(</span><span class="nf">function </span><span class="p">(</span><span class="nx">dbname</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">IGNORE</span><span class="p">.</span><span class="nf">indexOf</span><span class="p">(</span><span class="nx">dbname</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">db</span><span class="p">.</span><span class="nf">getSiblingDB</span><span class="p">(</span><span class="nx">dbname</span><span class="p">).</span><span class="nf">getCollectionNames</span><span class="p">().</span><span class="nf">forEach</span><span class="p">(</span><span class="nf">function </span><span class="p">(</span><span class="nx">cname</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">cname</span><span class="p">.</span><span class="nf">includes</span><span class="p">(</span><span class="dl">"</span><span class="s2">system.</span><span class="dl">"</span><span class="p">))</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">coll</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nf">getSiblingDB</span><span class="p">(</span><span class="nx">dbname</span><span class="p">).</span><span class="nf">getCollection</span><span class="p">(</span><span class="nx">cname</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">stats</span> <span class="o">=</span> <span class="nx">coll</span><span class="p">.</span><span class="nf">stats</span><span class="p">();</span>
                <span class="c1">// make sure stats ran successfully (if it's a view it won't)</span>
                <span class="k">if </span><span class="p">(</span><span class="nx">stats</span><span class="p">.</span><span class="nx">ok</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">coll</span><span class="p">.</span><span class="nf">aggregate</span><span class="p">([{</span> <span class="na">$indexStats</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}]).</span><span class="nf">forEach</span><span class="p">(</span><span class="nf">function </span><span class="p">(</span><span class="nx">ix</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kd">var</span> <span class="nx">ixname</span> <span class="o">=</span> <span class="nx">ix</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
                        <span class="kd">var</span> <span class="nx">ns</span> <span class="o">=</span> <span class="nx">dbname</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">.</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">cname</span><span class="p">;</span>
                        <span class="kd">var</span> <span class="nx">ixsize</span> <span class="o">=</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">indexSizes</span><span class="p">[</span><span class="nx">ixname</span><span class="p">];</span>
                        <span class="kd">var</span> <span class="nx">ops</span> <span class="o">=</span> <span class="nx">ix</span><span class="p">.</span><span class="nx">accesses</span><span class="p">.</span><span class="nx">ops</span><span class="p">;</span>
                        <span class="kd">var</span> <span class="nx">since</span> <span class="o">=</span> <span class="nx">ix</span><span class="p">.</span><span class="nx">accesses</span><span class="p">.</span><span class="nx">since</span><span class="p">;</span>
                        <span class="nf">print</span><span class="p">([</span><span class="nx">ns</span><span class="p">,</span> <span class="nx">ixname</span><span class="p">,</span> <span class="nx">ops</span><span class="p">,</span> <span class="nx">since</span><span class="p">,</span> <span class="nx">ixsize</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">(</span><span class="nx">ix</span><span class="p">.</span><span class="nx">spec</span><span class="p">)].</span><span class="nf">join</span><span class="p">(</span><span class="nx">DELIMITER</span><span class="p">));</span>
                    <span class="p">});</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></table></code></div></div><p>For example, I ran the above against a test cluster I have in MongoDB Atlas with a <code class="language-plaintext highlighter-rouge">DELIMITER</code> set as a pipe character (<code class="language-plaintext highlighter-rouge">|</code>) to facilitate the generation of a Markdown table such as the following:</p><div class="table-wrapper"><table><thead><tr><th>Namespace<th>Index Name<th>Usage Count<th>Last Used<th>Index Size (bytes)<th>Index Specification<tbody><tr><td>data.users<td>age_1_address.state_1_name_1<td>NumberLong(0)<td>Tue Jan 18 2022 14:05:40 GMT-0500 (Eastern Standard Time)<td>48164864<td>{“v”:2,”key”:{“age”:1,”address.state”:1,”name”:1},”name”:”age_1_address.state_1_name_1”,”ns”:”data.users”}<tr><td>data.users<td><em>id</em><td>NumberLong(0)<td>Tue Jan 18 2022 14:05:40 GMT-0500 (Eastern Standard Time)<td>34496512<td>{“v”:2,”key”:{“<em>id”:1},”name”:”_id</em>”,”ns”:”data.users”}<tr><td>data.users<td>address.state_1_name_1_age_1<td>NumberLong(0)<td>Tue Jan 18 2022 14:05:40 GMT-0500 (Eastern Standard Time)<td>43565056<td>{“v”:2,”key”:{“address.state”:1,”name”:1,”age”:1},”name”:”address.state_1_name_1_age_1”,”ns”:”data.users”}<tr><td>data.users<td>age_1<td>NumberLong(0)<td>Tue Jan 18 2022 14:05:40 GMT-0500 (Eastern Standard Time)<td>13721600<td>{“v”:2,”key”:{“age”:1},”name”:”age_1”,”ns”:”data.users”}<tr><td>encryption.__keyVault<td><em>id</em><td>NumberLong(0)<td>Tue Jan 18 2022 14:05:40 GMT-0500 (Eastern Standard Time)<td>36864<td>{“v”:2,”key”:{“<em>id”:1},”name”:”_id</em>”}<tr><td>medicalRecords.patients<td><em>id</em><td>NumberLong(0)<td>Tue Jan 18 2022 14:05:40 GMT-0500 (Eastern Standard Time)<td>36864<td>{“v”:2,”key”:{“<em>id”:1},”name”:”_id</em>”}</table></div><p>As indexes aren’t free (see <a href="https://docs.mongodb.com/manual/applications/indexes/">“Indexing Strategies”</a>) dropping unused indexes will allow you to reclaim some disk space and potentially improve write throughput. In a <a href="https://docs.mongodb.com/manual/replication/">replica set</a> the output would be for the current node you’re connected to (likely the <a href="https://docs.mongodb.com/manual/core/replica-set-members/#std-label-replica-set-primary-member"><code class="language-plaintext highlighter-rouge">PRIMARY</code></a>). Before dropping indexes ensure you review the output above for <em>all data bearing nodes</em> as some workloads may only target <a href="https://docs.mongodb.com/manual/core/replica-set-members/#secondaries"><code class="language-plaintext highlighter-rouge">SECONDARY</code></a> members, which would result in (likely) lower usage statistics on the <code class="language-plaintext highlighter-rouge">PRIMARY</code>.</p><p>Note that the <em>Last Used</em> values are reset when a <code class="language-plaintext highlighter-rouge">mongod</code> is restarted. If the <em>Usage Count</em> is <code class="language-plaintext highlighter-rouge">0</code>, the <em>Last Used</em> value will indicate the time the process was started; not when that index was actually last used. The output of the <em>Last Values</em> above will be in your local timezone. For more information see the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date">MDN Docs for <code class="language-plaintext highlighter-rouge">Date</code></a>.</p><p>Let me know if you find this script useful in the comments below ;)</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/mongodb/">MongoDB</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/mongodb/" class="post-tag no-text-decoration" >mongodb</a> <a href="/tags/queries/" class="post-tag no-text-decoration" >queries</a> <a href="/tags/indexing/" class="post-tag no-text-decoration" >indexing</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Generate%20MongoDB%20Index%20Utilization%20Report%20-%20ALEX%20BEVILACQUA&url=https%3A%2F%2Fwww.alexbevi.com%2Fblog%2F2022%2F01%2F24%2Fgenerate-mongodb-index-utilization-report%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Generate%20MongoDB%20Index%20Utilization%20Report%20-%20ALEX%20BEVILACQUA&u=https%3A%2F%2Fwww.alexbevi.com%2Fblog%2F2022%2F01%2F24%2Fgenerate-mongodb-index-utilization-report%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fwww.alexbevi.com%2Fblog%2F2022%2F01%2F24%2Fgenerate-mongodb-index-utilization-report%2F&text=Generate%20MongoDB%20Index%20Utilization%20Report%20-%20ALEX%20BEVILACQUA" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fwww.alexbevi.com%2Fblog%2F2022%2F01%2F24%2Fgenerate-mongodb-index-utilization-report%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <a href="http://service.weibo.com/share/share.php?title=Generate%20MongoDB%20Index%20Utilization%20Report%20-%20ALEX%20BEVILACQUA&url=https%3A%2F%2Fwww.alexbevi.com%2Fblog%2F2022%2F01%2F24%2Fgenerate-mongodb-index-utilization-report%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Weibo" aria-label="Weibo"> <i class="fa-fw fab fa-weibo"></i> </a> <a href="https://bsky.app/intent/compose?text=Generate%20MongoDB%20Index%20Utilization%20Report%20-%20ALEX%20BEVILACQUA%20https%3A%2F%2Fwww.alexbevi.com%2Fblog%2F2022%2F01%2F24%2Fgenerate-mongodb-index-utilization-report%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Bluesky" aria-label="Bluesky"> <i class="fa-fw fa-brands fa-bluesky"></i> </a> <a href="https://www.reddit.com/submit?url=https%3A%2F%2Fwww.alexbevi.com%2Fblog%2F2022%2F01%2F24%2Fgenerate-mongodb-index-utilization-report%2F&title=Generate%20MongoDB%20Index%20Utilization%20Report%20-%20ALEX%20BEVILACQUA" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Reddit" aria-label="Reddit"> <i class="fa-fw fa-brands fa-square-reddit"></i> </a> <a href="https://www.threads.net/intent/post?text=Generate%20MongoDB%20Index%20Utilization%20Report%20-%20ALEX%20BEVILACQUA%20https%3A%2F%2Fwww.alexbevi.com%2Fblog%2F2022%2F01%2F24%2Fgenerate-mongodb-index-utilization-report%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Threads" aria-label="Threads"> <i class="fa-fw fa-brands fa-square-threads"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/blog/2025/03/14/leisure-suit-larry-iii/">Leisure Suit Larry III: Passionate Patti in Pursuit of the Pulsating Pectorals! (Sierra On-Line) - 1989</a><li class="text-truncate lh-lg"> <a href="/blog/2021/07/28/adventure-games-1980-1999/">Let's Adventure! A Journey into Adventure Games (1980-1999)</a><li class="text-truncate lh-lg"> <a href="/blog/2021/08/08/adventure-games-1980-1999-sorted-by-score/">Let's Adventure! Reviewed Games Sorted by Score</a><li class="text-truncate lh-lg"> <a href="/blog/2025/03/25/cloudflare-workers-and-mongodb/">Cloudflare Workers and MongoDB</a><li class="text-truncate lh-lg"> <a href="/blog/2025/02/02/universe/">Universe (Core Design) - 1994</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/adventure/">adventure</a> <a class="post-tag btn btn-outline-primary" href="/tags/mongodb/">mongodb</a> <a class="post-tag btn btn-outline-primary" href="/tags/sierra-on-line/">Sierra On-Line</a> <a class="post-tag btn btn-outline-primary" href="/tags/drivers/">drivers</a> <a class="post-tag btn btn-outline-primary" href="/tags/redmine/">redmine</a> <a class="post-tag btn btn-outline-primary" href="/tags/ruby/">ruby</a> <a class="post-tag btn btn-outline-primary" href="/tags/rpg/">rpg</a> <a class="post-tag btn btn-outline-primary" href="/tags/sci/">SCI</a> <a class="post-tag btn btn-outline-primary" href="/tags/book/">book</a> <a class="post-tag btn btn-outline-primary" href="/tags/jrpg/">jrpg</a></div></section></div></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/blog/2022/11/29/efficiently-identifying-duplicates-using-mongodb/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1669737052" data-df="ll" > Nov 29, 2022 </time><h4 class="pt-0 my-2">Efficiently Identifying Duplicates using MongoDB</h4><div class="text-muted"><p>Efficiently Identifying Duplicates using MongoDB One question that comes up time and again on Stack Overflow or the MongoDB Developer Forums is “how can I find duplicate X and get a list of Y that...</p></div></div></a></article><article class="col"> <a href="/blog/2023/03/14/what-documents-did-my-ttl-index-delete/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1678793525" data-df="ll" > Mar 14, 2023 </time><h4 class="pt-0 my-2">What documents did my TTL index delete?</h4><div class="text-muted"><p>Introduction Have you ever had one or more documents removed from a MongoDB collection and you weren’t sure what they were? This can potentially occur if you have a TTL index defined, however the ...</p></div></div></a></article><article class="col"> <a href="/blog/2022/09/15/createindex-error-values-in-v-2-index-key-pattern-cannot-be-of-type-object/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1663238846" data-df="ll" > Sep 15, 2022 </time><h4 class="pt-0 my-2">Solving a mongorestore failure due to 'Values in v:2 index key pattern cannot be of type object.'</h4><div class="text-muted"><p>Starting with MongoDB 4.4, the MongoDB Database Tools are now released separately from the MongoDB Server and use their own versioning, with an initial version of 100.0.0. Previously, these tools w...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/blog/2022/01/04/what-versions-of-mongodb-has-this-node-run/" class="btn btn-outline-primary" aria-label="Older" ><p>What Versions of MongoDB Has This Node Run?</p></a> <a href="/blog/2022/02/07/cleaning-up-etl-results-in-mongodb-by-transposing-multiple-arrays/" class="btn btn-outline-primary" aria-label="Newer" ><p>Cleaning Up ETL Results in MongoDB by Transposing Multiple Arrays</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://twitter.com/alexbevi">Alex Bevilacqua</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/adventure/">adventure</a> <a class="post-tag btn btn-outline-primary" href="/tags/mongodb/">mongodb</a> <a class="post-tag btn btn-outline-primary" href="/tags/sierra-on-line/">Sierra On-Line</a> <a class="post-tag btn btn-outline-primary" href="/tags/drivers/">drivers</a> <a class="post-tag btn btn-outline-primary" href="/tags/redmine/">redmine</a> <a class="post-tag btn btn-outline-primary" href="/tags/ruby/">ruby</a> <a class="post-tag btn btn-outline-primary" href="/tags/rpg/">rpg</a> <a class="post-tag btn btn-outline-primary" href="/tags/sci/">SCI</a> <a class="post-tag btn btn-outline-primary" href="/tags/book/">book</a> <a class="post-tag btn btn-outline-primary" href="/tags/jrpg/">jrpg</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> var disqus_config = function () { this.page.url = 'https://www.alexbevi.com/blog/2022/01/24/generate-mongodb-index-utilization-report/'; this.page.identifier = '/blog/2022/01/24/generate-mongodb-index-utilization-report/'; }; function addDisqus() { let disqusThread = document.createElement('div'); let paragraph = document.createElement('p'); disqusThread.id = 'disqus_thread'; paragraph.className = 'text-center text-muted small'; paragraph.innerHTML = 'Comments powered by <a href="https://disqus.com/">Disqus</a>.'; disqusThread.appendChild(paragraph); const footer = document.querySelector('footer'); footer.insertAdjacentElement("beforebegin", disqusThread); }function reloadDisqus(event) { if (event.source === window && event.data && event.data.id === Theme.ID) {if (typeof DISQUS === 'undefined') { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } } addDisqus(); if (Theme.switchable) { addEventListener('message', reloadDisqus); }var disqusObserver = new IntersectionObserver( function (entries) { if (entries[0].isIntersecting) { var d = document, s = d.createElement('script'); s.src = 'https://alexbevi.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); disqusObserver.disconnect(); } }, { threshold: [0] } ); disqusObserver.observe(document.getElementById('disqus_thread')); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
