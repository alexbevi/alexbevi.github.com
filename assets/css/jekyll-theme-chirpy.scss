---
---

@use 'main
{%- if jekyll.environment == 'production' -%}
  .bundle
{%- endif -%}
';

/* append your custom style below */

/* ===============================
   Track Rating Row — Full CSS
   =============================== */

/* Optional theme tokens (override as needed) */
:root{
  --trk-accent: #2b6cb0;              /* circle & icon color */
  --trk-ink: var(--text-color, #1a1a1a);
  --trk-bg:  var(--card-bg, #ffffff);
  --trk-staff-line: rgba(0,0,0,.08);
  --trk-tooltip-bg: rgba(20,24,28,.95);
  --trk-tooltip-shadow: 0 6px 20px rgba(0,0,0,.3);
}

@media (prefers-color-scheme: dark){
  :root{
    --trk-ink: #eeeeee;
    --trk-bg:  #121417;
    --trk-staff-line: rgba(255,255,255,.08);
  }
}

/* Container row with musical staff background */
.trk-row{
  width: 100%;
  display: flex;
  align-items: center;
  gap: .6rem;
  padding: .6rem .8rem .6rem .5rem;
  border-radius: 14px;
  color: var(--trk-ink);
  background:
    repeating-linear-gradient(
      to bottom,
      transparent 0, transparent 7px,
      var(--trk-staff-line) 7px, var(--trk-staff-line) 8px
    ),
    var(--trk-bg);
  box-shadow: 0 1px 0 rgba(0,0,0,.04), 0 2px 10px rgba(0,0,0,.04);
}

/* RPG icon (music notes + sword) */
.trk-icon{
  flex: 0 0 auto;
  display: grid;
  place-items: center;
  margin-left: .1rem;
}
.trk-icon-svg{
  width: 36px;
  height: 28px;
  color: var(--trk-accent);
}

/* Title + role */
.trk-left{
  display: flex;
  align-items: baseline;
  gap: .5rem;
  min-width: 0;        /* enables truncation */
  flex: 1 1 auto;
}
.trk-title{
  font-weight: 600;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.trk-role{
  font-size: .8rem;
  opacity: .75;
  padding: .1rem .45rem;
  border: 1px solid currentColor;
  border-radius: 999px;
  white-space: nowrap;
}

/* Criterion chips (H/E/C/L/S) */
.trk-chips{
  display: flex;
  gap: .35rem;
  flex: 0 0 auto;
}
.trk-chip{
  position: relative;          /* anchor for tooltip */
  font-size: .78rem;
  line-height: 1;
  padding: .25rem .45rem;
  border-radius: 999px;
  border: 1px solid rgba(0,0,0,.15);
  background: rgba(0,0,0,.03);
  cursor: help;
}
@media (prefers-color-scheme: dark){
  .trk-chip{
    border-color: rgba(255,255,255,.18);
    background: rgba(255,255,255,.05);
  }
}

/* Average score circle (right-aligned) */
.trk-score{
  position: relative;          /* anchor for tooltip */
  margin-left: auto;
  flex: 0 0 auto;
  width: 2.6rem;
  height: 2.6rem;
  min-width: 2.6rem;
  border-radius: 50%;
  border: 3px solid var(--trk-accent);
  display: grid;
  place-items: center;
  font-weight: 800;
  color: var(--trk-accent);
  background: radial-gradient(closest-side, #fff 70%, transparent 0);
  cursor: help;
}
@media (prefers-color-scheme: dark){
  .trk-score{
    background: radial-gradient(closest-side, #0e1113 70%, transparent 0);
  }
}

/* ===============================
   Lightweight CSS Tooltips
   Uses data-tip attributes.
   =============================== */

.trk-chip::after,
.trk-score.trk-tip::after{
  content: attr(data-tip);
  position: absolute;
  left: 50%;
  bottom: 100%;
  transform: translateX(-50%) translateY(-10px);
  max-width: 40rem;             /* wider tooltip */
  width: max-content;
  padding: .6rem .8rem;
  border-radius: .5rem;
  background: var(--trk-tooltip-bg);
  color: #fff;
  font-size: .8rem;
  line-height: 1.25;
  white-space: pre-wrap;
  box-shadow: var(--trk-tooltip-shadow);
  opacity: 0;
  pointer-events: none;
  transition: opacity .15s ease, transform .15s ease;
  z-index: 100;
}

/* Show tooltips on hover/focus */
.trk-chip:hover::after,
.trk-chip:focus-visible::after,
.trk-score.trk-tip:hover::after,
.trk-score.trk-tip:focus-visible::after{
  opacity: 1;
  transform: translateX(-50%) translateY(-16px);
}

/* Ensure final score tooltip floats above all and a bit farther */
.trk-score.trk-tip::after{
  bottom: calc(100% + 8px);
  z-index: 200;
}

/* ===============================
   Niceties
   =============================== */

/* Reduce motion: no animated tooltip movement */
@media (prefers-reduced-motion: reduce){
  .trk-chip::after,
  .trk-score.trk-tip::after{
    transition: none;
  }
}

/* High-contrast tweak: stronger borders */
@media (forced-colors: active){
  .trk-row{ box-shadow: none; }
  .trk-score{ border-width: 2px; }
  .trk-chip{ border-width: 1px; }
}

/* Suite row inherits all base .trk-row styles, but with a purple-ish tint */
.suite-row{
  /* different accent & staff tint */
  --trk-accent: #7b61ff;
  --trk-staff-line: rgba(123, 97, 255, .20);
  /* soft suite tint over the card bg */
  background:
    repeating-linear-gradient(
      to bottom,
      transparent 0, transparent 7px,
      var(--trk-staff-line) 7px, var(--trk-staff-line) 8px
    ),
    linear-gradient(rgba(123,97,255,.06), rgba(123,97,255,.06)),
    var(--trk-bg);
}

@media (prefers-color-scheme: dark){
  .suite-row{
    --trk-staff-line: rgba(123, 97, 255, .30);
    background:
      repeating-linear-gradient(
        to bottom,
        transparent 0, transparent 7px,
        var(--trk-staff-line) 7px, var(--trk-staff-line) 8px
      ),
      linear-gradient(rgba(123,97,255,.10), rgba(123,97,255,.10)),
      var(--trk-bg);
  }
}

/* Final row: bigger label + bigger score, subtle gold tint */
.final-row{
  --trk-accent: #c08f00; /* gold-ish accent for the “final” */
  --trk-staff-line: rgba(192, 143, 0, .18);
  background:
    repeating-linear-gradient(
      to bottom,
      transparent 0, transparent 7px,
      var(--trk-staff-line) 7px, var(--trk-staff-line) 8px
    ),
    linear-gradient(rgba(192,143,0,.06), rgba(192,143,0,.06)),
    var(--trk-bg);
}

/* Title larger */
.final-row .final-title{
  font-size: 1.12rem;
  font-weight: 700;
}

/* Larger score badge + larger number */
.final-row .final-score{
  width: 3.4rem;
  height: 3.4rem;
  min-width: 3.4rem;
  border-width: 3px;
}
.final-row .final-score > span{
  font-size: 1.05rem; /* larger numeral inside the circle */
  line-height: 1;
}
